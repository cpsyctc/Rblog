<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  { color: #00769e; background-color: #f1f3f5; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span { color: #00769e; } /* Normal */
code span.al { color: #ad0000; } /* Alert */
code span.an { color: #5e5e5e; } /* Annotation */
code span.at { color: #657422; } /* Attribute */
code span.bn { color: #ad0000; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #00769e; } /* ControlFlow */
code span.ch { color: #20794d; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #5e5e5e; } /* Comment */
code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
code span.dt { color: #ad0000; } /* DataType */
code span.dv { color: #ad0000; } /* DecVal */
code span.er { color: #ad0000; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #ad0000; } /* Float */
code span.fu { color: #4758ab; } /* Function */
code span.im { } /* Import */
code span.in { color: #5e5e5e; } /* Information */
code span.kw { color: #00769e; } /* Keyword */
code span.op { color: #5e5e5e; } /* Operator */
code span.ot { color: #00769e; } /* Other */
code span.pp { color: #ad0000; } /* Preprocessor */
code span.sc { color: #5e5e5e; } /* SpecialChar */
code span.ss { color: #20794d; } /* SpecialString */
code span.st { color: #20794d; } /* String */
code span.va { color: #111111; } /* Variable */
code span.vs { color: #20794d; } /* VerbatimString */
code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
</style>


  <!--radix_placeholder_meta_tags-->
<title>Chris (Evans) R SAFAQ: CSC by gender and age</title>

<meta property="description" itemprop="description" content="CSC matching lookup with lookupCSCgenderAndAge()"/>

<link rel="canonical" href="https://www.psyctc.org/R_blog/posts/2024-01-21-lookupcsc2/"/>
<link rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/"/>
<link rel="icon" type="image/png" href="../../Rblog_logo.png"/>

<!--  https://schema.org/Article -->
<meta property="article:published" itemprop="datePublished" content="2024-01-21"/>
<meta property="article:created" itemprop="dateCreated" content="2024-01-21"/>
<meta name="article:author" content="Chris Evans"/>

<!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
<meta property="og:title" content="Chris (Evans) R SAFAQ: CSC by gender and age"/>
<meta property="og:type" content="article"/>
<meta property="og:description" content="CSC matching lookup with lookupCSCgenderAndAge()"/>
<meta property="og:url" content="https://www.psyctc.org/R_blog/posts/2024-01-21-lookupcsc2/"/>
<meta property="og:image" content="https://www.psyctc.org/R_blog/posts/2024-01-21-lookupcsc2/lookupcsc2_files/figure-html5/showData-1.png"/>
<meta property="og:image:width" content="3072"/>
<meta property="og:image:height" content="2304"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:site_name" content="Chris (Evans) R SAFAQ"/>

<!--  https://dev.twitter.com/cards/types/summary -->
<meta property="twitter:card" content="summary_large_image"/>
<meta property="twitter:title" content="Chris (Evans) R SAFAQ: CSC by gender and age"/>
<meta property="twitter:description" content="CSC matching lookup with lookupCSCgenderAndAge()"/>
<meta property="twitter:url" content="https://www.psyctc.org/R_blog/posts/2024-01-21-lookupcsc2/"/>
<meta property="twitter:image" content="https://www.psyctc.org/R_blog/posts/2024-01-21-lookupcsc2/lookupcsc2_files/figure-html5/showData-1.png"/>
<meta property="twitter:image:width" content="3072"/>
<meta property="twitter:image:height" content="2304"/>

<!--  https://scholar.google.com/intl/en/scholar/inclusion.html#indexing -->
<meta name="citation_title" content="Chris (Evans) R SAFAQ: CSC by gender and age"/>
<meta name="citation_fulltext_html_url" content="https://www.psyctc.org/R_blog/posts/2024-01-21-lookupcsc2/"/>
<meta name="citation_fulltext_world_readable" content=""/>
<meta name="citation_online_date" content="2024/01/21"/>
<meta name="citation_publication_date" content="2024/01/21"/>
<meta name="citation_author" content="Chris Evans"/>
<meta name="citation_author_institution" content="PSYCTC.org"/>
<!--/radix_placeholder_meta_tags-->
  <!--radix_placeholder_rmarkdown_metadata-->

<script type="text/json" id="radix-rmarkdown-metadata">
{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","description","author","date","categories","output","creative_commons","citation_url","canonical_url"]}},"value":[{"type":"character","attributes":{},"value":["CSC by gender and age"]},{"type":"character","attributes":{},"value":["CSC matching lookup with lookupCSCgenderAndAge()"]},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","url","affiliation","affiliation_url","orcid_id"]}},"value":[{"type":"character","attributes":{},"value":["Chris Evans"]},{"type":"character","attributes":{},"value":["https://www.psyctc.org/R_blog/"]},{"type":"character","attributes":{},"value":["PSYCTC.org"]},{"type":"character","attributes":{},"value":["https://www.psyctc.org/psyctc/"]},{"type":"character","attributes":{},"value":["0000-0002-4197-4202"]}]}]},{"type":"character","attributes":{},"value":["2024-01-21"]},{"type":"character","attributes":{},"value":["RCSC paradigm","CECPfuns package"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["distill::distill_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["toc_depth","highlight_downlit","self_contained","code_folding"]}},"value":[{"type":"integer","attributes":{},"value":[4]},{"type":"logical","attributes":{},"value":[true]},{"type":"logical","attributes":{},"value":[false]},{"type":"logical","attributes":{},"value":[true]}]}]},{"type":"character","attributes":{},"value":["CC BY-SA"]},{"type":"character","attributes":{},"value":["https://www.psyctc.org/R_blog/posts/2024-01-21-lookupcsc2/"]},{"type":"character","attributes":{},"value":["https://www.psyctc.org/R_blog/posts/2024-01-21-lookupcsc2/"]}]}
</script>
<!--/radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-resource-manifest">
  {"type":"character","attributes":{},"value":["exampleData","lookupcsc2_files/anchor-4.2.2/anchor.min.js","lookupcsc2_files/bowser-1.9.3/bowser.min.js","lookupcsc2_files/distill-2.2.21/template.v2.js","lookupcsc2_files/figure-html5/showData-1.png","lookupcsc2_files/figure-html5/testFunction2-1.png","lookupcsc2_files/figure-html5/testFunction4-1.png","lookupcsc2_files/figure-html5/useClinScoring-1.png","lookupcsc2_files/header-attrs-2.25/header-attrs.js","lookupcsc2_files/jquery-3.6.0/jquery-3.6.0.js","lookupcsc2_files/jquery-3.6.0/jquery-3.6.0.min.js","lookupcsc2_files/jquery-3.6.0/jquery-3.6.0.min.map","lookupcsc2_files/popper-2.6.0/popper.min.js","lookupcsc2_files/tabwid-1.1.3/tabwid.css","lookupcsc2_files/tabwid-1.1.3/tabwid.js","lookupcsc2_files/tippy-6.2.7/tippy-bundle.umd.min.js","lookupcsc2_files/tippy-6.2.7/tippy-light-border.css","lookupcsc2_files/tippy-6.2.7/tippy.css","lookupcsc2_files/tippy-6.2.7/tippy.umd.min.js","lookupcsc2_files/webcomponents-2.0.0/webcomponents.js","tmp.csv"]}
  </script>
  <!--radix_placeholder_navigation_in_header-->
<meta name="distill:offset" content="../.."/>

<script type="application/javascript">

  window.headroom_prevent_pin = false;

  window.document.addEventListener("DOMContentLoaded", function (event) {

    // initialize headroom for banner
    var header = $('header').get(0);
    var headerHeight = header.offsetHeight;
    var headroom = new Headroom(header, {
      tolerance: 5,
      onPin : function() {
        if (window.headroom_prevent_pin) {
          window.headroom_prevent_pin = false;
          headroom.unpin();
        }
      }
    });
    headroom.init();
    if(window.location.hash)
      headroom.unpin();
    $(header).addClass('headroom--transition');

    // offset scroll location for banner on hash change
    // (see: https://github.com/WickyNilliams/headroom.js/issues/38)
    window.addEventListener("hashchange", function(event) {
      window.scrollTo(0, window.pageYOffset - (headerHeight + 25));
    });

    // responsive menu
    $('.distill-site-header').each(function(i, val) {
      var topnav = $(this);
      var toggle = topnav.find('.nav-toggle');
      toggle.on('click', function() {
        topnav.toggleClass('responsive');
      });
    });

    // nav dropdowns
    $('.nav-dropbtn').click(function(e) {
      $(this).next('.nav-dropdown-content').toggleClass('nav-dropdown-active');
      $(this).parent().siblings('.nav-dropdown')
         .children('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $("body").click(function(e){
      $('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $(".nav-dropdown").click(function(e){
      e.stopPropagation();
    });
  });
</script>

<style type="text/css">

/* Theme (user-documented overrideables for nav appearance) */

.distill-site-nav {
  color: rgba(255, 255, 255, 0.8);
  background-color: #0F2E3D;
  font-size: 15px;
  font-weight: 300;
}

.distill-site-nav a {
  color: inherit;
  text-decoration: none;
}

.distill-site-nav a:hover {
  color: white;
}

@media print {
  .distill-site-nav {
    display: none;
  }
}

.distill-site-header {

}

.distill-site-footer {

}


/* Site Header */

.distill-site-header {
  width: 100%;
  box-sizing: border-box;
  z-index: 3;
}

.distill-site-header .nav-left {
  display: inline-block;
  margin-left: 8px;
}

@media screen and (max-width: 768px) {
  .distill-site-header .nav-left {
    margin-left: 0;
  }
}


.distill-site-header .nav-right {
  float: right;
  margin-right: 8px;
}

.distill-site-header a,
.distill-site-header .title {
  display: inline-block;
  text-align: center;
  padding: 14px 10px 14px 10px;
}

.distill-site-header .title {
  font-size: 18px;
  min-width: 150px;
}

.distill-site-header .logo {
  padding: 0;
}

.distill-site-header .logo img {
  display: none;
  max-height: 20px;
  width: auto;
  margin-bottom: -4px;
}

.distill-site-header .nav-image img {
  max-height: 18px;
  width: auto;
  display: inline-block;
  margin-bottom: -3px;
}



@media screen and (min-width: 1000px) {
  .distill-site-header .logo img {
    display: inline-block;
  }
  .distill-site-header .nav-left {
    margin-left: 20px;
  }
  .distill-site-header .nav-right {
    margin-right: 20px;
  }
  .distill-site-header .title {
    padding-left: 12px;
  }
}


.distill-site-header .nav-toggle {
  display: none;
}

.nav-dropdown {
  display: inline-block;
  position: relative;
}

.nav-dropdown .nav-dropbtn {
  border: none;
  outline: none;
  color: rgba(255, 255, 255, 0.8);
  padding: 16px 10px;
  background-color: transparent;
  font-family: inherit;
  font-size: inherit;
  font-weight: inherit;
  margin: 0;
  margin-top: 1px;
  z-index: 2;
}

.nav-dropdown-content {
  display: none;
  position: absolute;
  background-color: white;
  min-width: 200px;
  border: 1px solid rgba(0,0,0,0.15);
  border-radius: 4px;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.1);
  z-index: 1;
  margin-top: 2px;
  white-space: nowrap;
  padding-top: 4px;
  padding-bottom: 4px;
}

.nav-dropdown-content hr {
  margin-top: 4px;
  margin-bottom: 4px;
  border: none;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.nav-dropdown-active {
  display: block;
}

.nav-dropdown-content a, .nav-dropdown-content .nav-dropdown-header {
  color: black;
  padding: 6px 24px;
  text-decoration: none;
  display: block;
  text-align: left;
}

.nav-dropdown-content .nav-dropdown-header {
  display: block;
  padding: 5px 24px;
  padding-bottom: 0;
  text-transform: uppercase;
  font-size: 14px;
  color: #999999;
  white-space: nowrap;
}

.nav-dropdown:hover .nav-dropbtn {
  color: white;
}

.nav-dropdown-content a:hover {
  background-color: #ddd;
  color: black;
}

.nav-right .nav-dropdown-content {
  margin-left: -45%;
  right: 0;
}

@media screen and (max-width: 768px) {
  .distill-site-header a, .distill-site-header .nav-dropdown  {display: none;}
  .distill-site-header a.nav-toggle {
    float: right;
    display: block;
  }
  .distill-site-header .title {
    margin-left: 0;
  }
  .distill-site-header .nav-right {
    margin-right: 0;
  }
  .distill-site-header {
    overflow: hidden;
  }
  .nav-right .nav-dropdown-content {
    margin-left: 0;
  }
}


@media screen and (max-width: 768px) {
  .distill-site-header.responsive {position: relative; min-height: 500px; }
  .distill-site-header.responsive a.nav-toggle {
    position: absolute;
    right: 0;
    top: 0;
  }
  .distill-site-header.responsive a,
  .distill-site-header.responsive .nav-dropdown {
    display: block;
    text-align: left;
  }
  .distill-site-header.responsive .nav-left,
  .distill-site-header.responsive .nav-right {
    width: 100%;
  }
  .distill-site-header.responsive .nav-dropdown {float: none;}
  .distill-site-header.responsive .nav-dropdown-content {position: relative;}
  .distill-site-header.responsive .nav-dropdown .nav-dropbtn {
    display: block;
    width: 100%;
    text-align: left;
  }
}

/* Site Footer */

.distill-site-footer {
  width: 100%;
  overflow: hidden;
  box-sizing: border-box;
  z-index: 3;
  margin-top: 30px;
  padding-top: 30px;
  padding-bottom: 30px;
  text-align: center;
}

/* Headroom */

d-title {
  padding-top: 6rem;
}

@media print {
  d-title {
    padding-top: 4rem;
  }
}

.headroom {
  z-index: 1000;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
}

.headroom--transition {
  transition: all .4s ease-in-out;
}

.headroom--unpinned {
  top: -100px;
}

.headroom--pinned {
  top: 0;
}

/* adjust viewport for navbar height */
/* helps vertically center bootstrap (non-distill) content */
.min-vh-100 {
  min-height: calc(100vh - 100px) !important;
}

</style>

<script src="../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="../../site_libs/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"/>
<link href="../../site_libs/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"/>
<script src="../../site_libs/headroom-0.9.4/headroom.min.js"></script>
<script src="../../site_libs/autocomplete-0.37.1/autocomplete.min.js"></script>
<script src="../../site_libs/fuse-6.4.1/fuse.min.js"></script>

<script type="application/javascript">

function getMeta(metaName) {
  var metas = document.getElementsByTagName('meta');
  for (let i = 0; i < metas.length; i++) {
    if (metas[i].getAttribute('name') === metaName) {
      return metas[i].getAttribute('content');
    }
  }
  return '';
}

function offsetURL(url) {
  var offset = getMeta('distill:offset');
  return offset ? offset + '/' + url : url;
}

function createFuseIndex() {

  // create fuse index
  var options = {
    keys: [
      { name: 'title', weight: 20 },
      { name: 'categories', weight: 15 },
      { name: 'description', weight: 10 },
      { name: 'contents', weight: 5 },
    ],
    ignoreLocation: true,
    threshold: 0
  };
  var fuse = new window.Fuse([], options);

  // fetch the main search.json
  return fetch(offsetURL('search.json'))
    .then(function(response) {
      if (response.status == 200) {
        return response.json().then(function(json) {
          // index main articles
          json.articles.forEach(function(article) {
            fuse.add(article);
          });
          // download collections and index their articles
          return Promise.all(json.collections.map(function(collection) {
            return fetch(offsetURL(collection)).then(function(response) {
              if (response.status === 200) {
                return response.json().then(function(articles) {
                  articles.forEach(function(article) {
                    fuse.add(article);
                  });
                })
              } else {
                return Promise.reject(
                  new Error('Unexpected status from search index request: ' +
                            response.status)
                );
              }
            });
          })).then(function() {
            return fuse;
          });
        });

      } else {
        return Promise.reject(
          new Error('Unexpected status from search index request: ' +
                      response.status)
        );
      }
    });
}

window.document.addEventListener("DOMContentLoaded", function (event) {

  // get search element (bail if we don't have one)
  var searchEl = window.document.getElementById('distill-search');
  if (!searchEl)
    return;

  createFuseIndex()
    .then(function(fuse) {

      // make search box visible
      searchEl.classList.remove('hidden');

      // initialize autocomplete
      var options = {
        autoselect: true,
        hint: false,
        minLength: 2,
      };
      window.autocomplete(searchEl, options, [{
        source: function(query, callback) {
          const searchOptions = {
            isCaseSensitive: false,
            shouldSort: true,
            minMatchCharLength: 2,
            limit: 10,
          };
          var results = fuse.search(query, searchOptions);
          callback(results
            .map(function(result) { return result.item; })
          );
        },
        templates: {
          suggestion: function(suggestion) {
            var img = suggestion.preview && Object.keys(suggestion.preview).length > 0
              ? `<img src="${offsetURL(suggestion.preview)}"</img>`
              : '';
            var html = `
              <div class="search-item">
                <h3>${suggestion.title}</h3>
                <div class="search-item-description">
                  ${suggestion.description || ''}
                </div>
                <div class="search-item-preview">
                  ${img}
                </div>
              </div>
            `;
            return html;
          }
        }
      }]).on('autocomplete:selected', function(event, suggestion) {
        window.location.href = offsetURL(suggestion.path);
      });
      // remove inline display style on autocompleter (we want to
      // manage responsive display via css)
      $('.algolia-autocomplete').css("display", "");
    })
    .catch(function(error) {
      console.log(error);
    });

});

</script>

<style type="text/css">

.nav-search {
  font-size: x-small;
}

/* Algolioa Autocomplete */

.algolia-autocomplete {
  display: inline-block;
  margin-left: 10px;
  vertical-align: sub;
  background-color: white;
  color: black;
  padding: 6px;
  padding-top: 8px;
  padding-bottom: 0;
  border-radius: 6px;
  border: 1px #0F2E3D solid;
  width: 180px;
}


@media screen and (max-width: 768px) {
  .distill-site-nav .algolia-autocomplete {
    display: none;
    visibility: hidden;
  }
  .distill-site-nav.responsive .algolia-autocomplete {
    display: inline-block;
    visibility: visible;
  }
  .distill-site-nav.responsive .algolia-autocomplete .aa-dropdown-menu {
    margin-left: 0;
    width: 400px;
    max-height: 400px;
  }
}

.algolia-autocomplete .aa-input, .algolia-autocomplete .aa-hint {
  width: 90%;
  outline: none;
  border: none;
}

.algolia-autocomplete .aa-hint {
  color: #999;
}
.algolia-autocomplete .aa-dropdown-menu {
  width: 550px;
  max-height: 70vh;
  overflow-x: visible;
  overflow-y: scroll;
  padding: 5px;
  margin-top: 3px;
  margin-left: -150px;
  background-color: #fff;
  border-radius: 5px;
  border: 1px solid #999;
  border-top: none;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion {
  cursor: pointer;
  padding: 5px 4px;
  border-bottom: 1px solid #eee;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion:last-of-type {
  border-bottom: none;
  margin-bottom: 2px;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item {
  overflow: hidden;
  font-size: 0.8em;
  line-height: 1.4em;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item h3 {
  font-size: 1rem;
  margin-block-start: 0;
  margin-block-end: 5px;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-description {
  display: inline-block;
  overflow: hidden;
  height: 2.8em;
  width: 80%;
  margin-right: 4%;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview {
  display: inline-block;
  width: 15%;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img {
  height: 3em;
  width: auto;
  display: none;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img[src] {
  display: initial;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion.aa-cursor {
  background-color: #eee;
}
.algolia-autocomplete .aa-dropdown-menu .aa-suggestion em {
  font-weight: bold;
  font-style: normal;
}

</style>


<!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

<style type="text/css">

body {
  background-color: white;
}

.pandoc-table {
  width: 100%;
}

.pandoc-table>caption {
  margin-bottom: 10px;
}

.pandoc-table th:not([align]) {
  text-align: left;
}

.pagedtable-footer {
  font-size: 15px;
}

d-byline .byline {
  grid-template-columns: 2fr 2fr;
}

d-byline .byline h3 {
  margin-block-start: 1.5em;
}

d-byline .byline .authors-affiliations h3 {
  margin-block-start: 0.5em;
}

.authors-affiliations .orcid-id {
  width: 16px;
  height:16px;
  margin-left: 4px;
  margin-right: 4px;
  vertical-align: middle;
  padding-bottom: 2px;
}

d-title .dt-tags {
  margin-top: 1em;
  grid-column: text;
}

.dt-tags .dt-tag {
  text-decoration: none;
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0em 0.4em;
  margin-right: 0.5em;
  margin-bottom: 0.4em;
  font-size: 70%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

d-article table.gt_table td,
d-article table.gt_table th {
  border-bottom: none;
  font-size: 100%;
}

.html-widget {
  margin-bottom: 2.0em;
}

.l-screen-inset {
  padding-right: 16px;
}

.l-screen .caption {
  margin-left: 10px;
}

.shaded {
  background: rgb(247, 247, 247);
  padding-top: 20px;
  padding-bottom: 20px;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .html-widget {
  margin-bottom: 0;
  border: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .shaded-content {
  background: white;
}

.text-output {
  margin-top: 0;
  line-height: 1.5em;
}

.hidden {
  display: none !important;
}

hr.section-separator {
  border: none;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  margin: 0px;
}


d-byline {
  border-top: none;
}

d-article {
  padding-top: 2.5rem;
  padding-bottom: 30px;
  border-top: none;
}

d-appendix {
  padding-top: 30px;
}

d-article>p>img {
  width: 100%;
}

d-article h2 {
  margin: 1rem 0 1.5rem 0;
}

d-article h3 {
  margin-top: 1.5rem;
}

d-article iframe {
  border: 1px solid rgba(0, 0, 0, 0.1);
  margin-bottom: 2.0em;
  width: 100%;
}

/* Tweak code blocks */

d-article div.sourceCode code,
d-article pre code {
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
}

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: auto;
}

d-article div.sourceCode {
  background-color: white;
}

d-article div.sourceCode pre {
  padding-left: 10px;
  font-size: 12px;
  border-left: 2px solid rgba(0,0,0,0.1);
}

d-article pre {
  font-size: 12px;
  color: black;
  background: none;
  margin-top: 0;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

d-article pre a {
  border-bottom: none;
}

d-article pre a:hover {
  border-bottom: none;
  text-decoration: underline;
}

d-article details {
  grid-column: text;
  margin-bottom: 0.8em;
}

@media(min-width: 768px) {

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: visible !important;
}

d-article div.sourceCode pre {
  padding-left: 18px;
  font-size: 14px;
}

/* tweak for Pandoc numbered line within distill */
d-article pre.numberSource code > span {
    left: -2em;
}

d-article pre {
  font-size: 14px;
}

}

figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

/* CSS for d-contents */

.d-contents {
  grid-column: text;
  color: rgba(0,0,0,0.8);
  font-size: 0.9em;
  padding-bottom: 1em;
  margin-bottom: 1em;
  padding-bottom: 0.5em;
  margin-bottom: 1em;
  padding-left: 0.25em;
  justify-self: start;
}

@media(min-width: 1000px) {
  .d-contents.d-contents-float {
    height: 0;
    grid-column-start: 1;
    grid-column-end: 4;
    justify-self: center;
    padding-right: 3em;
    padding-left: 2em;
  }
}

.d-contents nav h3 {
  font-size: 18px;
  margin-top: 0;
  margin-bottom: 1em;
}

.d-contents li {
  list-style-type: none
}

.d-contents nav > ul {
  padding-left: 0;
}

.d-contents ul {
  padding-left: 1em
}

.d-contents nav ul li {
  margin-top: 0.6em;
  margin-bottom: 0.2em;
}

.d-contents nav a {
  font-size: 13px;
  border-bottom: none;
  text-decoration: none
  color: rgba(0, 0, 0, 0.8);
}

.d-contents nav a:hover {
  text-decoration: underline solid rgba(0, 0, 0, 0.6)
}

.d-contents nav > ul > li > a {
  font-weight: 600;
}

.d-contents nav > ul > li > ul {
  font-weight: inherit;
}

.d-contents nav > ul > li > ul > li {
  margin-top: 0.2em;
}


.d-contents nav ul {
  margin-top: 0;
  margin-bottom: 0.25em;
}

.d-article-with-toc h2:nth-child(2) {
  margin-top: 0;
}


/* Figure */

.figure {
  position: relative;
  margin-bottom: 2.5em;
  margin-top: 1.5em;
}

.figure .caption {
  color: rgba(0, 0, 0, 0.6);
  font-size: 12px;
  line-height: 1.5em;
}

.figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

.figure .caption a {
  color: rgba(0, 0, 0, 0.6);
}

.figure .caption b,
.figure .caption strong, {
  font-weight: 600;
  color: rgba(0, 0, 0, 1.0);
}

/* Citations */

d-article .citation {
  color: inherit;
  cursor: inherit;
}

div.hanging-indent{
  margin-left: 1em; text-indent: -1em;
}

/* Citation hover box */

.tippy-box[data-theme~=light-border] {
  background-color: rgba(250, 250, 250, 0.95);
}

.tippy-content > p {
  margin-bottom: 0;
  padding: 2px;
}


/* Tweak 1000px media break to show more text */

@media(min-width: 1000px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 16px;
  }

  .grid {
    grid-column-gap: 16px;
  }

  d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
  }
  figure .caption, .figure .caption, figure figcaption {
    font-size: 13px;
  }
}

@media(min-width: 1180px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 32px;
  }

  .grid {
    grid-column-gap: 32px;
  }
}


/* Get the citation styles for the appendix (not auto-injected on render since
   we do our own rendering of the citation appendix) */

d-appendix .citation-appendix,
.d-appendix .citation-appendix {
  font-size: 11px;
  line-height: 15px;
  border-left: 1px solid rgba(0, 0, 0, 0.1);
  padding-left: 18px;
  border: 1px solid rgba(0,0,0,0.1);
  background: rgba(0, 0, 0, 0.02);
  padding: 10px 18px;
  border-radius: 3px;
  color: rgba(150, 150, 150, 1);
  overflow: hidden;
  margin-top: -12px;
  white-space: pre-wrap;
  word-wrap: break-word;
}

/* Include appendix styles here so they can be overridden */

d-appendix {
  contain: layout style;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-top: 60px;
  margin-bottom: 0;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  color: rgba(0,0,0,0.5);
  padding-top: 60px;
  padding-bottom: 48px;
}

d-appendix h3 {
  grid-column: page-start / text-start;
  font-size: 15px;
  font-weight: 500;
  margin-top: 1em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.65);
}

d-appendix h3 + * {
  margin-top: 1em;
}

d-appendix ol {
  padding: 0 0 0 15px;
}

@media (min-width: 768px) {
  d-appendix ol {
    padding: 0 0 0 30px;
    margin-left: -30px;
  }
}

d-appendix li {
  margin-bottom: 1em;
}

d-appendix a {
  color: rgba(0, 0, 0, 0.6);
}

d-appendix > * {
  grid-column: text;
}

d-appendix > d-footnote-list,
d-appendix > d-citation-list,
d-appendix > distill-appendix {
  grid-column: screen;
}

/* Include footnote styles here so they can be overridden */

d-footnote-list {
  contain: layout style;
}

d-footnote-list > * {
  grid-column: text;
}

d-footnote-list a.footnote-backlink {
  color: rgba(0,0,0,0.3);
  padding-left: 0.5em;
}



/* Anchor.js */

.anchorjs-link {
  /*transition: all .25s linear; */
  text-decoration: none;
  border-bottom: none;
}
*:hover > .anchorjs-link {
  margin-left: -1.125em !important;
  text-decoration: none;
  border-bottom: none;
}

/* Social footer */

.social_footer {
  margin-top: 30px;
  margin-bottom: 0;
  color: rgba(0,0,0,0.67);
}

.disqus-comments {
  margin-right: 30px;
}

.disqus-comment-count {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  cursor: pointer;
}

#disqus_thread {
  margin-top: 30px;
}

.article-sharing a {
  border-bottom: none;
  margin-right: 8px;
}

.article-sharing a:hover {
  border-bottom: none;
}

.sidebar-section.subscribe {
  font-size: 12px;
  line-height: 1.6em;
}

.subscribe p {
  margin-bottom: 0.5em;
}


.article-footer .subscribe {
  font-size: 15px;
  margin-top: 45px;
}


.sidebar-section.custom {
  font-size: 12px;
  line-height: 1.6em;
}

.custom p {
  margin-bottom: 0.5em;
}

/* Styles for listing layout (hide title) */
.layout-listing d-title, .layout-listing .d-title {
  display: none;
}

/* Styles for posts lists (not auto-injected) */


.posts-with-sidebar {
  padding-left: 45px;
  padding-right: 45px;
}

.posts-list .description h2,
.posts-list .description p {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
}

.posts-list .description h2 {
  font-weight: 700;
  border-bottom: none;
  padding-bottom: 0;
}

.posts-list h2.post-tag {
  border-bottom: 1px solid rgba(0, 0, 0, 0.2);
  padding-bottom: 12px;
}
.posts-list {
  margin-top: 60px;
  margin-bottom: 24px;
}

.posts-list .post-preview {
  text-decoration: none;
  overflow: hidden;
  display: block;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  padding: 24px 0;
}

.post-preview-last {
  border-bottom: none !important;
}

.posts-list .posts-list-caption {
  grid-column: screen;
  font-weight: 400;
}

.posts-list .post-preview h2 {
  margin: 0 0 6px 0;
  line-height: 1.2em;
  font-style: normal;
  font-size: 24px;
}

.posts-list .post-preview p {
  margin: 0 0 12px 0;
  line-height: 1.4em;
  font-size: 16px;
}

.posts-list .post-preview .thumbnail {
  box-sizing: border-box;
  margin-bottom: 24px;
  position: relative;
  max-width: 500px;
}
.posts-list .post-preview img {
  width: 100%;
  display: block;
}

.posts-list .metadata {
  font-size: 12px;
  line-height: 1.4em;
  margin-bottom: 18px;
}

.posts-list .metadata > * {
  display: inline-block;
}

.posts-list .metadata .publishedDate {
  margin-right: 2em;
}

.posts-list .metadata .dt-authors {
  display: block;
  margin-top: 0.3em;
  margin-right: 2em;
}

.posts-list .dt-tags {
  display: block;
  line-height: 1em;
}

.posts-list .dt-tags .dt-tag {
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0.3em 0.4em;
  margin-right: 0.2em;
  margin-bottom: 0.4em;
  font-size: 60%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

.posts-list img {
  opacity: 1;
}

.posts-list img[data-src] {
  opacity: 0;
}

.posts-more {
  clear: both;
}


.posts-sidebar {
  font-size: 16px;
}

.posts-sidebar h3 {
  font-size: 16px;
  margin-top: 0;
  margin-bottom: 0.5em;
  font-weight: 400;
  text-transform: uppercase;
}

.sidebar-section {
  margin-bottom: 30px;
}

.categories ul {
  list-style-type: none;
  margin: 0;
  padding: 0;
}

.categories li {
  color: rgba(0, 0, 0, 0.8);
  margin-bottom: 0;
}

.categories li>a {
  border-bottom: none;
}

.categories li>a:hover {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
}

.categories .active {
  font-weight: 600;
}

.categories .category-count {
  color: rgba(0, 0, 0, 0.4);
}


@media(min-width: 768px) {
  .posts-list .post-preview h2 {
    font-size: 26px;
  }
  .posts-list .post-preview .thumbnail {
    float: right;
    width: 30%;
    margin-bottom: 0;
  }
  .posts-list .post-preview .description {
    float: left;
    width: 45%;
  }
  .posts-list .post-preview .metadata {
    float: left;
    width: 20%;
    margin-top: 8px;
  }
  .posts-list .post-preview p {
    margin: 0 0 12px 0;
    line-height: 1.5em;
    font-size: 16px;
  }
  .posts-with-sidebar .posts-list {
    float: left;
    width: 75%;
  }
  .posts-with-sidebar .posts-sidebar {
    float: right;
    width: 20%;
    margin-top: 60px;
    padding-top: 24px;
    padding-bottom: 24px;
  }
}


/* Improve display for browsers without grid (IE/Edge <= 15) */

.downlevel {
  line-height: 1.6em;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  margin: 0;
}

.downlevel .d-title {
  padding-top: 6rem;
  padding-bottom: 1.5rem;
}

.downlevel .d-title h1 {
  font-size: 50px;
  font-weight: 700;
  line-height: 1.1em;
  margin: 0 0 0.5rem;
}

.downlevel .d-title p {
  font-weight: 300;
  font-size: 1.2rem;
  line-height: 1.55em;
  margin-top: 0;
}

.downlevel .d-byline {
  padding-top: 0.8em;
  padding-bottom: 0.8em;
  font-size: 0.8rem;
  line-height: 1.8em;
}

.downlevel .section-separator {
  border: none;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
}

.downlevel .d-article {
  font-size: 1.06rem;
  line-height: 1.7em;
  padding-top: 1rem;
  padding-bottom: 2rem;
}


.downlevel .d-appendix {
  padding-left: 0;
  padding-right: 0;
  max-width: none;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.5);
  padding-top: 40px;
  padding-bottom: 48px;
}

.downlevel .footnotes ol {
  padding-left: 13px;
}

.downlevel .base-grid,
.downlevel .distill-header,
.downlevel .d-title,
.downlevel .d-abstract,
.downlevel .d-article,
.downlevel .d-appendix,
.downlevel .distill-appendix,
.downlevel .d-byline,
.downlevel .d-footnote-list,
.downlevel .d-citation-list,
.downlevel .distill-footer,
.downlevel .appendix-bottom,
.downlevel .posts-container {
  padding-left: 40px;
  padding-right: 40px;
}

@media(min-width: 768px) {
  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
  padding-left: 150px;
  padding-right: 150px;
  max-width: 900px;
}
}

.downlevel pre code {
  display: block;
  border-left: 2px solid rgba(0, 0, 0, .1);
  padding: 0 0 0 20px;
  font-size: 14px;
}

.downlevel code, .downlevel pre {
  color: black;
  background: none;
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

.downlevel .posts-list .post-preview {
  color: inherit;
}



</style>

<script type="application/javascript">

function is_downlevel_browser() {
  if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                 window.navigator.userAgent)) {
    return true;
  } else {
    return window.load_distill_framework === undefined;
  }
}

// show body when load is complete
function on_load_complete() {

  // add anchors
  if (window.anchors) {
    window.anchors.options.placement = 'left';
    window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
  }


  // set body to visible
  document.body.style.visibility = 'visible';

  // force redraw for leaflet widgets
  if (window.HTMLWidgets) {
    var maps = window.HTMLWidgets.findAll(".leaflet");
    $.each(maps, function(i, el) {
      var map = this.getMap();
      map.invalidateSize();
      map.eachLayer(function(layer) {
        if (layer instanceof L.TileLayer)
          layer.redraw();
      });
    });
  }

  // trigger 'shown' so htmlwidgets resize
  $('d-article').trigger('shown');
}

function init_distill() {

  init_common();

  // create front matter
  var front_matter = $('<d-front-matter></d-front-matter>');
  $('#distill-front-matter').wrap(front_matter);

  // create d-title
  $('.d-title').changeElementType('d-title');

  // separator
  var separator = '<hr class="section-separator" style="clear: both"/>';
  // prepend separator above appendix
  $('.d-byline').before(separator);
  $('.d-article').before(separator);

  // create d-byline
  var byline = $('<d-byline></d-byline>');
  $('.d-byline').replaceWith(byline);

  // create d-article
  var article = $('<d-article></d-article>');
  $('.d-article').wrap(article).children().unwrap();

  // move posts container into article
  $('.posts-container').appendTo($('d-article'));

  // create d-appendix
  $('.d-appendix').changeElementType('d-appendix');

  // flag indicating that we have appendix items
  var appendix = $('.appendix-bottom').children('h3').length > 0;

  // replace footnotes with <d-footnote>
  $('.footnote-ref').each(function(i, val) {
    appendix = true;
    var href = $(this).attr('href');
    var id = href.replace('#', '');
    var fn = $('#' + id);
    var fn_p = $('#' + id + '>p');
    fn_p.find('.footnote-back').remove();
    var text = fn_p.html();
    var dtfn = $('<d-footnote></d-footnote>');
    dtfn.html(text);
    $(this).replaceWith(dtfn);
  });
  // remove footnotes
  $('.footnotes').remove();

  // move refs into #references-listing
  $('#references-listing').replaceWith($('#refs'));

  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    var id = $(this).attr('id');
    $('.d-contents a[href="#' + id + '"]').parent().remove();
    appendix = true;
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
  });

  // show d-appendix if we have appendix content
  $("d-appendix").css('display', appendix ? 'grid' : 'none');

  // localize layout chunks to just output
  $('.layout-chunk').each(function(i, val) {

    // capture layout
    var layout = $(this).attr('data-layout');

    // apply layout to markdown level block elements
    var elements = $(this).children().not('details, div.sourceCode, pre, script');
    elements.each(function(i, el) {
      var layout_div = $('<div class="' + layout + '"></div>');
      if (layout_div.hasClass('shaded')) {
        var shaded_content = $('<div class="shaded-content"></div>');
        $(this).wrap(shaded_content);
        $(this).parent().wrap(layout_div);
      } else {
        $(this).wrap(layout_div);
      }
    });


    // unwrap the layout-chunk div
    $(this).children().unwrap();
  });

  // remove code block used to force  highlighting css
  $('.distill-force-highlighting-css').parent().remove();

  // remove empty line numbers inserted by pandoc when using a
  // custom syntax highlighting theme, except when numbering line
  // in code chunk
  $('pre:not(.numberLines) code.sourceCode a:empty').remove();

  // load distill framework
  load_distill_framework();

  // wait for window.distillRunlevel == 4 to do post processing
  function distill_post_process() {

    if (!window.distillRunlevel || window.distillRunlevel < 4)
      return;

    // hide author/affiliations entirely if we have no authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;
    if (!have_authors)
      $('d-byline').addClass('hidden');

    // article with toc class
    $('.d-contents').parent().addClass('d-article-with-toc');

    // strip links that point to #
    $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

    // add orcid ids
    $('.authors-affiliations').find('.author').each(function(i, el) {
      var orcid_id = front_matter.authors[i].orcidID;
      var author_name = front_matter.authors[i].author
      if (orcid_id) {
        var a = $('<a></a>');
        a.attr('href', 'https://orcid.org/' + orcid_id);
        var img = $('<img></img>');
        img.addClass('orcid-id');
        img.attr('alt', author_name ? 'ORCID ID for ' + author_name : 'ORCID ID');
        img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
        a.append(img);
        $(this).append(a);
      }
    });

    // hide elements of author/affiliations grid that have no value
    function hide_byline_column(caption) {
      $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
    }

    // affiliations
    var have_affiliations = false;
    for (var i = 0; i<front_matter.authors.length; ++i) {
      var author = front_matter.authors[i];
      if (author.affiliation !== "&nbsp;") {
        have_affiliations = true;
        break;
      }
    }
    if (!have_affiliations)
      $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

    // published date
    if (!front_matter.publishedDate)
      hide_byline_column("Published");

    // document object identifier
    var doi = $('d-byline').find('h3:contains("DOI")');
    var doi_p = doi.next().empty();
    if (!front_matter.doi) {
      // if we have a citation and valid citationText then link to that
      if ($('#citation').length > 0 && front_matter.citationText) {
        doi.html('Citation');
        $('<a href="#citation"></a>')
          .text(front_matter.citationText)
          .appendTo(doi_p);
      } else {
        hide_byline_column("DOI");
      }
    } else {
      $('<a></a>')
         .attr('href', "https://doi.org/" + front_matter.doi)
         .html(front_matter.doi)
         .appendTo(doi_p);
    }

     // change plural form of authors/affiliations
    if (front_matter.authors.length === 1) {
      var grid = $('.authors-affiliations');
      grid.children('h3:contains("Authors")').text('Author');
      grid.children('h3:contains("Affiliations")').text('Affiliation');
    }

    // remove d-appendix and d-footnote-list local styles
    $('d-appendix > style:first-child').remove();
    $('d-footnote-list > style:first-child').remove();

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // hoverable references
    $('span.citation[data-cites]').each(function() {
      const citeChild = $(this).children()[0]
      // Do not process if @xyz has been used without escaping and without bibliography activated
      // https://github.com/rstudio/distill/issues/466
      if (citeChild === undefined) return true

      if (citeChild.nodeName == "D-FOOTNOTE") {
        var fn = citeChild
        $(this).html(fn.shadowRoot.querySelector("sup"))
        $(this).id = fn.id
        fn.remove()
      }
      var refs = $(this).attr('data-cites').split(" ");
      var refHtml = refs.map(function(ref) {
        // Could use CSS.escape too here, we insure backward compatibility in navigator
        return "<p>" + $('div[id="ref-' + ref + '"]').html() + "</p>";
      }).join("\n");
      window.tippy(this, {
        allowHTML: true,
        content: refHtml,
        maxWidth: 500,
        interactive: true,
        interactiveBorder: 10,
        theme: 'light-border',
        placement: 'bottom-start'
      });
    });

    // fix footnotes in tables (#411)
    // replacing broken distill.pub feature
    $('table d-footnote').each(function() {
      // we replace internal showAtNode methode which is triggered when hovering a footnote
      this.hoverBox.showAtNode = function(node) {
        // ported from https://github.com/distillpub/template/pull/105/files
        calcOffset = function(elem) {
            let x = elem.offsetLeft;
            let y = elem.offsetTop;
            // Traverse upwards until an `absolute` element is found or `elem`
            // becomes null.
            while (elem = elem.offsetParent && elem.style.position != 'absolute') {
                x += elem.offsetLeft;
                y += elem.offsetTop;
            }

            return { left: x, top: y };
        }
        // https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/offsetTop
        const bbox = node.getBoundingClientRect();
        const offset = calcOffset(node);
        this.show([offset.left + bbox.width, offset.top + bbox.height]);
      }
    })

    // clear polling timer
    clearInterval(tid);

    // show body now that everything is ready
    on_load_complete();
  }

  var tid = setInterval(distill_post_process, 50);
  distill_post_process();

}

function init_downlevel() {

  init_common();

   // insert hr after d-title
  $('.d-title').after($('<hr class="section-separator"/>'));

  // check if we have authors
  var front_matter = JSON.parse($("#distill-front-matter").html());
  var have_authors = front_matter.authors && front_matter.authors.length > 0;

  // manage byline/border
  if (!have_authors)
    $('.d-byline').remove();
  $('.d-byline').after($('<hr class="section-separator"/>'));
  $('.d-byline a').remove();

  // remove toc
  $('.d-contents').remove();

  // move appendix elements
  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
  });


  // inject headers into references and footnotes
  var refs_header = $('<h3></h3>');
  refs_header.text('References');
  $('#refs').prepend(refs_header);

  var footnotes_header = $('<h3></h3');
  footnotes_header.text('Footnotes');
  $('.footnotes').children('hr').first().replaceWith(footnotes_header);

  // move appendix-bottom entries to the bottom
  $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
  $('.appendix-bottom').remove();

  // remove appendix if it's empty
  if ($('.d-appendix').children().length === 0)
    $('.d-appendix').remove();

  // prepend separator above appendix
  $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

  // trim code
  $('pre>code').each(function(i, val) {
    $(this).html($.trim($(this).html()));
  });

  // move posts-container right before article
  $('.posts-container').insertBefore($('.d-article'));

  $('body').addClass('downlevel');

  on_load_complete();
}


function init_common() {

  // jquery plugin to change element types
  (function($) {
    $.fn.changeElementType = function(newType) {
      var attrs = {};

      $.each(this[0].attributes, function(idx, attr) {
        attrs[attr.nodeName] = attr.nodeValue;
      });

      this.replaceWith(function() {
        return $("<" + newType + "/>", attrs).append($(this).contents());
      });
    };
  })(jQuery);

  // prevent underline for linked images
  $('a > img').parent().css({'border-bottom' : 'none'});

  // mark non-body figures created by knitr chunks as 100% width
  $('.layout-chunk').each(function(i, val) {
    var figures = $(this).find('img, .html-widget');
    // ignore leaflet img layers (#106)
    figures = figures.filter(':not(img[class*="leaflet"])')
    if ($(this).attr('data-layout') !== "l-body") {
      figures.css('width', '100%');
    } else {
      figures.css('max-width', '100%');
      figures.filter("[width]").each(function(i, val) {
        var fig = $(this);
        fig.css('width', fig.attr('width') + 'px');
      });

    }
  });

  // auto-append index.html to post-preview links in file: protocol
  // and in rstudio ide preview
  $('.post-preview').each(function(i, val) {
    if (window.location.protocol === "file:")
      $(this).attr('href', $(this).attr('href') + "index.html");
  });

  // get rid of index.html references in header
  if (window.location.protocol !== "file:") {
    $('.distill-site-header a[href]').each(function(i,val) {
      $(this).attr('href', $(this).attr('href').replace(/^index[.]html/, "./"));
    });
  }

  // add class to pandoc style tables
  $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
  $('.kable-table').children('table').addClass('pandoc-table');

  // add figcaption style to table captions
  $('caption').parent('table').addClass("figcaption");

  // initialize posts list
  if (window.init_posts_list)
    window.init_posts_list();

  // implmement disqus comment link
  $('.disqus-comment-count').click(function() {
    window.headroom_prevent_pin = true;
    $('#disqus_thread').toggleClass('hidden');
    if (!$('#disqus_thread').hasClass('hidden')) {
      var offset = $(this).offset();
      $(window).resize();
      $('html, body').animate({
        scrollTop: offset.top - 35
      });
    }
  });
}

document.addEventListener('DOMContentLoaded', function() {
  if (is_downlevel_browser())
    init_downlevel();
  else
    window.addEventListener('WebComponentsReady', init_distill);
});

</script>

<style type="text/css">
/* base variables */

/* Edit the CSS properties in this file to create a custom
   Distill theme. Only edit values in the right column
   for each row; values shown are the CSS defaults.
   To return any property to the default,
   you may set its value to: unset
   All rows must end with a semi-colon.                      */

/* Optional: embed custom fonts here with `@import`          */
/* This must remain at the top of this file.                 */



html {
  /*-- Main font sizes --*/
  --title-size:      50px;
  --body-size:       1.06rem;
  --code-size:       14px;
  --aside-size:      12px;
  --fig-cap-size:    13px;
  /*-- Main font colors --*/
  --title-color:     #000000;
  --header-color:    rgba(0, 0, 0, 0.8);
  --body-color:      rgba(0, 0, 0, 0.8);
  --aside-color:     rgba(0, 0, 0, 0.6);
  --fig-cap-color:   rgba(0, 0, 0, 0.6);
  /*-- Specify custom fonts ~~~ must be imported above   --*/
  --heading-font:    sans-serif;
  --mono-font:       monospace;
  --body-font:       sans-serif;
  --navbar-font:     sans-serif;  /* websites + blogs only */
}

/*-- ARTICLE METADATA --*/
d-byline {
  --heading-size:    0.6rem;
  --heading-color:   rgba(0, 0, 0, 0.5);
  --body-size:       0.8rem;
  --body-color:      rgba(0, 0, 0, 0.8);
}

/*-- ARTICLE TABLE OF CONTENTS --*/
.d-contents {
  --heading-size:    18px;
  --contents-size:   13px;
}

/*-- ARTICLE APPENDIX --*/
d-appendix {
  --heading-size:    15px;
  --heading-color:   rgba(0, 0, 0, 0.65);
  --text-size:       0.8em;
  --text-color:      rgba(0, 0, 0, 0.5);
}

/*-- WEBSITE HEADER + FOOTER --*/
/* These properties only apply to Distill sites and blogs  */

.distill-site-header {
  --title-size:       18px;
  --text-color:       rgba(255, 255, 255, 0.8);
  --text-size:        15px;
  --hover-color:      white;
  --bkgd-color:       #0F2E3D;
}

.distill-site-footer {
  --text-color:       rgba(255, 255, 255, 0.8);
  --text-size:        15px;
  --hover-color:      white;
  --bkgd-color:       #0F2E3D;
}

/*-- Additional custom styles --*/
/* Add any additional CSS rules below                      */
</style>
<style type="text/css">
/* base variables */

/* Edit the CSS properties in this file to create a custom
   Distill theme. Only edit values in the right column
   for each row; values shown are the CSS defaults.
   To return any property to the default,
   you may set its value to: unset
   All rows must end with a semi-colon.                      */

/* Optional: embed custom fonts here with `@import`          */
/* This must remain at the top of this file.                 */
@import url('https://fonts.googleapis.com/css2?family=Amiri');
@import url('https://fonts.googleapis.com/css2?family=Bitter');
@import url('https://fonts.googleapis.com/css2?family=DM+Mono');


html {
  /*-- Main font sizes --*/
  --title-size:      50px;
  --body-size:       1.06rem;
  --code-size:       14px;
  --aside-size:      12px;
  --fig-cap-size:    13px;
  /*-- Main font colors --*/
  --title-color:     #000000;
  --header-color:    rgba(0, 0, 0, 0.8);
  --body-color:      rgba(0, 0, 0, 0.8); 
  --aside-color:     rgba(0, 0, 0, 0.6);
  --fig-cap-color:   rgba(0, 0, 0, 0.6);
  --background-color: #ffff99;
  --bkgd-color: #ffff99;
  /*-- Specify custom fonts ~~~ must be imported above   --*/
  --heading-font:    sans-serif;
  --mono-font:       "DM Mono", monospace;
  --body-font:       "Bitter", sans-serif;
  --navbar-font:     "Amiri", serif;
}

body {
  background-color: #ffff99;
  bkgd-color: #ffff99;
}

p {
  background-color: #ffff99;
  bkgd-color: #ffff99;
}


/*-- ARTICLE METADATA --*/
d-byline {
  --heading-size:    0.6rem;
  --heading-color:   rgba(0, 0, 0, 0.5);
  --body-size:       0.8rem;
  --body-color:      rgba(0, 0, 0, 0.8);
}

/*-- ARTICLE TABLE OF CONTENTS --*/
.d-contents {
  --heading-size:    18px;
  --contents-size:   13px;
}

/*-- ARTICLE APPENDIX --*/
d-appendix {
  --heading-size:    15px;
  --heading-color:   rgba(0, 0, 0, 0.65);
  --text-size:       0.8em;
  --text-color:      rgba(0, 0, 0, 0.5);
}

/*-- WEBSITE HEADER + FOOTER --*/
/* These properties only apply to Distill sites and blogs  */

.distill-site-header {
  --title-size:       18px;
  --text-color:       rgba(255, 255, 255, 0.8);
  --text-size:        15px;
  --hover-color:      white;
  --bkgd-color:       #0F2E3D;
}

.distill-site-footer {
  --text-color:       rgba(255, 255, 255, 0.8);
  --text-size:        15px;
  --hover-color:      white;
  --bkgd-color:       #0F2E3D;
}

/*-- Additional custom styles --*/
/* Add any additional CSS rules below                      */
.d-article{
  background-color: #ffff99;
}</style>
<style type="text/css">
/* base style */

/* FONT FAMILIES */

:root {
  --heading-default: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  --mono-default: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  --body-default: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
}

body,
.posts-list .post-preview p,
.posts-list .description p {
  font-family: var(--body-font), var(--body-default);
}

h1, h2, h3, h4, h5, h6,
.posts-list .post-preview h2,
.posts-list .description h2 {
  font-family: var(--heading-font), var(--heading-default);
}

d-article div.sourceCode code,
d-article pre code {
  font-family: var(--mono-font), var(--mono-default);
}


/*-- TITLE --*/
d-title h1,
.posts-list > h1 {
  color: var(--title-color, black);
}

d-title h1 {
  font-size: var(--title-size, 50px);
}

/*-- HEADERS --*/
d-article h1,
d-article h2,
d-article h3,
d-article h4,
d-article h5,
d-article h6 {
  color: var(--header-color, rgba(0, 0, 0, 0.8));
}

/*-- BODY --*/
d-article > p,  /* only text inside of <p> tags */
d-article > ul, /* lists */
d-article > ol {
  color: var(--body-color, rgba(0, 0, 0, 0.8));
  font-size: var(--body-size, 1.06rem);
}


/*-- CODE --*/
d-article div.sourceCode code,
d-article pre code {
  font-size: var(--code-size, 14px);
}

/*-- ASIDE --*/
d-article aside {
  font-size: var(--aside-size, 12px);
  color: var(--aside-color, rgba(0, 0, 0, 0.6));
}

/*-- FIGURE CAPTIONS --*/
figure .caption,
figure figcaption,
.figure .caption {
  font-size: var(--fig-cap-size, 13px);
  color: var(--fig-cap-color, rgba(0, 0, 0, 0.6));
}

/*-- METADATA --*/
d-byline h3 {
  font-size: var(--heading-size, 0.6rem);
  color: var(--heading-color, rgba(0, 0, 0, 0.5));
}

d-byline {
  font-size: var(--body-size, 0.8rem);
  color: var(--body-color, rgba(0, 0, 0, 0.8));
}

d-byline a,
d-article d-byline a {
  color: var(--body-color, rgba(0, 0, 0, 0.8));
}

/*-- TABLE OF CONTENTS --*/
.d-contents nav h3 {
  font-size: var(--heading-size, 18px);
}

.d-contents nav a {
  font-size: var(--contents-size, 13px);
}

/*-- APPENDIX --*/
d-appendix h3 {
  font-size: var(--heading-size, 15px);
  color: var(--heading-color, rgba(0, 0, 0, 0.65));
}

d-appendix {
  font-size: var(--text-size, 0.8em);
  color: var(--text-color, rgba(0, 0, 0, 0.5));
}

d-appendix d-footnote-list a.footnote-backlink {
  color: var(--text-color, rgba(0, 0, 0, 0.5));
}

/*-- WEBSITE HEADER + FOOTER --*/
.distill-site-header .title {
  font-size: var(--title-size, 18px);
  font-family: var(--navbar-font), var(--heading-default);
}

.distill-site-header a,
.nav-dropdown .nav-dropbtn {
  font-family: var(--navbar-font), var(--heading-default);
}

.nav-dropdown .nav-dropbtn {
  color: var(--text-color, rgba(255, 255, 255, 0.8));
  font-size: var(--text-size, 15px);
}

.distill-site-header a:hover,
.nav-dropdown:hover .nav-dropbtn {
  color: var(--hover-color, white);
}

.distill-site-header {
  font-size: var(--text-size, 15px);
  color: var(--text-color, rgba(255, 255, 255, 0.8));
  background-color: var(--bkgd-color, #0F2E3D);
}

.distill-site-footer {
  font-size: var(--text-size, 15px);
  color: var(--text-color, rgba(255, 255, 255, 0.8));
  background-color: var(--bkgd-color, #0F2E3D);
}

.distill-site-footer a:hover {
  color: var(--hover-color, white);
}</style>
<!--/radix_placeholder_distill-->
  <script src="../../site_libs/header-attrs-2.25/header-attrs.js"></script>
  <link href="../../site_libs/tabwid-1.1.3/tabwid.css" rel="stylesheet" />
  <script src="../../site_libs/tabwid-1.1.3/tabwid.js"></script>
  <script src="../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
  <script src="../../site_libs/popper-2.6.0/popper.min.js"></script>
  <link href="../../site_libs/tippy-6.2.7/tippy.css" rel="stylesheet" />
  <link href="../../site_libs/tippy-6.2.7/tippy-light-border.css" rel="stylesheet" />
  <script src="../../site_libs/tippy-6.2.7/tippy.umd.min.js"></script>
  <script src="../../site_libs/anchor-4.2.2/anchor.min.js"></script>
  <script src="../../site_libs/bowser-1.9.3/bowser.min.js"></script>
  <script src="../../site_libs/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="../../site_libs/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
<script>
   document.addEventListener("DOMContentLoaded", function () {
     if (!/posts/.test(location.pathname)) {
       return;
     }

     var script = document.createElement("script");
     script.src = "https://giscus.app/client.js";
     script.setAttribute("data-repo", "cpsyctc/Rblog");
     script.setAttribute("data-repo-id", "MDEwOlJlcG9zaXRvcnkzMzM1Mzg4OTA=");
     script.setAttribute("data-category", "General");
     script.setAttribute("data-category-id", "DIC_kwDOE-FmSs4CYdgN");
     script.setAttribute("data-mapping", "pathname");
     script.setAttribute("data-reactions-enabled", "0");
     script.setAttribute("data-emit-metadata", "0");
     script.setAttribute("data-theme", "light");
     script.setAttribute("data-lang", "en");

     /* wait for article to load, append script to article element */
     var observer = new MutationObserver(function (mutations, observer) {
       var article = document.querySelector("d-article");
       if (article) {
         observer.disconnect();
         /* HACK: article scroll */
         article.setAttribute("style", "overflow-y: hidden");
         article.appendChild(script);
       }
     });

     observer.observe(document.body, { childList: true });
   });
 </script>
<script type="text/javascript" src="https://www.cookieconsent.com/releases/3.1.0/cookie-consent.js"></script>
<script type="text/javascript">
document.addEventListener('DOMContentLoaded', function () {
cookieconsent.run({
'notice_banner_type':'simple',
'consent_type': 'express',
'palette': 'light',
'language': 'en',
'website_name': 'test2',
'cookies_policy_url': 'url',
'change_preferences_selector':'#CookiePreferences'
});});</script>
<script type="text/plain" cookie-consent="tracking" async src="https://www.googletagmanager.com/gtag/js?id=G-8J44BR18S7"></script>
<script type="text/plain" cookie-consent="tracking">
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-8J44BR18S7');
</script>
<!--/radix_placeholder_site_in_header-->


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"CSC by gender and age","description":"CSC matching lookup with lookupCSCgenderAndAge()","authors":[{"author":"Chris Evans","authorURL":"https://www.psyctc.org/R_blog/","affiliation":"PSYCTC.org","affiliationURL":"https://www.psyctc.org/psyctc/","orcidID":"0000-0002-4197-4202"}],"publishedDate":"2024-01-21T00:00:00.000+01:00","citationText":"Evans, 2024"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<header class="header header--fixed" role="banner">
<nav class="distill-site-nav distill-site-header">
<div class="nav-left">
<a class="logo" href="https://www.psyctc.org/Rblog/">
<img src="../../Rblog_logo.png" alt="Logo"/>
</a>
<a href="../../index.html" class="title">Chris (Evans) R SAFAQ</a>
<input id="distill-search" class="nav-search hidden" type="text" placeholder="Search..."/>
</div>
<div class="nav-right">
<a href="../../index.html">Home</a>
<a href="../../Welcome.html">Welcome</a>
<a href="../../about.html">About</a>
<a href="../../Copyright_and_permissions.html">Copyright/permissions</a>
<a href="javascript:void(0);" class="nav-toggle">&#9776;</a>
</div>
</nav>
</header>
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>CSC by gender and age</h1>

<!--radix_placeholder_categories-->
<div class="dt-tags">
  <a href="../../index.html#category:RCSC_paradigm" class="dt-tag">RCSC paradigm</a>
  <a href="../../index.html#category:CECPfuns_package" class="dt-tag">CECPfuns package</a>
</div>
<!--/radix_placeholder_categories-->
<p><p>CSC matching lookup with lookupCSCgenderAndAge()</p></p>
</div>

<div class="d-byline">
  Chris Evans <a href="https://www.psyctc.org/R_blog/" class="uri">https://www.psyctc.org/R_blog/</a> (PSYCTC.org)<a href="https://www.psyctc.org/psyctc/" class="uri">https://www.psyctc.org/psyctc/</a>
  
<br/>2024-01-21
</div>

<div class="d-article">
<h1 id="introduction">Introduction</h1>
<p>Empirical data suggests that for some measures, particularly those used in adolescence, the cutting points between help-seeking and non-help-seeking scores need to be different for different ages and genders. I have created this function <code>lookupCSCgenderAndAge()</code> to go into the package CECPfuns to make it easy(ish) for people to take a dataset which includes age and gender variables and return the dataset with the correct cutting point for each row created by looking up the age and gender in a lookup table.</p>
<p>I’ve written the function with the <a href="https://www.coresystemtrust.org.uk/home/instruments/yp-core-information/">YP-CORE</a> in mind and presuming that the cut off point is a CSC (Clinical Change Criterion) so the function currently has an internal lookup table with referential CSCs for the YP-CORE in the UK and Ireland, or for Italy. However, the function could be used for any measure and any cutting point and it is written to be able to read any table containing age, gender and cutting point variables.</p>
<h1 id="example">Example</h1>
<p>Here’s a lookup table based on Dr. Emily Blackshaw’s PhD data. I’m using the item mean scoring there.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://tibble.tidyverse.org/reference/tribble.html'>tribble</a></span><span class='op'>(</span><span class='op'>~</span><span class='va'>Ref</span>, <span class='op'>~</span><span class='va'>Age</span>,  <span class='op'>~</span><span class='va'>Gender</span>,  <span class='op'>~</span><span class='va'>CSC</span>,</span>
<span><span class='st'>"Emily_PhD"</span>, <span class='fl'>11</span>, <span class='st'>"M"</span>, <span class='fl'>1.0</span>,</span>
<span><span class='st'>"Emily_PhD"</span>, <span class='fl'>12</span>, <span class='st'>"M"</span>, <span class='fl'>1.0</span>,</span>
<span><span class='st'>"Emily_PhD"</span>, <span class='fl'>13</span>, <span class='st'>"M"</span>, <span class='fl'>1.0</span>,</span>
<span><span class='st'>"Emily_PhD"</span>, <span class='fl'>14</span>, <span class='st'>"M"</span>, <span class='fl'>1.3</span>,</span>
<span><span class='st'>"Emily_PhD"</span>, <span class='fl'>15</span>, <span class='st'>"M"</span>, <span class='fl'>1.4</span>,</span>
<span><span class='st'>"Emily_PhD"</span>, <span class='fl'>16</span>, <span class='st'>"M"</span>, <span class='fl'>1.5</span>,</span>
<span><span class='st'>"Emily_PhD"</span>, <span class='fl'>11</span>, <span class='st'>"F"</span>, <span class='fl'>1.1</span>,</span>
<span><span class='st'>"Emily_PhD"</span>, <span class='fl'>12</span>, <span class='st'>"F"</span>, <span class='fl'>1.5</span>,</span>
<span><span class='st'>"Emily_PhD"</span>, <span class='fl'>13</span>, <span class='st'>"F"</span>, <span class='fl'>1.4</span>,</span>
<span><span class='st'>"Emily_PhD"</span>, <span class='fl'>14</span>, <span class='st'>"F"</span>, <span class='fl'>1.6</span>,</span>
<span><span class='st'>"Emily_PhD"</span>, <span class='fl'>15</span>, <span class='st'>"F"</span>, <span class='fl'>1.6</span>,</span>
<span><span class='st'>"Emily_PhD"</span>, <span class='fl'>16</span>, <span class='st'>"F"</span>, <span class='fl'>1.5</span>,</span>
<span><span class='st'>"Twigg_et_al_2016"</span>, <span class='fl'>11</span>, <span class='st'>"M"</span>, <span class='fl'>1.03</span>,</span>
<span><span class='st'>"Twigg_et_al_2016"</span>, <span class='fl'>12</span>, <span class='st'>"M"</span>, <span class='fl'>1.03</span>,</span>
<span><span class='st'>"Twigg_et_al_2016"</span>, <span class='fl'>13</span>, <span class='st'>"M"</span>, <span class='fl'>1.03</span>,</span>
<span><span class='st'>"Twigg_et_al_2016"</span>, <span class='fl'>14</span>, <span class='st'>"M"</span>, <span class='fl'>1.41</span>,</span>
<span><span class='st'>"Twigg_et_al_2016"</span>, <span class='fl'>15</span>, <span class='st'>"M"</span>, <span class='fl'>1.41</span>,</span>
<span><span class='st'>"Twigg_et_al_2016"</span>, <span class='fl'>16</span>, <span class='st'>"M"</span>, <span class='fl'>1.41</span>,</span>
<span><span class='st'>"Twigg_et_al_2016"</span>, <span class='fl'>11</span>, <span class='st'>"F"</span>, <span class='fl'>1.44</span>,</span>
<span><span class='st'>"Twigg_et_al_2016"</span>, <span class='fl'>12</span>, <span class='st'>"F"</span>, <span class='fl'>1.44</span>,</span>
<span><span class='st'>"Twigg_et_al_2016"</span>, <span class='fl'>13</span>, <span class='st'>"F"</span>, <span class='fl'>1.44</span>,</span>
<span><span class='st'>"Twigg_et_al_2016"</span>, <span class='fl'>14</span>, <span class='st'>"F"</span>, <span class='fl'>1.59</span>,</span>
<span><span class='st'>"Twigg_et_al_2016"</span>, <span class='fl'>15</span>, <span class='st'>"F"</span>, <span class='fl'>1.59</span>,</span>
<span><span class='st'>"Twigg_et_al_2016"</span>, <span class='fl'>16</span>, <span class='st'>"F"</span>, <span class='fl'>1.59</span>,</span>
<span><span class='st'>"Di_Biase_et_al_2021"</span>, <span class='fl'>11</span>, <span class='st'>"F"</span>, <span class='fl'>1.34</span>,</span>
<span><span class='st'>"Di_Biase_et_al_2021"</span>, <span class='fl'>12</span>, <span class='st'>"F"</span>, <span class='fl'>1.34</span>,</span>
<span><span class='st'>"Di_Biase_et_al_2021"</span>, <span class='fl'>13</span>, <span class='st'>"F"</span>, <span class='fl'>1.34</span>,</span>
<span><span class='st'>"Di_Biase_et_al_2021"</span>, <span class='fl'>14</span>, <span class='st'>"F"</span>, <span class='fl'>1.34</span>,</span>
<span><span class='st'>"Di_Biase_et_al_2021"</span>, <span class='fl'>15</span>, <span class='st'>"F"</span>, <span class='fl'>1.47</span>,</span>
<span><span class='st'>"Di_Biase_et_al_2021"</span>, <span class='fl'>16</span>, <span class='st'>"F"</span>, <span class='fl'>1.47</span>,</span>
<span><span class='st'>"Di_Biase_et_al_2021"</span>, <span class='fl'>17</span>, <span class='st'>"F"</span>, <span class='fl'>1.47</span>,</span>
<span><span class='st'>"Di_Biase_et_al_2021"</span>, <span class='fl'>11</span>, <span class='st'>"M"</span>, <span class='fl'>1.18</span>,</span>
<span><span class='st'>"Di_Biase_et_al_2021"</span>, <span class='fl'>12</span>, <span class='st'>"M"</span>, <span class='fl'>1.18</span>,</span>
<span><span class='st'>"Di_Biase_et_al_2021"</span>, <span class='fl'>13</span>, <span class='st'>"M"</span>, <span class='fl'>1.18</span>,</span>
<span><span class='st'>"Di_Biase_et_al_2021"</span>, <span class='fl'>14</span>, <span class='st'>"M"</span>, <span class='fl'>1.18</span>,</span>
<span><span class='st'>"Di_Biase_et_al_2021"</span>, <span class='fl'>15</span>, <span class='st'>"M"</span>, <span class='fl'>1.23</span>,</span>
<span><span class='st'>"Di_Biase_et_al_2021"</span>, <span class='fl'>16</span>, <span class='st'>"M"</span>, <span class='fl'>1.18</span>,</span>
<span><span class='st'>"Di_Biase_et_al_2021"</span>, <span class='fl'>17</span>, <span class='st'>"M"</span>, <span class='fl'>1.18</span><span class='op'>)</span> <span class='op'>-&gt;</span> <span class='va'>tibCSClookup</span></span>
<span></span>
<span><span class='va'>tibCSClookup</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>Ref</span> <span class='op'>==</span> <span class='st'>"Emily_PhD"</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://davidgohel.github.io/flextable/reference/flextable.html'>flextable</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://davidgohel.github.io/flextable/reference/colformat_double.html'>colformat_double</a></span><span class='op'>(</span>digits <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span></span></code></pre>
</div>
</details>
<div class="tabwid"><style>.cl-5bbbe62a{}.cl-5bb6505c{font-family:'DejaVu Sans';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-5bb8b3ba{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-5bb8b3c4{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-5bb8c328{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5bb8c329{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5bb8c32a{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5bb8c32b{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5bb8c332{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5bb8c333{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing='true' class='cl-5bbbe62a'><thead><tr style="overflow-wrap:break-word;"><th class="cl-5bb8c328"><p class="cl-5bb8b3ba"><span class="cl-5bb6505c">Ref</span></p></th><th class="cl-5bb8c329"><p class="cl-5bb8b3c4"><span class="cl-5bb6505c">Age</span></p></th><th class="cl-5bb8c328"><p class="cl-5bb8b3ba"><span class="cl-5bb6505c">Gender</span></p></th><th class="cl-5bb8c329"><p class="cl-5bb8b3c4"><span class="cl-5bb6505c">CSC</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-5bb8c32a"><p class="cl-5bb8b3ba"><span class="cl-5bb6505c">Emily_PhD</span></p></td><td class="cl-5bb8c32b"><p class="cl-5bb8b3c4"><span class="cl-5bb6505c">11.0</span></p></td><td class="cl-5bb8c32a"><p class="cl-5bb8b3ba"><span class="cl-5bb6505c">M</span></p></td><td class="cl-5bb8c32b"><p class="cl-5bb8b3c4"><span class="cl-5bb6505c">1.0</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5bb8c32a"><p class="cl-5bb8b3ba"><span class="cl-5bb6505c">Emily_PhD</span></p></td><td class="cl-5bb8c32b"><p class="cl-5bb8b3c4"><span class="cl-5bb6505c">12.0</span></p></td><td class="cl-5bb8c32a"><p class="cl-5bb8b3ba"><span class="cl-5bb6505c">M</span></p></td><td class="cl-5bb8c32b"><p class="cl-5bb8b3c4"><span class="cl-5bb6505c">1.0</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5bb8c32a"><p class="cl-5bb8b3ba"><span class="cl-5bb6505c">Emily_PhD</span></p></td><td class="cl-5bb8c32b"><p class="cl-5bb8b3c4"><span class="cl-5bb6505c">13.0</span></p></td><td class="cl-5bb8c32a"><p class="cl-5bb8b3ba"><span class="cl-5bb6505c">M</span></p></td><td class="cl-5bb8c32b"><p class="cl-5bb8b3c4"><span class="cl-5bb6505c">1.0</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5bb8c32a"><p class="cl-5bb8b3ba"><span class="cl-5bb6505c">Emily_PhD</span></p></td><td class="cl-5bb8c32b"><p class="cl-5bb8b3c4"><span class="cl-5bb6505c">14.0</span></p></td><td class="cl-5bb8c32a"><p class="cl-5bb8b3ba"><span class="cl-5bb6505c">M</span></p></td><td class="cl-5bb8c32b"><p class="cl-5bb8b3c4"><span class="cl-5bb6505c">1.3</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5bb8c32a"><p class="cl-5bb8b3ba"><span class="cl-5bb6505c">Emily_PhD</span></p></td><td class="cl-5bb8c32b"><p class="cl-5bb8b3c4"><span class="cl-5bb6505c">15.0</span></p></td><td class="cl-5bb8c32a"><p class="cl-5bb8b3ba"><span class="cl-5bb6505c">M</span></p></td><td class="cl-5bb8c32b"><p class="cl-5bb8b3c4"><span class="cl-5bb6505c">1.4</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5bb8c32a"><p class="cl-5bb8b3ba"><span class="cl-5bb6505c">Emily_PhD</span></p></td><td class="cl-5bb8c32b"><p class="cl-5bb8b3c4"><span class="cl-5bb6505c">16.0</span></p></td><td class="cl-5bb8c32a"><p class="cl-5bb8b3ba"><span class="cl-5bb6505c">M</span></p></td><td class="cl-5bb8c32b"><p class="cl-5bb8b3c4"><span class="cl-5bb6505c">1.5</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5bb8c32a"><p class="cl-5bb8b3ba"><span class="cl-5bb6505c">Emily_PhD</span></p></td><td class="cl-5bb8c32b"><p class="cl-5bb8b3c4"><span class="cl-5bb6505c">11.0</span></p></td><td class="cl-5bb8c32a"><p class="cl-5bb8b3ba"><span class="cl-5bb6505c">F</span></p></td><td class="cl-5bb8c32b"><p class="cl-5bb8b3c4"><span class="cl-5bb6505c">1.1</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5bb8c32a"><p class="cl-5bb8b3ba"><span class="cl-5bb6505c">Emily_PhD</span></p></td><td class="cl-5bb8c32b"><p class="cl-5bb8b3c4"><span class="cl-5bb6505c">12.0</span></p></td><td class="cl-5bb8c32a"><p class="cl-5bb8b3ba"><span class="cl-5bb6505c">F</span></p></td><td class="cl-5bb8c32b"><p class="cl-5bb8b3c4"><span class="cl-5bb6505c">1.5</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5bb8c32a"><p class="cl-5bb8b3ba"><span class="cl-5bb6505c">Emily_PhD</span></p></td><td class="cl-5bb8c32b"><p class="cl-5bb8b3c4"><span class="cl-5bb6505c">13.0</span></p></td><td class="cl-5bb8c32a"><p class="cl-5bb8b3ba"><span class="cl-5bb6505c">F</span></p></td><td class="cl-5bb8c32b"><p class="cl-5bb8b3c4"><span class="cl-5bb6505c">1.4</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5bb8c32a"><p class="cl-5bb8b3ba"><span class="cl-5bb6505c">Emily_PhD</span></p></td><td class="cl-5bb8c32b"><p class="cl-5bb8b3c4"><span class="cl-5bb6505c">14.0</span></p></td><td class="cl-5bb8c32a"><p class="cl-5bb8b3ba"><span class="cl-5bb6505c">F</span></p></td><td class="cl-5bb8c32b"><p class="cl-5bb8b3c4"><span class="cl-5bb6505c">1.6</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5bb8c32a"><p class="cl-5bb8b3ba"><span class="cl-5bb6505c">Emily_PhD</span></p></td><td class="cl-5bb8c32b"><p class="cl-5bb8b3c4"><span class="cl-5bb6505c">15.0</span></p></td><td class="cl-5bb8c32a"><p class="cl-5bb8b3ba"><span class="cl-5bb6505c">F</span></p></td><td class="cl-5bb8c32b"><p class="cl-5bb8b3c4"><span class="cl-5bb6505c">1.6</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5bb8c332"><p class="cl-5bb8b3ba"><span class="cl-5bb6505c">Emily_PhD</span></p></td><td class="cl-5bb8c333"><p class="cl-5bb8b3c4"><span class="cl-5bb6505c">16.0</span></p></td><td class="cl-5bb8c332"><p class="cl-5bb8b3ba"><span class="cl-5bb6505c">F</span></p></td><td class="cl-5bb8c333"><p class="cl-5bb8b3c4"><span class="cl-5bb6505c">1.5</span></p></td></tr></tbody></table></div>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='kw'>if</span> <span class='op'>(</span><span class='op'>!</span><span class='fu'><a href='https://rdrr.io/r/base/interactive.html'>interactive</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>{</span></span>
<span>  <span class='fu'><a href='https://rdrr.io/r/base/load.html'>load</a></span><span class='op'>(</span>file <span class='op'>=</span> <span class='st'>"exampleData"</span><span class='op'>)</span></span>
<span><span class='op'>}</span> <span class='kw'>else</span> <span class='op'>{</span></span>
<span>  <span class='fu'><a href='https://rdrr.io/r/base/load.html'>load</a></span><span class='op'>(</span>file <span class='op'>=</span> <span class='st'>"./_posts/2024-01-21-lookupcsc2/exampleData"</span><span class='op'>)</span></span>
<span><span class='op'>}</span></span></code></pre>
</div>
</details>
</div>
<p>To explore the function I am using a very, very anonymised and restricted dataset of
239 rows. Scores shown here.</p>
<div class="layout-chunk" data-layout="l-body-outset">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>vecColoursDatasetDataset2</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"HS"</span> <span class='op'>=</span> <span class='st'>"darkviolet"</span>, <span class='st'>"Non-HS"</span> <span class='op'>=</span> <span class='st'>"aquamarine3"</span><span class='op'>)</span></span>
<span><span class='va'>vecColoursDataset</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Help-seeking"</span> <span class='op'>=</span> <span class='st'>"darkviolet"</span>, <span class='st'>"Non-help-seeking"</span> <span class='op'>=</span> <span class='st'>"aquamarine3"</span><span class='op'>)</span></span>
<span><span class='va'>vecColoursGender2</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"F"</span> <span class='op'>=</span> <span class='st'>"darkgreen"</span>, <span class='st'>"M"</span> <span class='op'>=</span> <span class='st'>"brown4"</span><span class='op'>)</span></span>
<span><span class='va'>vecColoursCSClevel</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"High"</span> <span class='op'>=</span> <span class='st'>"red"</span>, <span class='st'>"Low"</span> <span class='op'>=</span> <span class='st'>"darkgrey"</span><span class='op'>)</span></span>
<span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>tibData</span>,</span>
<span>       <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>Age</span>, y <span class='op'>=</span> <span class='va'>YPscore</span>, colour <span class='op'>=</span> <span class='va'>Gender</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/facet_grid.html'>facet_grid</a></span><span class='op'>(</span>rows <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/vars.html'>vars</a></span><span class='op'>(</span><span class='va'>Gender</span><span class='op'>)</span>, cols <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/vars.html'>vars</a></span><span class='op'>(</span><span class='va'>Dataset2</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span>size <span class='op'>=</span> <span class='fl'>5</span>,</span>
<span>             alpha <span class='op'>=</span> <span class='fl'>.6</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_manual.html'>scale_color_manual</a></span><span class='op'>(</span><span class='st'>"Dataset"</span>,</span>
<span>                     values <span class='op'>=</span> <span class='va'>vecColoursGender2</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>ggtitle</a></span><span class='op'>(</span><span class='st'>"Facetted plot of YP-CORE scores against age, by gender and dataset"</span><span class='op'>)</span></span></code></pre>
</div>
</details>
<p><img src="lookupcsc2_files/figure-html5/showData-1.png" width="1536" /></p>
</div>
<p>The next table shows a subset of that full dataset that is returned if I point the the <code>lookupCSCgenderAndAge()</code> function at those data and use the default internal lookup. Hit the “Show code” button to see the arguments in the call to the function. I’ve annotated them to explain them.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'>### use the function to generate data (which I have put into tmpTib) containing the CSC values mapped from the lookup table</span></span>
<span><span class='fu'><a href='https://rdrr.io/pkg/CECPfuns/man/lookupCSCgenderAndAge.html'>lookupCSCgenderAndAge</a></span><span class='op'>(</span>useInternalLookup <span class='op'>=</span> <span class='cn'>TRUE</span>, <span class='co'># so using the internal lookup data (could have omitted this, it's the default)</span></span>
<span>                      lookupTableName <span class='op'>=</span> <span class='cn'>NULL</span>, <span class='co'># so no need to give an external lookup table name (could have omitted this, it's the default)</span></span>
<span>                      lookupGenderVarChar <span class='op'>=</span> <span class='st'>"Gender"</span>, <span class='co'># name of the gender variable in the lookup table (could have omitted this, it's the default)</span></span>
<span>                      lookupAgeVarChar <span class='op'>=</span> <span class='st'>"Age"</span>, <span class='co'># name of the age variable ditto (again could have omitted this, it's the default)</span></span>
<span>                      lookupGenderF <span class='op'>=</span> <span class='st'>"F"</span>, <span class='co'># code for female gender in the lookup table (could have omitted this, it's the default)</span></span>
<span>                      lookupGenderM <span class='op'>=</span> <span class='st'>"M"</span>, <span class='co'># code for male gender ditto</span></span>
<span>                      lookupGenderO <span class='op'>=</span> <span class='st'>"O"</span>, <span class='co'># code for other gender ditto (lookup table currently has no CSCs for other gender)</span></span>
<span>                      <span class='co'>### now the arguments about the data to code</span></span>
<span>                      dataTableName <span class='op'>=</span> <span class='va'>tibData</span>, <span class='co'># crucial name of the data to classify, this and the following </span></span>
<span>                      dataGenderVarChar <span class='op'>=</span> <span class='st'>"Gender"</span>, <span class='co'># name of the gender variable in those data (could have omitted this, it's the default)</span></span>
<span>                      dataAgeVarChar <span class='op'>=</span> <span class='st'>"Age"</span>, <span class='co'># you can work out this and the following</span></span>
<span>                      dataGenderF <span class='op'>=</span> <span class='st'>"F"</span>,</span>
<span>                      dataGenderM <span class='op'>=</span> <span class='st'>"M"</span>,</span>
<span>                      dataGenderO <span class='op'>=</span> <span class='st'>"O"</span>,</span>
<span>                      <span class='co'>### no missing values in lookup tables (would be meaningless), but you may have missing values in your data</span></span>
<span>                      dataGenderNA <span class='op'>=</span> <span class='cn'>NA_character_</span><span class='op'>)</span> <span class='op'>-&gt;</span> <span class='va'>tibBlackshaw</span> <span class='co'># so that call returns the raw data but now with the CSC values</span></span></code></pre>
</div>
</details>
<pre><code>These referential data had CSC values for age by year from 11 to 16 years old</code></pre>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>tibBlackshaw</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>Gender</span>, <span class='va'>Age</span>, <span class='va'>CSC</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>Dataset2</span> <span class='op'>==</span> <span class='st'>"HS"</span> <span class='op'>&amp;</span> <span class='va'>ID</span> <span class='op'>==</span> <span class='fl'>1</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>ungroup</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>ID</span>, <span class='va'>Gender</span> <span class='op'>:</span> <span class='va'>YPscore</span>, <span class='va'>Ref</span>, <span class='va'>CSC</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://davidgohel.github.io/flextable/reference/flextable.html'>flextable</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://davidgohel.github.io/flextable/reference/autofit.html'>autofit</a></span><span class='op'>(</span><span class='op'>)</span></span></code></pre>
</div>
</details>
<div class="tabwid"><style>.cl-5d8b2c7c{}.cl-5d8540f0{font-family:'DejaVu Sans';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-5d883e7c{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-5d883e86{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-5d884d0e{width:0.448in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5d884d0f{width:0.848in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5d884d18{width:0.581in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5d884d19{width:0.885in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5d884d22{width:1.089in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5d884d23{width:0.596in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5d884d24{width:0.448in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5d884d2c{width:0.848in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5d884d2d{width:0.581in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5d884d2e{width:0.885in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5d884d2f{width:1.089in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5d884d36{width:0.596in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5d884d37{width:0.448in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5d884d38{width:0.848in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5d884d40{width:0.581in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5d884d41{width:0.885in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5d884d42{width:1.089in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5d884d4a{width:0.596in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing='true' class='cl-5d8b2c7c'><thead><tr style="overflow-wrap:break-word;"><th class="cl-5d884d0e"><p class="cl-5d883e7c"><span class="cl-5d8540f0">ID</span></p></th><th class="cl-5d884d0f"><p class="cl-5d883e86"><span class="cl-5d8540f0">Gender</span></p></th><th class="cl-5d884d18"><p class="cl-5d883e7c"><span class="cl-5d8540f0">Age</span></p></th><th class="cl-5d884d19"><p class="cl-5d883e7c"><span class="cl-5d8540f0">YPscore</span></p></th><th class="cl-5d884d22"><p class="cl-5d883e86"><span class="cl-5d8540f0">Ref</span></p></th><th class="cl-5d884d23"><p class="cl-5d883e7c"><span class="cl-5d8540f0">CSC</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-5d884d24"><p class="cl-5d883e7c"><span class="cl-5d8540f0">1</span></p></td><td class="cl-5d884d2c"><p class="cl-5d883e86"><span class="cl-5d8540f0">M</span></p></td><td class="cl-5d884d2d"><p class="cl-5d883e7c"><span class="cl-5d8540f0">11</span></p></td><td class="cl-5d884d2e"><p class="cl-5d883e7c"><span class="cl-5d8540f0">1.1</span></p></td><td class="cl-5d884d2f"><p class="cl-5d883e86"><span class="cl-5d8540f0">Emily_PhD</span></p></td><td class="cl-5d884d36"><p class="cl-5d883e7c"><span class="cl-5d8540f0">1.0</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5d884d24"><p class="cl-5d883e7c"><span class="cl-5d8540f0">1</span></p></td><td class="cl-5d884d2c"><p class="cl-5d883e86"><span class="cl-5d8540f0">M</span></p></td><td class="cl-5d884d2d"><p class="cl-5d883e7c"><span class="cl-5d8540f0">12</span></p></td><td class="cl-5d884d2e"><p class="cl-5d883e7c"><span class="cl-5d8540f0">2.6</span></p></td><td class="cl-5d884d2f"><p class="cl-5d883e86"><span class="cl-5d8540f0">Emily_PhD</span></p></td><td class="cl-5d884d36"><p class="cl-5d883e7c"><span class="cl-5d8540f0">1.0</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5d884d24"><p class="cl-5d883e7c"><span class="cl-5d8540f0">1</span></p></td><td class="cl-5d884d2c"><p class="cl-5d883e86"><span class="cl-5d8540f0">M</span></p></td><td class="cl-5d884d2d"><p class="cl-5d883e7c"><span class="cl-5d8540f0">13</span></p></td><td class="cl-5d884d2e"><p class="cl-5d883e7c"><span class="cl-5d8540f0">2.2</span></p></td><td class="cl-5d884d2f"><p class="cl-5d883e86"><span class="cl-5d8540f0">Emily_PhD</span></p></td><td class="cl-5d884d36"><p class="cl-5d883e7c"><span class="cl-5d8540f0">1.0</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5d884d24"><p class="cl-5d883e7c"><span class="cl-5d8540f0">1</span></p></td><td class="cl-5d884d2c"><p class="cl-5d883e86"><span class="cl-5d8540f0">M</span></p></td><td class="cl-5d884d2d"><p class="cl-5d883e7c"><span class="cl-5d8540f0">14</span></p></td><td class="cl-5d884d2e"><p class="cl-5d883e7c"><span class="cl-5d8540f0">1.4</span></p></td><td class="cl-5d884d2f"><p class="cl-5d883e86"><span class="cl-5d8540f0">Emily_PhD</span></p></td><td class="cl-5d884d36"><p class="cl-5d883e7c"><span class="cl-5d8540f0">1.3</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5d884d24"><p class="cl-5d883e7c"><span class="cl-5d8540f0">1</span></p></td><td class="cl-5d884d2c"><p class="cl-5d883e86"><span class="cl-5d8540f0">M</span></p></td><td class="cl-5d884d2d"><p class="cl-5d883e7c"><span class="cl-5d8540f0">15</span></p></td><td class="cl-5d884d2e"><p class="cl-5d883e7c"><span class="cl-5d8540f0">1.6</span></p></td><td class="cl-5d884d2f"><p class="cl-5d883e86"><span class="cl-5d8540f0">Emily_PhD</span></p></td><td class="cl-5d884d36"><p class="cl-5d883e7c"><span class="cl-5d8540f0">1.4</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5d884d24"><p class="cl-5d883e7c"><span class="cl-5d8540f0">1</span></p></td><td class="cl-5d884d2c"><p class="cl-5d883e86"><span class="cl-5d8540f0">M</span></p></td><td class="cl-5d884d2d"><p class="cl-5d883e7c"><span class="cl-5d8540f0">16</span></p></td><td class="cl-5d884d2e"><p class="cl-5d883e7c"><span class="cl-5d8540f0">2.4</span></p></td><td class="cl-5d884d2f"><p class="cl-5d883e86"><span class="cl-5d8540f0">Emily_PhD</span></p></td><td class="cl-5d884d36"><p class="cl-5d883e7c"><span class="cl-5d8540f0">1.5</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5d884d24"><p class="cl-5d883e7c"><span class="cl-5d8540f0">1</span></p></td><td class="cl-5d884d2c"><p class="cl-5d883e86"><span class="cl-5d8540f0">F</span></p></td><td class="cl-5d884d2d"><p class="cl-5d883e7c"><span class="cl-5d8540f0">11</span></p></td><td class="cl-5d884d2e"><p class="cl-5d883e7c"><span class="cl-5d8540f0">1.3</span></p></td><td class="cl-5d884d2f"><p class="cl-5d883e86"><span class="cl-5d8540f0">Emily_PhD</span></p></td><td class="cl-5d884d36"><p class="cl-5d883e7c"><span class="cl-5d8540f0">1.1</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5d884d24"><p class="cl-5d883e7c"><span class="cl-5d8540f0">1</span></p></td><td class="cl-5d884d2c"><p class="cl-5d883e86"><span class="cl-5d8540f0">F</span></p></td><td class="cl-5d884d2d"><p class="cl-5d883e7c"><span class="cl-5d8540f0">12</span></p></td><td class="cl-5d884d2e"><p class="cl-5d883e7c"><span class="cl-5d8540f0">3.1</span></p></td><td class="cl-5d884d2f"><p class="cl-5d883e86"><span class="cl-5d8540f0">Emily_PhD</span></p></td><td class="cl-5d884d36"><p class="cl-5d883e7c"><span class="cl-5d8540f0">1.5</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5d884d24"><p class="cl-5d883e7c"><span class="cl-5d8540f0">1</span></p></td><td class="cl-5d884d2c"><p class="cl-5d883e86"><span class="cl-5d8540f0">F</span></p></td><td class="cl-5d884d2d"><p class="cl-5d883e7c"><span class="cl-5d8540f0">13</span></p></td><td class="cl-5d884d2e"><p class="cl-5d883e7c"><span class="cl-5d8540f0">2.3</span></p></td><td class="cl-5d884d2f"><p class="cl-5d883e86"><span class="cl-5d8540f0">Emily_PhD</span></p></td><td class="cl-5d884d36"><p class="cl-5d883e7c"><span class="cl-5d8540f0">1.4</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5d884d24"><p class="cl-5d883e7c"><span class="cl-5d8540f0">1</span></p></td><td class="cl-5d884d2c"><p class="cl-5d883e86"><span class="cl-5d8540f0">F</span></p></td><td class="cl-5d884d2d"><p class="cl-5d883e7c"><span class="cl-5d8540f0">14</span></p></td><td class="cl-5d884d2e"><p class="cl-5d883e7c"><span class="cl-5d8540f0">2.5</span></p></td><td class="cl-5d884d2f"><p class="cl-5d883e86"><span class="cl-5d8540f0">Emily_PhD</span></p></td><td class="cl-5d884d36"><p class="cl-5d883e7c"><span class="cl-5d8540f0">1.6</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5d884d24"><p class="cl-5d883e7c"><span class="cl-5d8540f0">1</span></p></td><td class="cl-5d884d2c"><p class="cl-5d883e86"><span class="cl-5d8540f0">F</span></p></td><td class="cl-5d884d2d"><p class="cl-5d883e7c"><span class="cl-5d8540f0">15</span></p></td><td class="cl-5d884d2e"><p class="cl-5d883e7c"><span class="cl-5d8540f0">2.4</span></p></td><td class="cl-5d884d2f"><p class="cl-5d883e86"><span class="cl-5d8540f0">Emily_PhD</span></p></td><td class="cl-5d884d36"><p class="cl-5d883e7c"><span class="cl-5d8540f0">1.6</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5d884d37"><p class="cl-5d883e7c"><span class="cl-5d8540f0">1</span></p></td><td class="cl-5d884d38"><p class="cl-5d883e86"><span class="cl-5d8540f0">F</span></p></td><td class="cl-5d884d40"><p class="cl-5d883e7c"><span class="cl-5d8540f0">16</span></p></td><td class="cl-5d884d41"><p class="cl-5d883e7c"><span class="cl-5d8540f0">2.4</span></p></td><td class="cl-5d884d42"><p class="cl-5d883e86"><span class="cl-5d8540f0">Emily_PhD</span></p></td><td class="cl-5d884d4a"><p class="cl-5d883e7c"><span class="cl-5d8540f0">1.5</span></p></td></tr></tbody></table></div>
</div>
<p>One thing you can see there (immediately above) is that the function defaults to give you a message about the lookup data being used.</p>
<p>I’ve filtered to show just the first help-seeking dataset member for each of the age and gender combinations and you can see that these have been mapped to the correct CSC values for those genders and ages.</p>
<p>As we were using the defaults for the lookup all the lookup arguments there could have been omitted but I put them in to make this post more comprehensive.</p>
<p>Having the correct CSC values allowed me to code the CSC status of each person and to plot the scores for all the participants against showing their CSC categories and the CSC values for each age and gender: as shown next.</p>
<div class="layout-chunk" data-layout="l-body-outset">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'>### use the CSC values to get CSC levels</span></span>
<span><span class='va'>tibBlackshaw</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>CSClevel <span class='op'>=</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/if_else.html'>if_else</a></span><span class='op'>(</span><span class='va'>YPscore</span> <span class='op'>&gt;=</span> <span class='va'>CSC</span>, <span class='st'>"High"</span>, <span class='st'>"Low"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>-&gt;</span> <span class='va'>tibBlackshaw</span></span>
<span></span>
<span><span class='co'>### modify the lookup to get the correct data for the plot</span></span>
<span><span class='va'>tibCSClookup</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>Ref</span> <span class='op'>==</span> <span class='st'>"Emily_PhD"</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>Dataset2 <span class='op'>=</span> <span class='st'>"HS"</span><span class='op'>)</span> <span class='op'>-&gt;</span> <span class='va'>tmpTibLookup1</span></span>
<span><span class='va'>tibCSClookup</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>Ref</span> <span class='op'>==</span> <span class='st'>"Emily_PhD"</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>Dataset2 <span class='op'>=</span> <span class='st'>"Non-HS"</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/bind_rows.html'>bind_rows</a></span><span class='op'>(</span><span class='va'>tmpTibLookup1</span><span class='op'>)</span> <span class='op'>-&gt;</span> <span class='va'>tmpTibLookup</span></span>
<span></span>
<span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>tmpTibLookup</span>,</span>
<span>       <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x<span class='op'>=</span> <span class='va'>Age</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/facet_grid.html'>facet_grid</a></span><span class='op'>(</span>rows <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/vars.html'>vars</a></span><span class='op'>(</span><span class='va'>Gender</span><span class='op'>)</span>, </span>
<span>             cols <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/vars.html'>vars</a></span><span class='op'>(</span><span class='va'>Dataset2</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_linerange.html'>geom_linerange</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>xmin <span class='op'>=</span> <span class='va'>Age</span> <span class='op'>-</span> <span class='fl'>.3</span>, xmax <span class='op'>=</span> <span class='va'>Age</span> <span class='op'>+</span> <span class='fl'>.3</span>, y <span class='op'>=</span> <span class='va'>CSC</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>tibBlackshaw</span>,</span>
<span>             <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>y <span class='op'>=</span> <span class='va'>YPscore</span>, colour <span class='op'>=</span> <span class='va'>CSClevel</span><span class='op'>)</span>,</span>
<span>             size <span class='op'>=</span> <span class='fl'>5</span>,</span>
<span>             alpha <span class='op'>=</span> <span class='fl'>.6</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_continuous.html'>scale_x_continuous</a></span><span class='op'>(</span><span class='st'>"Age"</span>,</span>
<span>                     breaks <span class='op'>=</span> <span class='fl'>11</span><span class='op'>:</span><span class='fl'>16</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_manual.html'>scale_color_manual</a></span><span class='op'>(</span><span class='st'>"CSC level"</span>,</span>
<span>                     values <span class='op'>=</span> <span class='va'>vecColoursCSClevel</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>ggtitle</a></span><span class='op'>(</span><span class='st'>"Facetted plot of YP-CORE scores against age, by gender and dataset"</span>,</span>
<span>          subtitle <span class='op'>=</span> <span class='st'>"Lines mark age and gender appropriate CSC values, colour marks CSC level"</span><span class='op'>)</span></span></code></pre>
</div>
</details>
<p><img src="lookupcsc2_files/figure-html5/testFunction2-1.png" width="1536" /></p>
</div>
<h1 id="uses-check-differences-between-different-lookup-values">Uses: check differences between different lookup values</h1>
<p>Another of the built in lookup tables is the one from Twigg, E., Cooper, M., Evans, C., Freire, E. S., Mellor-Clark, J., McInnes, B., &amp; Barkham, M. (2016). Acceptability, reliability, referential distributions, and sensitivity to change of the YP-CORE outcome measure: Replication and refinement. Child and Adolescent Mental Health, 21(2), 115–123. <a href="https://doi.org/10.1111/camh.12128" class="uri">https://doi.org/10.1111/camh.12128</a>.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>tibCSClookup</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>Ref</span> <span class='op'>==</span> <span class='st'>"Twigg_et_al_2016"</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://davidgohel.github.io/flextable/reference/flextable.html'>flextable</a></span><span class='op'>(</span><span class='op'>)</span></span></code></pre>
</div>
</details>
<div class="tabwid"><style>.cl-5e1fbb1c{}.cl-5e19cf68{font-family:'DejaVu Sans';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-5e1c1e80{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-5e1c1e94{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-5e1c2fba{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5e1c2fc4{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5e1c2fce{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5e1c2fcf{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5e1c2fd0{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5e1c2fd8{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing='true' class='cl-5e1fbb1c'><thead><tr style="overflow-wrap:break-word;"><th class="cl-5e1c2fba"><p class="cl-5e1c1e80"><span class="cl-5e19cf68">Ref</span></p></th><th class="cl-5e1c2fc4"><p class="cl-5e1c1e94"><span class="cl-5e19cf68">Age</span></p></th><th class="cl-5e1c2fba"><p class="cl-5e1c1e80"><span class="cl-5e19cf68">Gender</span></p></th><th class="cl-5e1c2fc4"><p class="cl-5e1c1e94"><span class="cl-5e19cf68">CSC</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-5e1c2fce"><p class="cl-5e1c1e80"><span class="cl-5e19cf68">Twigg_et_al_2016</span></p></td><td class="cl-5e1c2fcf"><p class="cl-5e1c1e94"><span class="cl-5e19cf68">11</span></p></td><td class="cl-5e1c2fce"><p class="cl-5e1c1e80"><span class="cl-5e19cf68">M</span></p></td><td class="cl-5e1c2fcf"><p class="cl-5e1c1e94"><span class="cl-5e19cf68">1.03</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5e1c2fce"><p class="cl-5e1c1e80"><span class="cl-5e19cf68">Twigg_et_al_2016</span></p></td><td class="cl-5e1c2fcf"><p class="cl-5e1c1e94"><span class="cl-5e19cf68">12</span></p></td><td class="cl-5e1c2fce"><p class="cl-5e1c1e80"><span class="cl-5e19cf68">M</span></p></td><td class="cl-5e1c2fcf"><p class="cl-5e1c1e94"><span class="cl-5e19cf68">1.03</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5e1c2fce"><p class="cl-5e1c1e80"><span class="cl-5e19cf68">Twigg_et_al_2016</span></p></td><td class="cl-5e1c2fcf"><p class="cl-5e1c1e94"><span class="cl-5e19cf68">13</span></p></td><td class="cl-5e1c2fce"><p class="cl-5e1c1e80"><span class="cl-5e19cf68">M</span></p></td><td class="cl-5e1c2fcf"><p class="cl-5e1c1e94"><span class="cl-5e19cf68">1.03</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5e1c2fce"><p class="cl-5e1c1e80"><span class="cl-5e19cf68">Twigg_et_al_2016</span></p></td><td class="cl-5e1c2fcf"><p class="cl-5e1c1e94"><span class="cl-5e19cf68">14</span></p></td><td class="cl-5e1c2fce"><p class="cl-5e1c1e80"><span class="cl-5e19cf68">M</span></p></td><td class="cl-5e1c2fcf"><p class="cl-5e1c1e94"><span class="cl-5e19cf68">1.41</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5e1c2fce"><p class="cl-5e1c1e80"><span class="cl-5e19cf68">Twigg_et_al_2016</span></p></td><td class="cl-5e1c2fcf"><p class="cl-5e1c1e94"><span class="cl-5e19cf68">15</span></p></td><td class="cl-5e1c2fce"><p class="cl-5e1c1e80"><span class="cl-5e19cf68">M</span></p></td><td class="cl-5e1c2fcf"><p class="cl-5e1c1e94"><span class="cl-5e19cf68">1.41</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5e1c2fce"><p class="cl-5e1c1e80"><span class="cl-5e19cf68">Twigg_et_al_2016</span></p></td><td class="cl-5e1c2fcf"><p class="cl-5e1c1e94"><span class="cl-5e19cf68">16</span></p></td><td class="cl-5e1c2fce"><p class="cl-5e1c1e80"><span class="cl-5e19cf68">M</span></p></td><td class="cl-5e1c2fcf"><p class="cl-5e1c1e94"><span class="cl-5e19cf68">1.41</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5e1c2fce"><p class="cl-5e1c1e80"><span class="cl-5e19cf68">Twigg_et_al_2016</span></p></td><td class="cl-5e1c2fcf"><p class="cl-5e1c1e94"><span class="cl-5e19cf68">11</span></p></td><td class="cl-5e1c2fce"><p class="cl-5e1c1e80"><span class="cl-5e19cf68">F</span></p></td><td class="cl-5e1c2fcf"><p class="cl-5e1c1e94"><span class="cl-5e19cf68">1.44</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5e1c2fce"><p class="cl-5e1c1e80"><span class="cl-5e19cf68">Twigg_et_al_2016</span></p></td><td class="cl-5e1c2fcf"><p class="cl-5e1c1e94"><span class="cl-5e19cf68">12</span></p></td><td class="cl-5e1c2fce"><p class="cl-5e1c1e80"><span class="cl-5e19cf68">F</span></p></td><td class="cl-5e1c2fcf"><p class="cl-5e1c1e94"><span class="cl-5e19cf68">1.44</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5e1c2fce"><p class="cl-5e1c1e80"><span class="cl-5e19cf68">Twigg_et_al_2016</span></p></td><td class="cl-5e1c2fcf"><p class="cl-5e1c1e94"><span class="cl-5e19cf68">13</span></p></td><td class="cl-5e1c2fce"><p class="cl-5e1c1e80"><span class="cl-5e19cf68">F</span></p></td><td class="cl-5e1c2fcf"><p class="cl-5e1c1e94"><span class="cl-5e19cf68">1.44</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5e1c2fce"><p class="cl-5e1c1e80"><span class="cl-5e19cf68">Twigg_et_al_2016</span></p></td><td class="cl-5e1c2fcf"><p class="cl-5e1c1e94"><span class="cl-5e19cf68">14</span></p></td><td class="cl-5e1c2fce"><p class="cl-5e1c1e80"><span class="cl-5e19cf68">F</span></p></td><td class="cl-5e1c2fcf"><p class="cl-5e1c1e94"><span class="cl-5e19cf68">1.59</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5e1c2fce"><p class="cl-5e1c1e80"><span class="cl-5e19cf68">Twigg_et_al_2016</span></p></td><td class="cl-5e1c2fcf"><p class="cl-5e1c1e94"><span class="cl-5e19cf68">15</span></p></td><td class="cl-5e1c2fce"><p class="cl-5e1c1e80"><span class="cl-5e19cf68">F</span></p></td><td class="cl-5e1c2fcf"><p class="cl-5e1c1e94"><span class="cl-5e19cf68">1.59</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5e1c2fd0"><p class="cl-5e1c1e80"><span class="cl-5e19cf68">Twigg_et_al_2016</span></p></td><td class="cl-5e1c2fd8"><p class="cl-5e1c1e94"><span class="cl-5e19cf68">16</span></p></td><td class="cl-5e1c2fd0"><p class="cl-5e1c1e80"><span class="cl-5e19cf68">F</span></p></td><td class="cl-5e1c2fd8"><p class="cl-5e1c1e94"><span class="cl-5e19cf68">1.59</span></p></td></tr></tbody></table></div>
</div>
<p>The dataset sizes in that work weren’t large enough for us to look at things by year. The way the lookup table in <code>lookupCSCgenderAndAge()</code> works is to expect a value for all ages hence that table has values for each year but you can see that there are only CSC values for two age groups: 11-13 and 14-16. What happens if we use these by setting <code>lookupRef = "Twigg_et_al_2016"</code> in the call to <code>lookupCSCgenderAndAge()</code>?</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'>### must remove or rename existing Ref variable</span></span>
<span><span class='va'>tibBlackshaw</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='op'>-</span><span class='va'>Ref</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='co'>### sensible to rename previous CSC level variable</span></span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/rename.html'>rename</a></span><span class='op'>(</span>CSClevelBlackshaw <span class='op'>=</span> <span class='va'>CSClevel</span><span class='op'>)</span> <span class='op'>-&gt;</span> <span class='va'>tibBlackshaw</span></span>
<span></span>
<span><span class='co'>### use the function to generate data (which I have put into tmpTib) containing the CSC values mapped from the lookup table</span></span>
<span><span class='fu'><a href='https://rdrr.io/pkg/CECPfuns/man/lookupCSCgenderAndAge.html'>lookupCSCgenderAndAge</a></span><span class='op'>(</span>useInternalLookup <span class='op'>=</span> <span class='cn'>TRUE</span>, <span class='co'># so using the internal lookup data (could have omitted this, it's the default)</span></span>
<span>                      lookupTableName <span class='op'>=</span> <span class='cn'>NULL</span>, <span class='co'># so no need to give an external lookup table name (could have omitted this, it's the default)</span></span>
<span>                      lookupGenderVarChar <span class='op'>=</span> <span class='st'>"Gender"</span>, <span class='co'># name of the gender variable in the lookup table (could have omitted this, it's the default)</span></span>
<span>                      lookupAgeVarChar <span class='op'>=</span> <span class='st'>"Age"</span>, <span class='co'># name of the age variable ditto (again could have omitted this, it's the default)</span></span>
<span>                      lookupGenderF <span class='op'>=</span> <span class='st'>"F"</span>, <span class='co'># code for female gender in the lookup table (could have omitted this, it's the default)</span></span>
<span>                      lookupGenderM <span class='op'>=</span> <span class='st'>"M"</span>, <span class='co'># code for male gender ditto</span></span>
<span>                      lookupGenderO <span class='op'>=</span> <span class='st'>"O"</span>, <span class='co'># code for other gender ditto (lookup table currently has no CSCs for other gender)</span></span>
<span>                      lookupRef <span class='op'>=</span> <span class='st'>"Twigg_et_al_2016"</span>,</span>
<span>                      <span class='co'>### now the arguments about the data to code</span></span>
<span>                      dataTableName <span class='op'>=</span> <span class='va'>tibBlackshaw</span>, <span class='co'># crucial name of the data to classify, this and the following </span></span>
<span>                      dataGenderVarChar <span class='op'>=</span> <span class='st'>"Gender"</span>, <span class='co'># name of the gender variable in those data (could have omitted this, it's the default)</span></span>
<span>                      dataAgeVarChar <span class='op'>=</span> <span class='st'>"Age"</span>, <span class='co'># you can work out this and the following</span></span>
<span>                      dataGenderF <span class='op'>=</span> <span class='st'>"F"</span>,</span>
<span>                      dataGenderM <span class='op'>=</span> <span class='st'>"M"</span>,</span>
<span>                      dataGenderO <span class='op'>=</span> <span class='st'>"O"</span>,</span>
<span>                      <span class='co'>### no missing values in lookup tables (would be meaningless), but you may have missing values in your data</span></span>
<span>                      dataGenderNA <span class='op'>=</span> <span class='cn'>NA_character_</span>,</span>
<span>                      outputCSCvarChar <span class='op'>=</span> <span class='st'>"CSCTwigg"</span><span class='op'>)</span> <span class='op'>-&gt;</span> <span class='va'>tibBoth</span> <span class='co'># so that call returns the raw data but now with the CSC values</span></span></code></pre>
</div>
</details>
<pre><code>These referential data had CSC values for age for two age groups: 11-13 and 14-16</code></pre>
</div>
<p>That shows the message about the lookup data has changed to reflect the Twigg et al. values.</p>
<div class="layout-chunk" data-layout="l-body-outset">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'>### use the CSC values to get CSC levels</span></span>
<span><span class='va'>tibBoth</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>CSClevelTwigg <span class='op'>=</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/if_else.html'>if_else</a></span><span class='op'>(</span><span class='va'>YPscore</span> <span class='op'>&gt;=</span> <span class='va'>CSCTwigg</span>, <span class='st'>"High"</span>, <span class='st'>"Low"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>-&gt;</span> <span class='va'>tibBoth</span></span>
<span></span>
<span><span class='co'>### modify the lookup to get the correct data for the plot</span></span>
<span><span class='va'>tibCSClookup</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>Ref</span> <span class='op'>==</span> <span class='st'>"Twigg_et_al_2016"</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>Dataset2 <span class='op'>=</span> <span class='st'>"HS"</span><span class='op'>)</span> <span class='op'>-&gt;</span> <span class='va'>tmpTibLookup1</span></span>
<span><span class='va'>tibCSClookup</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>Ref</span> <span class='op'>==</span> <span class='st'>"Twigg_et_al_2016"</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>Dataset2 <span class='op'>=</span> <span class='st'>"Non-HS"</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/bind_rows.html'>bind_rows</a></span><span class='op'>(</span><span class='va'>tmpTibLookup1</span><span class='op'>)</span> <span class='op'>-&gt;</span> <span class='va'>tmpTibLookup</span></span>
<span></span>
<span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>tmpTibLookup</span>,</span>
<span>       <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x<span class='op'>=</span> <span class='va'>Age</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/facet_grid.html'>facet_grid</a></span><span class='op'>(</span>rows <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/vars.html'>vars</a></span><span class='op'>(</span><span class='va'>Gender</span><span class='op'>)</span>, </span>
<span>             cols <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/vars.html'>vars</a></span><span class='op'>(</span><span class='va'>Dataset2</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_linerange.html'>geom_linerange</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>xmin <span class='op'>=</span> <span class='va'>Age</span> <span class='op'>-</span> <span class='fl'>.3</span>, xmax <span class='op'>=</span> <span class='va'>Age</span> <span class='op'>+</span> <span class='fl'>.3</span>, y <span class='op'>=</span> <span class='va'>CSC</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>tibBoth</span>,</span>
<span>             <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>y <span class='op'>=</span> <span class='va'>YPscore</span>, colour <span class='op'>=</span> <span class='va'>CSClevelTwigg</span><span class='op'>)</span>,</span>
<span>             size <span class='op'>=</span> <span class='fl'>5</span>,</span>
<span>             alpha <span class='op'>=</span> <span class='fl'>.6</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_manual.html'>scale_color_manual</a></span><span class='op'>(</span><span class='st'>"CSC level"</span>,</span>
<span>                     values <span class='op'>=</span> <span class='va'>vecColoursCSClevel</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>ggtitle</a></span><span class='op'>(</span><span class='st'>"YP-CORE scores using CSC classification from Twigg et al. 2016"</span>,</span>
<span>          subtitle <span class='op'>=</span> <span class='st'>"Lines mark age and gender appropriate CSC values, colour marks CSC level"</span><span class='op'>)</span></span></code></pre>
</div>
</details>
<p><img src="lookupcsc2_files/figure-html5/testFunction4-1.png" width="1536" /></p>
</div>
<p>We can see that the Twigg et al. data only permitted CSC classifications by age groups, not by year. How does the classification, for this little dataset, compare with that using the Blackshaw data?</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>tibBoth</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://sfirke.github.io/janitor/reference/tabyl.html'>tabyl</a></span><span class='op'>(</span><span class='va'>CSClevelTwigg</span>, <span class='va'>CSClevelBlackshaw</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://sfirke.github.io/janitor/reference/adorn_percentages.html'>adorn_percentages</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://sfirke.github.io/janitor/reference/adorn_pct_formatting.html'>adorn_pct_formatting</a></span><span class='op'>(</span>digits <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://sfirke.github.io/janitor/reference/adorn_ns.html'>adorn_ns</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://davidgohel.github.io/flextable/reference/flextable.html'>flextable</a></span><span class='op'>(</span><span class='op'>)</span></span></code></pre>
</div>
</details>
<div class="tabwid"><style>.cl-5ec98426{}.cl-5ec39340{font-family:'DejaVu Sans';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-5ec60b66{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-5ec618ea{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5ec618eb{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5ec618f4{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing='true' class='cl-5ec98426'><thead><tr style="overflow-wrap:break-word;"><th class="cl-5ec618ea"><p class="cl-5ec60b66"><span class="cl-5ec39340">CSClevelTwigg</span></p></th><th class="cl-5ec618ea"><p class="cl-5ec60b66"><span class="cl-5ec39340">High</span></p></th><th class="cl-5ec618ea"><p class="cl-5ec60b66"><span class="cl-5ec39340">Low</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-5ec618eb"><p class="cl-5ec60b66"><span class="cl-5ec39340">High</span></p></td><td class="cl-5ec618eb"><p class="cl-5ec60b66"><span class="cl-5ec39340">100.0% (110)</span></p></td><td class="cl-5ec618eb"><p class="cl-5ec60b66"><span class="cl-5ec39340">0.0%   (0)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5ec618f4"><p class="cl-5ec60b66"><span class="cl-5ec39340">Low</span></p></td><td class="cl-5ec618f4"><p class="cl-5ec60b66"><span class="cl-5ec39340">7.0%   (9)</span></p></td><td class="cl-5ec618f4"><p class="cl-5ec60b66"><span class="cl-5ec39340">93.0% (120)</span></p></td></tr></tbody></table></div>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>tibBoth</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>different <span class='op'>=</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/if_else.html'>if_else</a></span><span class='op'>(</span><span class='va'>CSClevelTwigg</span> <span class='op'>!=</span> <span class='va'>CSClevelBlackshaw</span>, <span class='fl'>1</span>, <span class='fl'>0</span><span class='op'>)</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>different</span> <span class='op'>==</span> <span class='fl'>1</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>-&gt;</span> <span class='va'>valNdifferent</span></span>
<span></span>
<span><span class='va'>percDifferent</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/Round.html'>round</a></span><span class='op'>(</span><span class='fl'>100</span> <span class='op'>*</span> <span class='va'>valNdifferent</span> <span class='op'>/</span> <span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='va'>tibBoth</span><span class='op'>)</span>, <span class='fl'>1</span><span class='op'>)</span></span></code></pre>
</div>
</details>
</div>
<p>So
9 get a different CSC classification, i.e. 
3.8% of the
239 in this selected dataset.</p>
<h1 id="handling-of-missing-values">Handling of missing values</h1>
<p>Obviously, you can’t have a CSC value if either or both of the age or gender are missing. This is just showing that this is handled correctly. I’ve injected missing values into gender in the first row of the data and into age in the second row. As seen here.</p>
<div class="layout-chunk" data-layout="l-body-outset">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>tibData</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>  </span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>Gender <span class='op'>=</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/if_else.html'>if_else</a></span><span class='op'>(</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/row_number.html'>row_number</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>==</span> <span class='fl'>1</span>, <span class='cn'>NA</span>, <span class='va'>Gender</span><span class='op'>)</span>, </span>
<span>         Age <span class='op'>=</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/if_else.html'>if_else</a></span><span class='op'>(</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/row_number.html'>row_number</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>==</span> <span class='fl'>2</span>, <span class='cn'>NA</span>, <span class='va'>Age</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>-&gt;</span> <span class='va'>tibDat3</span></span>
<span></span>
<span><span class='va'>tibDat3</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/row_number.html'>row_number</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>&lt;</span> <span class='fl'>5</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='op'>-</span><span class='va'>YPclinscore</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://davidgohel.github.io/flextable/reference/flextable.html'>flextable</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://davidgohel.github.io/flextable/reference/colformat_num.html'>colformat_num</a></span><span class='op'>(</span>na_str <span class='op'>=</span> <span class='st'>"NA"</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://davidgohel.github.io/flextable/reference/colformat_char.html'>colformat_char</a></span><span class='op'>(</span>na_str <span class='op'>=</span> <span class='st'>"NA"</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://davidgohel.github.io/flextable/reference/autofit.html'>autofit</a></span><span class='op'>(</span><span class='op'>)</span></span></code></pre>
</div>
</details>
<div class="tabwid"><style>.cl-5f8a4c88{}.cl-5f85596c{font-family:'DejaVu Sans';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-5f877d1e{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-5f877d28{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-5f878be2{width:0.448in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5f878bec{width:1.281in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5f878bed{width:0.981in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5f878bf6{width:0.848in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5f878bf7{width:0.581in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5f878bf8{width:0.885in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5f878c00{width:0.448in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5f878c01{width:1.281in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5f878c02{width:0.981in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5f878c03{width:0.848in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5f878c0a{width:0.581in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5f878c0b{width:0.885in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5f878c14{width:0.448in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5f878c15{width:1.281in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5f878c16{width:0.981in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5f878c17{width:0.848in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5f878c1e{width:0.581in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5f878c1f{width:0.885in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing='true' class='cl-5f8a4c88'><thead><tr style="overflow-wrap:break-word;"><th class="cl-5f878be2"><p class="cl-5f877d1e"><span class="cl-5f85596c">ID</span></p></th><th class="cl-5f878bec"><p class="cl-5f877d28"><span class="cl-5f85596c">Dataset</span></p></th><th class="cl-5f878bed"><p class="cl-5f877d28"><span class="cl-5f85596c">Dataset2</span></p></th><th class="cl-5f878bf6"><p class="cl-5f877d28"><span class="cl-5f85596c">Gender</span></p></th><th class="cl-5f878bf7"><p class="cl-5f877d1e"><span class="cl-5f85596c">Age</span></p></th><th class="cl-5f878bf8"><p class="cl-5f877d1e"><span class="cl-5f85596c">YPscore</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-5f878c00"><p class="cl-5f877d1e"><span class="cl-5f85596c">1</span></p></td><td class="cl-5f878c01"><p class="cl-5f877d28"><span class="cl-5f85596c">Help-seeking</span></p></td><td class="cl-5f878c02"><p class="cl-5f877d28"><span class="cl-5f85596c">HS</span></p></td><td class="cl-5f878c03"><p class="cl-5f877d28"><span class="cl-5f85596c">NA</span></p></td><td class="cl-5f878c0a"><p class="cl-5f877d1e"><span class="cl-5f85596c">11</span></p></td><td class="cl-5f878c0b"><p class="cl-5f877d1e"><span class="cl-5f85596c">1.1</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5f878c00"><p class="cl-5f877d1e"><span class="cl-5f85596c">2</span></p></td><td class="cl-5f878c01"><p class="cl-5f877d28"><span class="cl-5f85596c">Help-seeking</span></p></td><td class="cl-5f878c02"><p class="cl-5f877d28"><span class="cl-5f85596c">HS</span></p></td><td class="cl-5f878c03"><p class="cl-5f877d28"><span class="cl-5f85596c">M</span></p></td><td class="cl-5f878c0a"><p class="cl-5f877d1e"><span class="cl-5f85596c">NA</span></p></td><td class="cl-5f878c0b"><p class="cl-5f877d1e"><span class="cl-5f85596c">1.2</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5f878c00"><p class="cl-5f877d1e"><span class="cl-5f85596c">3</span></p></td><td class="cl-5f878c01"><p class="cl-5f877d28"><span class="cl-5f85596c">Help-seeking</span></p></td><td class="cl-5f878c02"><p class="cl-5f877d28"><span class="cl-5f85596c">HS</span></p></td><td class="cl-5f878c03"><p class="cl-5f877d28"><span class="cl-5f85596c">M</span></p></td><td class="cl-5f878c0a"><p class="cl-5f877d1e"><span class="cl-5f85596c">11</span></p></td><td class="cl-5f878c0b"><p class="cl-5f877d1e"><span class="cl-5f85596c">1.5</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5f878c14"><p class="cl-5f877d1e"><span class="cl-5f85596c">4</span></p></td><td class="cl-5f878c15"><p class="cl-5f877d28"><span class="cl-5f85596c">Help-seeking</span></p></td><td class="cl-5f878c16"><p class="cl-5f877d28"><span class="cl-5f85596c">HS</span></p></td><td class="cl-5f878c17"><p class="cl-5f877d28"><span class="cl-5f85596c">M</span></p></td><td class="cl-5f878c1e"><p class="cl-5f877d1e"><span class="cl-5f85596c">11</span></p></td><td class="cl-5f878c1f"><p class="cl-5f877d1e"><span class="cl-5f85596c">3.6</span></p></td></tr></tbody></table></div>
</div>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/pkg/CECPfuns/man/lookupCSCgenderAndAge.html'>lookupCSCgenderAndAge</a></span><span class='op'>(</span>useInternalLookup <span class='op'>=</span> <span class='cn'>TRUE</span>,</span>
<span>                      lookupTableName <span class='op'>=</span> <span class='cn'>NULL</span>,</span>
<span>                      lookupGenderVarChar <span class='op'>=</span> <span class='st'>"Gender"</span>,</span>
<span>                      lookupAgeVarChar <span class='op'>=</span> <span class='st'>"Age"</span>,</span>
<span>                      lookupGenderF <span class='op'>=</span> <span class='st'>"F"</span>,</span>
<span>                      lookupGenderM <span class='op'>=</span> <span class='st'>"M"</span>,</span>
<span>                      lookupGenderO <span class='op'>=</span> <span class='st'>"O"</span>,</span>
<span>                      dataTableName <span class='op'>=</span> <span class='va'>tibDat3</span>, </span>
<span>                      dataGenderVarChar <span class='op'>=</span> <span class='st'>"Gender"</span>,</span>
<span>                      dataAgeVarChar <span class='op'>=</span> <span class='st'>"Age"</span>,</span>
<span>                      dataGenderF <span class='op'>=</span> <span class='st'>"F"</span>,</span>
<span>                      dataGenderM <span class='op'>=</span> <span class='st'>"M"</span>,</span>
<span>                      dataGenderO <span class='op'>=</span> <span class='st'>"O"</span>,</span>
<span>                      outputCSCvarChar <span class='op'>=</span> <span class='st'>"CSC"</span>,</span>
<span>                      dataGenderNA <span class='op'>=</span> <span class='cn'>NA_character_</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/row_number.html'>row_number</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>&lt;</span> <span class='fl'>5</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='op'>-</span><span class='va'>YPclinscore</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://davidgohel.github.io/flextable/reference/flextable.html'>flextable</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://davidgohel.github.io/flextable/reference/colformat_num.html'>colformat_num</a></span><span class='op'>(</span>na_str <span class='op'>=</span> <span class='st'>"NA"</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://davidgohel.github.io/flextable/reference/colformat_char.html'>colformat_char</a></span><span class='op'>(</span>na_str <span class='op'>=</span> <span class='st'>"NA"</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://davidgohel.github.io/flextable/reference/autofit.html'>autofit</a></span><span class='op'>(</span><span class='op'>)</span></span></code></pre>
</div>
</details>
<pre><code>These referential data had CSC values for age by year from 11 to 16 years old</code></pre>
<pre><code>Warning in lookupCSCgenderAndAge(useInternalLookup = TRUE,
lookupTableName = NULL, : You have 1 missing gender values in your
data.</code></pre>
<pre><code>Warning in lookupCSCgenderAndAge(useInternalLookup = TRUE,
lookupTableName = NULL, : You have 1 missing age values in your data.</code></pre>
<div class="tabwid"><style>.cl-5fb5d768{}.cl-5fb0b08a{font-family:'DejaVu Sans';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-5fb2efb2{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-5fb2efbc{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-5fb2fdb8{width:0.448in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5fb2fdc2{width:1.281in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5fb2fdc3{width:0.981in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5fb2fdcc{width:0.848in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5fb2fdcd{width:0.581in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5fb2fdce{width:0.885in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5fb2fdcf{width:1.089in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5fb2fdd6{width:0.596in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5fb2fdd7{width:0.448in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5fb2fde0{width:1.281in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5fb2fde1{width:0.981in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5fb2fdea{width:0.848in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5fb2fdeb{width:0.581in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5fb2fdec{width:0.885in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5fb2fded{width:1.089in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5fb2fdee{width:0.596in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5fb2fdf4{width:0.448in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5fb2fdfe{width:1.281in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5fb2fdff{width:0.981in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5fb2fe00{width:0.848in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5fb2fe01{width:0.581in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5fb2fe08{width:0.885in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5fb2fe09{width:1.089in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5fb2fe0a{width:0.596in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5fb2fe0b{width:0.448in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5fb2fe12{width:1.281in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5fb2fe13{width:0.981in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5fb2fe14{width:0.848in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5fb2fe15{width:0.581in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5fb2fe1c{width:0.885in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5fb2fe1d{width:1.089in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-5fb2fe1e{width:0.596in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing='true' class='cl-5fb5d768'><thead><tr style="overflow-wrap:break-word;"><th class="cl-5fb2fdb8"><p class="cl-5fb2efb2"><span class="cl-5fb0b08a">ID</span></p></th><th class="cl-5fb2fdc2"><p class="cl-5fb2efbc"><span class="cl-5fb0b08a">Dataset</span></p></th><th class="cl-5fb2fdc3"><p class="cl-5fb2efbc"><span class="cl-5fb0b08a">Dataset2</span></p></th><th class="cl-5fb2fdcc"><p class="cl-5fb2efbc"><span class="cl-5fb0b08a">Gender</span></p></th><th class="cl-5fb2fdcd"><p class="cl-5fb2efb2"><span class="cl-5fb0b08a">Age</span></p></th><th class="cl-5fb2fdce"><p class="cl-5fb2efb2"><span class="cl-5fb0b08a">YPscore</span></p></th><th class="cl-5fb2fdcf"><p class="cl-5fb2efbc"><span class="cl-5fb0b08a">Ref</span></p></th><th class="cl-5fb2fdd6"><p class="cl-5fb2efb2"><span class="cl-5fb0b08a">CSC</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-5fb2fdd7"><p class="cl-5fb2efb2"><span class="cl-5fb0b08a">1</span></p></td><td class="cl-5fb2fde0"><p class="cl-5fb2efbc"><span class="cl-5fb0b08a">Help-seeking</span></p></td><td class="cl-5fb2fde1"><p class="cl-5fb2efbc"><span class="cl-5fb0b08a">HS</span></p></td><td class="cl-5fb2fdea"><p class="cl-5fb2efbc"><span class="cl-5fb0b08a">NA</span></p></td><td class="cl-5fb2fdeb"><p class="cl-5fb2efb2"><span class="cl-5fb0b08a">11</span></p></td><td class="cl-5fb2fdec"><p class="cl-5fb2efb2"><span class="cl-5fb0b08a">1.1</span></p></td><td class="cl-5fb2fded"><p class="cl-5fb2efbc"><span class="cl-5fb0b08a">NA</span></p></td><td class="cl-5fb2fdee"><p class="cl-5fb2efb2"><span class="cl-5fb0b08a">NA</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5fb2fdd7"><p class="cl-5fb2efb2"><span class="cl-5fb0b08a">2</span></p></td><td class="cl-5fb2fde0"><p class="cl-5fb2efbc"><span class="cl-5fb0b08a">Help-seeking</span></p></td><td class="cl-5fb2fde1"><p class="cl-5fb2efbc"><span class="cl-5fb0b08a">HS</span></p></td><td class="cl-5fb2fdea"><p class="cl-5fb2efbc"><span class="cl-5fb0b08a">M</span></p></td><td class="cl-5fb2fdeb"><p class="cl-5fb2efb2"><span class="cl-5fb0b08a">NA</span></p></td><td class="cl-5fb2fdec"><p class="cl-5fb2efb2"><span class="cl-5fb0b08a">1.2</span></p></td><td class="cl-5fb2fded"><p class="cl-5fb2efbc"><span class="cl-5fb0b08a">NA</span></p></td><td class="cl-5fb2fdee"><p class="cl-5fb2efb2"><span class="cl-5fb0b08a">NA</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5fb2fdf4"><p class="cl-5fb2efb2"><span class="cl-5fb0b08a">3</span></p></td><td class="cl-5fb2fdfe"><p class="cl-5fb2efbc"><span class="cl-5fb0b08a">Help-seeking</span></p></td><td class="cl-5fb2fdff"><p class="cl-5fb2efbc"><span class="cl-5fb0b08a">HS</span></p></td><td class="cl-5fb2fe00"><p class="cl-5fb2efbc"><span class="cl-5fb0b08a">M</span></p></td><td class="cl-5fb2fe01"><p class="cl-5fb2efb2"><span class="cl-5fb0b08a">11</span></p></td><td class="cl-5fb2fe08"><p class="cl-5fb2efb2"><span class="cl-5fb0b08a">1.5</span></p></td><td class="cl-5fb2fe09"><p class="cl-5fb2efbc"><span class="cl-5fb0b08a">Emily_PhD</span></p></td><td class="cl-5fb2fe0a"><p class="cl-5fb2efb2"><span class="cl-5fb0b08a">1</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-5fb2fe0b"><p class="cl-5fb2efb2"><span class="cl-5fb0b08a">4</span></p></td><td class="cl-5fb2fe12"><p class="cl-5fb2efbc"><span class="cl-5fb0b08a">Help-seeking</span></p></td><td class="cl-5fb2fe13"><p class="cl-5fb2efbc"><span class="cl-5fb0b08a">HS</span></p></td><td class="cl-5fb2fe14"><p class="cl-5fb2efbc"><span class="cl-5fb0b08a">M</span></p></td><td class="cl-5fb2fe15"><p class="cl-5fb2efb2"><span class="cl-5fb0b08a">11</span></p></td><td class="cl-5fb2fe1c"><p class="cl-5fb2efb2"><span class="cl-5fb0b08a">3.6</span></p></td><td class="cl-5fb2fe1d"><p class="cl-5fb2efbc"><span class="cl-5fb0b08a">Emily_PhD</span></p></td><td class="cl-5fb2fe1e"><p class="cl-5fb2efb2"><span class="cl-5fb0b08a">1</span></p></td></tr></tbody></table></div>
</div>
<p>As well as the usual message about the lookup values being used, the function now adds warnings about being unable to lookup CSC values because of missing values.</p>
<h1 id="function-optionsarguments">Function options/arguments</h1>
<h2 id="clinical-scoring">“Clinical” scoring</h2>
<p>One oddity about the CORE measures is that they have two scoring systems: the original which used the mean of item scores (if enough items were scored) but there is also a later “Clinical score” which is 10x the item mean (don’t blame me: wasn’t my decision!) Hence I have put in an argument <code>useClinScoring</code>. That defaults to FALSE to use the original scoring in both the lookup tables and the data but can be set to use the clinical scoring by setting <code>useClinScoring = TRUE</code>. Like this:</p>
<div class="layout-chunk" data-layout="l-body-outset">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/pkg/CECPfuns/man/lookupCSCgenderAndAge.html'>lookupCSCgenderAndAge</a></span><span class='op'>(</span>lookupGenderVarChar <span class='op'>=</span> <span class='st'>"Gender"</span>,</span>
<span>                      lookupAgeVarChar <span class='op'>=</span> <span class='st'>"Age"</span>,</span>
<span>                      lookupGenderF <span class='op'>=</span> <span class='st'>"F"</span>,</span>
<span>                      lookupGenderM <span class='op'>=</span> <span class='st'>"M"</span>,</span>
<span>                      lookupGenderO <span class='op'>=</span> <span class='st'>"O"</span>,</span>
<span>                      dataTableName <span class='op'>=</span> <span class='va'>tibData</span>, </span>
<span>                      dataGenderVarChar <span class='op'>=</span> <span class='st'>"Gender"</span>,</span>
<span>                      dataAgeVarChar <span class='op'>=</span> <span class='st'>"Age"</span>,</span>
<span>                      dataGenderF <span class='op'>=</span> <span class='st'>"F"</span>,</span>
<span>                      dataGenderM <span class='op'>=</span> <span class='st'>"M"</span>,</span>
<span>                      dataGenderO <span class='op'>=</span> <span class='st'>"O"</span>,</span>
<span>                      dataGenderNA <span class='op'>=</span> <span class='cn'>NA_character_</span>,</span>
<span>                      outputCSCvarChar <span class='op'>=</span> <span class='st'>"CSC"</span>,</span>
<span>                      useClinScoring <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span> <span class='op'>-&gt;</span> <span class='va'>tmpTib</span></span>
<span></span>
<span><span class='co'>### use the CSC values to get CSC levels</span></span>
<span><span class='va'>tmpTib</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>CSClevel <span class='op'>=</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/if_else.html'>if_else</a></span><span class='op'>(</span><span class='va'>YPclinscore</span> <span class='op'>&gt;=</span> <span class='va'>CSC</span>, <span class='st'>"High"</span>, <span class='st'>"Low"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>-&gt;</span> <span class='va'>tmpTib</span></span>
<span></span>
<span><span class='co'>### modify the lookup to get the correct data for the plot</span></span>
<span><span class='va'>tibCSClookup</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>Ref</span> <span class='op'>==</span> <span class='st'>"Emily_PhD"</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>Dataset2 <span class='op'>=</span> <span class='st'>"HS"</span><span class='op'>)</span> <span class='op'>-&gt;</span> <span class='va'>tmpTibLookup1</span></span>
<span><span class='va'>tibCSClookup</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>Ref</span> <span class='op'>==</span> <span class='st'>"Emily_PhD"</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>Dataset2 <span class='op'>=</span> <span class='st'>"Non-HS"</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/bind_rows.html'>bind_rows</a></span><span class='op'>(</span><span class='va'>tmpTibLookup1</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='co'>### fix lookup values to clinical scoring for the plot</span></span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>CSC <span class='op'>=</span> <span class='fl'>10</span> <span class='op'>*</span> <span class='va'>CSC</span><span class='op'>)</span> <span class='op'>-&gt;</span> <span class='va'>tmpTibLookup</span></span>
<span></span>
<span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>tmpTibLookup</span>,</span>
<span>       <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x<span class='op'>=</span> <span class='va'>Age</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/facet_grid.html'>facet_grid</a></span><span class='op'>(</span>rows <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/vars.html'>vars</a></span><span class='op'>(</span><span class='va'>Gender</span><span class='op'>)</span>, </span>
<span>             cols <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/vars.html'>vars</a></span><span class='op'>(</span><span class='va'>Dataset2</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_linerange.html'>geom_linerange</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>xmin <span class='op'>=</span> <span class='va'>Age</span> <span class='op'>-</span> <span class='fl'>.3</span>, xmax <span class='op'>=</span> <span class='va'>Age</span> <span class='op'>+</span> <span class='fl'>.3</span>, y <span class='op'>=</span> <span class='va'>CSC</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>tmpTib</span>,</span>
<span>             <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>y <span class='op'>=</span> <span class='va'>YPclinscore</span>, colour <span class='op'>=</span> <span class='va'>CSClevel</span><span class='op'>)</span>,</span>
<span>             size <span class='op'>=</span> <span class='fl'>5</span>,</span>
<span>             alpha <span class='op'>=</span> <span class='fl'>.6</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_continuous.html'>scale_x_continuous</a></span><span class='op'>(</span><span class='st'>"Age"</span>,</span>
<span>                     breaks <span class='op'>=</span> <span class='fl'>11</span><span class='op'>:</span><span class='fl'>16</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_continuous.html'>scale_y_continuous</a></span><span class='op'>(</span><span class='st'>"YP-CORE clinical score"</span>,</span>
<span>                     limits <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>40</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_manual.html'>scale_color_manual</a></span><span class='op'>(</span><span class='st'>"CSC level"</span>,</span>
<span>                     values <span class='op'>=</span> <span class='va'>vecColoursCSClevel</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>ggtitle</a></span><span class='op'>(</span><span class='st'>"YP-CORE clinical scores against age, by gender and dataset"</span>,</span>
<span>          subtitle <span class='op'>=</span> <span class='st'>"Lines mark age and gender appropriate CSC values, colour marks CSC level"</span><span class='op'>)</span></span></code></pre>
</div>
</details>
<p><img src="lookupcsc2_files/figure-html5/useClinScoring-1.png" width="1536" /></p>
</div>
<p>You can see that things have been rescaled.</p>
<h2 id="you-can-use-your-own-lookup-table">You can use your own lookup table</h2>
<p>I imagine there will be scenarios in which the lookup tables built into the function aren’t appropriate for your data. At the moment the internal lookups only exist for the YP-CORE (but I’m happy to include other ones if asked). To use your own lookup table set <code>useInternalLookup = FALSE</code> and then use <code>lookupTableName</code> to give the name of a data frame or tibble of the lookup mappings you want. Here is an example of such a table (created by tweaking the CSC value for male gender and age 11 to a silly 2.9).</p>
<div class="layout-chunk" data-layout="l-body-outset">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'>### uses a deliberately changed set of lookup values</span></span>
<span><span class='kw'>if</span> <span class='op'>(</span><span class='op'>!</span><span class='fu'><a href='https://rdrr.io/r/base/interactive.html'>interactive</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>{</span></span>
<span>  <span class='va'>tmpTibLookup</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/utils/read.table.html'>read.csv</a></span><span class='op'>(</span><span class='st'>"tmp.csv"</span><span class='op'>)</span></span>
<span><span class='op'>}</span> <span class='kw'>else</span> <span class='op'>{</span></span>
<span>  <span class='va'>tmpTibLookup</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/utils/read.table.html'>read.csv</a></span><span class='op'>(</span><span class='st'>"./_posts/2024-01-21-lookupcsc2/tmp.csv"</span><span class='op'>)</span></span>
<span><span class='op'>}</span></span>
<span></span>
<span><span class='va'>tmpTibLookup</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>Ref <span class='op'>=</span> <span class='st'>"external"</span><span class='op'>)</span> <span class='op'>-&gt;</span> <span class='va'>tmpTibLookup2</span></span>
<span><span class='va'>tmpTibLookup2</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://davidgohel.github.io/flextable/reference/flextable.html'>flextable</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>  <span class='fu'><a href='https://davidgohel.github.io/flextable/reference/autofit.html'>autofit</a></span><span class='op'>(</span><span class='op'>)</span></span></code></pre>
</div>
</details>
<div class="tabwid"><style>.cl-605a3772{}.cl-60541964{font-family:'DejaVu Sans';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-605735b8{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-605735c2{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-60574440{width:0.581in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-6057444a{width:0.848in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-60574454{width:0.822in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-60574455{width:0.919in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-60574456{width:0.581in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-6057445e{width:0.848in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-6057445f{width:0.822in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-60574460{width:0.919in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-60574468{width:0.581in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-60574469{width:0.848in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-6057446a{width:0.822in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-6057446b{width:0.919in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing='true' class='cl-605a3772'><thead><tr style="overflow-wrap:break-word;"><th class="cl-60574440"><p class="cl-605735b8"><span class="cl-60541964">Age</span></p></th><th class="cl-6057444a"><p class="cl-605735c2"><span class="cl-60541964">Gender</span></p></th><th class="cl-60574454"><p class="cl-605735b8"><span class="cl-60541964">CSCval</span></p></th><th class="cl-60574455"><p class="cl-605735c2"><span class="cl-60541964">Ref</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-60574456"><p class="cl-605735b8"><span class="cl-60541964">11</span></p></td><td class="cl-6057445e"><p class="cl-605735c2"><span class="cl-60541964">M</span></p></td><td class="cl-6057445f"><p class="cl-605735b8"><span class="cl-60541964">2.9</span></p></td><td class="cl-60574460"><p class="cl-605735c2"><span class="cl-60541964">external</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-60574456"><p class="cl-605735b8"><span class="cl-60541964">12</span></p></td><td class="cl-6057445e"><p class="cl-605735c2"><span class="cl-60541964">M</span></p></td><td class="cl-6057445f"><p class="cl-605735b8"><span class="cl-60541964">1.0</span></p></td><td class="cl-60574460"><p class="cl-605735c2"><span class="cl-60541964">external</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-60574456"><p class="cl-605735b8"><span class="cl-60541964">13</span></p></td><td class="cl-6057445e"><p class="cl-605735c2"><span class="cl-60541964">M</span></p></td><td class="cl-6057445f"><p class="cl-605735b8"><span class="cl-60541964">1.0</span></p></td><td class="cl-60574460"><p class="cl-605735c2"><span class="cl-60541964">external</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-60574456"><p class="cl-605735b8"><span class="cl-60541964">14</span></p></td><td class="cl-6057445e"><p class="cl-605735c2"><span class="cl-60541964">M</span></p></td><td class="cl-6057445f"><p class="cl-605735b8"><span class="cl-60541964">1.3</span></p></td><td class="cl-60574460"><p class="cl-605735c2"><span class="cl-60541964">external</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-60574456"><p class="cl-605735b8"><span class="cl-60541964">15</span></p></td><td class="cl-6057445e"><p class="cl-605735c2"><span class="cl-60541964">M</span></p></td><td class="cl-6057445f"><p class="cl-605735b8"><span class="cl-60541964">1.4</span></p></td><td class="cl-60574460"><p class="cl-605735c2"><span class="cl-60541964">external</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-60574456"><p class="cl-605735b8"><span class="cl-60541964">16</span></p></td><td class="cl-6057445e"><p class="cl-605735c2"><span class="cl-60541964">M</span></p></td><td class="cl-6057445f"><p class="cl-605735b8"><span class="cl-60541964">1.5</span></p></td><td class="cl-60574460"><p class="cl-605735c2"><span class="cl-60541964">external</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-60574456"><p class="cl-605735b8"><span class="cl-60541964">11</span></p></td><td class="cl-6057445e"><p class="cl-605735c2"><span class="cl-60541964">F</span></p></td><td class="cl-6057445f"><p class="cl-605735b8"><span class="cl-60541964">1.1</span></p></td><td class="cl-60574460"><p class="cl-605735c2"><span class="cl-60541964">external</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-60574456"><p class="cl-605735b8"><span class="cl-60541964">12</span></p></td><td class="cl-6057445e"><p class="cl-605735c2"><span class="cl-60541964">F</span></p></td><td class="cl-6057445f"><p class="cl-605735b8"><span class="cl-60541964">1.5</span></p></td><td class="cl-60574460"><p class="cl-605735c2"><span class="cl-60541964">external</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-60574456"><p class="cl-605735b8"><span class="cl-60541964">13</span></p></td><td class="cl-6057445e"><p class="cl-605735c2"><span class="cl-60541964">F</span></p></td><td class="cl-6057445f"><p class="cl-605735b8"><span class="cl-60541964">1.4</span></p></td><td class="cl-60574460"><p class="cl-605735c2"><span class="cl-60541964">external</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-60574456"><p class="cl-605735b8"><span class="cl-60541964">14</span></p></td><td class="cl-6057445e"><p class="cl-605735c2"><span class="cl-60541964">F</span></p></td><td class="cl-6057445f"><p class="cl-605735b8"><span class="cl-60541964">1.6</span></p></td><td class="cl-60574460"><p class="cl-605735c2"><span class="cl-60541964">external</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-60574456"><p class="cl-605735b8"><span class="cl-60541964">15</span></p></td><td class="cl-6057445e"><p class="cl-605735c2"><span class="cl-60541964">F</span></p></td><td class="cl-6057445f"><p class="cl-605735b8"><span class="cl-60541964">1.6</span></p></td><td class="cl-60574460"><p class="cl-605735c2"><span class="cl-60541964">external</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-60574468"><p class="cl-605735b8"><span class="cl-60541964">16</span></p></td><td class="cl-60574469"><p class="cl-605735c2"><span class="cl-60541964">F</span></p></td><td class="cl-6057446a"><p class="cl-605735b8"><span class="cl-60541964">1.5</span></p></td><td class="cl-6057446b"><p class="cl-605735c2"><span class="cl-60541964">external</span></p></td></tr></tbody></table></div>
</div>
<h3 id="structure-of-an-external-lookup-table">Structure of an external lookup table</h3>
<p>Obviously, the lookup table must have variables for gender, age and the CSC value to use. The values to use are set using these arguments:</p>
<ul>
<li><p><code>lookupGenderVarChar</code>: the <em>name</em> of the gender variable (must be character value, e.g. “Gender” or “gendvalue” or whatever!)</p></li>
<li><p><code>lookupAgeVarChar</code>: the <em>name</em> of the gender variable (must be character value again)</p></li>
<li><p><code>lookupCSCvarChar</code>: the <em>name</em> of the CSC variable (must be character value again)= “CSC”</p></li>
<li><p><code>lookupGenderF</code>: the <em>value</em> that in the gender variable marks female gender</p></li>
<li><p><code>lookupGenderM</code>: the <em>value</em> that in the gender variable marks male gender</p></li>
<li><p><code>lookupGenderO</code>: the <em>value</em> that in the gender variable marks other gender categories; this could be a vector of different values e.g. <code>c("Other", "non-binary")</code></p></li>
<li><p><code>checkExternalLookup</code>: if set to TRUE gets the function to print the lookup table it will use given those arguments you gave it</p></li>
</ul>
<p>This code shows the above table being used, and shown using <code>checkExternalLookup = TRUE</code></p>
<div class="layout-chunk" data-layout="l-body-outset">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/pkg/CECPfuns/man/lookupCSCgenderAndAge.html'>lookupCSCgenderAndAge</a></span><span class='op'>(</span>useInternalLookup <span class='op'>=</span> <span class='cn'>FALSE</span>,</span>
<span>                      lookupTableName <span class='op'>=</span> <span class='va'>tmpTibLookup2</span>,</span>
<span>                      lookupGenderVarChar <span class='op'>=</span> <span class='st'>"Gender"</span>,</span>
<span>                      lookupAgeVarChar <span class='op'>=</span> <span class='st'>"Age"</span>,</span>
<span>                      lookupGenderF <span class='op'>=</span> <span class='st'>"F"</span>,</span>
<span>                      lookupGenderM <span class='op'>=</span> <span class='st'>"M"</span>,</span>
<span>                      lookupGenderO <span class='op'>=</span> <span class='st'>"O"</span>,</span>
<span>                      lookupCSCvarChar <span class='op'>=</span> <span class='st'>"CSCval"</span>,</span>
<span>                      dataTableName <span class='op'>=</span> <span class='va'>tibData</span>, </span>
<span>                      dataGenderVarChar <span class='op'>=</span> <span class='st'>"Gender"</span>,</span>
<span>                      dataAgeVarChar <span class='op'>=</span> <span class='st'>"Age"</span>,</span>
<span>                      dataGenderF <span class='op'>=</span> <span class='st'>"F"</span>,</span>
<span>                      dataGenderM <span class='op'>=</span> <span class='st'>"M"</span>,</span>
<span>                      dataGenderO <span class='op'>=</span> <span class='st'>"O"</span>,</span>
<span>                      dataGenderNA <span class='op'>=</span> <span class='cn'>NA_character_</span>,</span>
<span>                      lookupRef <span class='op'>=</span> <span class='st'>"Twigg_et_al_2016"</span>,</span>
<span>                      outputCSCvarChar <span class='op'>=</span> <span class='st'>"CSC"</span>,</span>
<span>                      useClinScoring <span class='op'>=</span> <span class='cn'>FALSE</span>,</span>
<span>                      checkExternalLookup <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span> <span class='op'>-&gt;</span> <span class='va'>tmpTib</span></span></code></pre>
</div>
</details>
<pre><code>This is the referential mapping you are using

   Gender Age CSCval
1       M  11    2.9
2       M  12    1.0
3       M  13    1.0
4       M  14    1.3
5       M  15    1.4
6       M  16    1.5
7       F  11    1.1
8       F  12    1.5
9       F  13    1.4
10      F  14    1.6
11      F  15    1.6
12      F  16    1.5</code></pre>
</div>
<p>That shows that the silly lookup table with the CSC value of 2.9 will be used!</p>
<h2 id="get-details-of-your-chosen-internal-lookup">Get details of your chosen internal lookup</h2>
<p>Like <code>checkExternalLookup</code> there is an argument <code>checkInternalLookup</code> which prints out in full whatever internal lookup table you chose …</p>
<div class="layout-chunk" data-layout="l-body-outset">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/pkg/CECPfuns/man/lookupCSCgenderAndAge.html'>lookupCSCgenderAndAge</a></span><span class='op'>(</span>useInternalLookup <span class='op'>=</span> <span class='cn'>TRUE</span>,</span>
<span>             lookupGenderVarChar <span class='op'>=</span> <span class='st'>"Gender"</span>,</span>
<span>             lookupAgeVarChar <span class='op'>=</span> <span class='st'>"Age"</span>,</span>
<span>             lookupGenderF <span class='op'>=</span> <span class='st'>"F"</span>,</span>
<span>             lookupGenderM <span class='op'>=</span> <span class='st'>"M"</span>,</span>
<span>             lookupGenderO <span class='op'>=</span> <span class='st'>"O"</span>,</span>
<span>             checkInternalLookup <span class='op'>=</span> <span class='cn'>TRUE</span>,</span>
<span>             dataTableName <span class='op'>=</span> <span class='va'>tibData</span>, </span>
<span>             dataGenderVarChar <span class='op'>=</span> <span class='st'>"Gender"</span>,</span>
<span>             dataAgeVarChar <span class='op'>=</span> <span class='st'>"Age"</span>,</span>
<span>             dataGenderF <span class='op'>=</span> <span class='st'>"F"</span>,</span>
<span>             dataGenderM <span class='op'>=</span> <span class='st'>"M"</span>,</span>
<span>             dataGenderO <span class='op'>=</span> <span class='st'>"O"</span>,</span>
<span>             dataGenderNA <span class='op'>=</span> <span class='cn'>NA_character_</span>,</span>
<span>             lookupRef <span class='op'>=</span> <span class='st'>"Emily_PhD"</span>,</span>
<span>             outputCSCvarChar <span class='op'>=</span> <span class='st'>"CSC"</span>,</span>
<span>             useClinScoring <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>-&gt;</span> <span class='va'>tmpTib</span></span></code></pre>
</div>
</details>
<pre><code>This is the referential mapping you are using

# A tibble: 12 × 3
   Gender   Age   CSC
   &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt;
 1 M         11   1  
 2 M         12   1  
 3 M         13   1  
 4 M         14   1.3
 5 M         15   1.4
 6 M         16   1.5
 7 F         11   1.1
 8 F         12   1.5
 9 F         13   1.4
10 F         14   1.6
11 F         15   1.6
12 F         16   1.5</code></pre>
</div>
<h2 id="italian-yp-core-referential-csc-values">Italian YP-CORE referential CSC values</h2>
<p>This is just showing and checking the internal Italian data chosen using <code>lookupRef = "Di_Biase_et_al_2021"</code>. These CSC values are from Di Biase, R., Evans, C., Rebecchi, D., Baccari, F., Saltini, A., Bravi, E., Palmieri, G., &amp; Starace, F. (2021). Exploration of psychometric properties of the Italian version of the Core Young Person’s Clinical Outcomes in Routine Evaluation (YP-CORE). Research in Psychotherapy: Psychopathology, Process and Outcome, 24(2). <a href="https://doi.org/10.4081/ripppo.2021.554" class="uri">https://doi.org/10.4081/ripppo.2021.554</a>. Here I am just using <code>checkInternalLookup = TRUE</code> to show these lookup values.</p>
<div class="layout-chunk" data-layout="l-body-outset">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/pkg/CECPfuns/man/lookupCSCgenderAndAge.html'>lookupCSCgenderAndAge</a></span><span class='op'>(</span>useInternalLookup <span class='op'>=</span> <span class='cn'>TRUE</span>,</span>
<span>             lookupGenderVarChar <span class='op'>=</span> <span class='st'>"Gender"</span>,</span>
<span>             lookupAgeVarChar <span class='op'>=</span> <span class='st'>"Age"</span>,</span>
<span>             lookupGenderF <span class='op'>=</span> <span class='st'>"F"</span>,</span>
<span>             lookupGenderM <span class='op'>=</span> <span class='st'>"M"</span>,</span>
<span>             lookupGenderO <span class='op'>=</span> <span class='st'>"O"</span>,</span>
<span>             checkInternalLookup <span class='op'>=</span> <span class='cn'>TRUE</span>,</span>
<span>             dataTableName <span class='op'>=</span> <span class='va'>tibData</span>, </span>
<span>             dataGenderVarChar <span class='op'>=</span> <span class='st'>"Gender"</span>,</span>
<span>             dataAgeVarChar <span class='op'>=</span> <span class='st'>"Age"</span>,</span>
<span>             dataGenderF <span class='op'>=</span> <span class='st'>"F"</span>,</span>
<span>             dataGenderM <span class='op'>=</span> <span class='st'>"M"</span>,</span>
<span>             dataGenderO <span class='op'>=</span> <span class='st'>"O"</span>,</span>
<span>             dataGenderNA <span class='op'>=</span> <span class='cn'>NA_character_</span>,</span>
<span>             lookupRef <span class='op'>=</span> <span class='st'>"Di_Biase_et_al_2021"</span>,</span>
<span>             outputCSCvarChar <span class='op'>=</span> <span class='st'>"CSC"</span>,</span>
<span>             useClinScoring <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>-&gt;</span> <span class='va'>tmpTib</span></span></code></pre>
</div>
</details>
<pre><code>This is the referential mapping you are using

# A tibble: 14 × 3
   Gender   Age   CSC
   &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt;
 1 F         11  1.34
 2 F         12  1.34
 3 F         13  1.34
 4 F         14  1.34
 5 F         15  1.47
 6 F         16  1.47
 7 F         17  1.47
 8 M         11  1.18
 9 M         12  1.18
10 M         13  1.18
11 M         14  1.18
12 M         15  1.23
13 M         16  1.18
14 M         17  1.18</code></pre>
</div>
<h2 id="convenience-argument-showinternallookup">Convenience argument <code>showInternalLookup</code></h2>
<p><code>showInternalLookup</code> defaults to FALSE but if you set it to TRUE the function just prints out the full internal lookup table so you can see what is available (which I hope will gradually grow).</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/pkg/CECPfuns/man/lookupCSCgenderAndAge.html'>lookupCSCgenderAndAge</a></span><span class='op'>(</span>showInternalLookup <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span>n <span class='op'>=</span> <span class='cn'>Inf</span><span class='op'>)</span></span></code></pre>
</div>
</details>
<pre><code># A tibble: 38 × 4
   Ref                   Age Gender   CSC
   &lt;chr&gt;               &lt;dbl&gt; &lt;chr&gt;  &lt;dbl&gt;
 1 Emily_PhD              11 M       1   
 2 Emily_PhD              12 M       1   
 3 Emily_PhD              13 M       1   
 4 Emily_PhD              14 M       1.3 
 5 Emily_PhD              15 M       1.4 
 6 Emily_PhD              16 M       1.5 
 7 Emily_PhD              11 F       1.1 
 8 Emily_PhD              12 F       1.5 
 9 Emily_PhD              13 F       1.4 
10 Emily_PhD              14 F       1.6 
11 Emily_PhD              15 F       1.6 
12 Emily_PhD              16 F       1.5 
13 Twigg_et_al_2016       11 M       1.03
14 Twigg_et_al_2016       12 M       1.03
15 Twigg_et_al_2016       13 M       1.03
16 Twigg_et_al_2016       14 M       1.41
17 Twigg_et_al_2016       15 M       1.41
18 Twigg_et_al_2016       16 M       1.41
19 Twigg_et_al_2016       11 F       1.44
20 Twigg_et_al_2016       12 F       1.44
21 Twigg_et_al_2016       13 F       1.44
22 Twigg_et_al_2016       14 F       1.59
23 Twigg_et_al_2016       15 F       1.59
24 Twigg_et_al_2016       16 F       1.59
25 Di_Biase_et_al_2021    11 F       1.34
26 Di_Biase_et_al_2021    12 F       1.34
27 Di_Biase_et_al_2021    13 F       1.34
28 Di_Biase_et_al_2021    14 F       1.34
29 Di_Biase_et_al_2021    15 F       1.47
30 Di_Biase_et_al_2021    16 F       1.47
31 Di_Biase_et_al_2021    17 F       1.47
32 Di_Biase_et_al_2021    11 M       1.18
33 Di_Biase_et_al_2021    12 M       1.18
34 Di_Biase_et_al_2021    13 M       1.18
35 Di_Biase_et_al_2021    14 M       1.18
36 Di_Biase_et_al_2021    15 M       1.23
37 Di_Biase_et_al_2021    16 M       1.18
38 Di_Biase_et_al_2021    17 M       1.18</code></pre>
</div>
<p>As you see there, as you may want to take a copy of the table, the function returns the full lookup table as a tibble (a special class of data frame in R). Here I just asked for all of the tibble not just the first ten rows (the default with tibbles). To take a copy you do this.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/pkg/CECPfuns/man/lookupCSCgenderAndAge.html'>lookupCSCgenderAndAge</a></span><span class='op'>(</span>showInternalLookup <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span> <span class='op'>-&gt;</span> <span class='va'>tibCopyOfInternalLookup</span></span></code></pre>
</div>
</details>
</div>
<p>Yes, that shows nothing here as it has created a new tibble: <em>tibCopyOfInternalLookup</em>. Of course you can use any name you might want or you could pipe the output into any further processing you might want.</p>
<h1 id="to-do-list">To do list</h1>
<ul>
<li><p>Testthat code for the function in <a href="https://github.com/cpsyctc/CECPfuns">CECPfuns</a> not finished.</p></li>
<li><p>Next step is to use the function in a shiny app so people can upload their own data and have it coded with one of the internal lookup tables.</p></li>
<li><p>When I’ve got that working I will tweak that app or create another that will allow people to use their own lookup table (likely to be only by uploadking it as a CSV file).</p></li>
<li><p>Somewhere in this sequence I will also create a function <code>lookupCSCgender()</code> for the situation common to most measures for adults where age is not markedly affecting cutting points but where there there may be clearly different CSC values by gender. For that a simpler look up, just against gender, is needed.</p></li>
</ul>
<h1 id="epilogue">Epilogue</h1>
<p>Hm, aspects of this turned out to be much more challenging than I had imagined! At times it also proved much more repetitive and teadious than I’d imagined! I hope it does end up being useful.</p>
<h1 id="dates">Dates</h1>
<p>Started: c. 18.i.24.
Latest: 23.i.24 (first iteration uploaded to Rblog)</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<!--radix_placeholder_article_footer-->
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>


<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom">
  <h3 id="reuse">Reuse</h3>
  <p>Text and figures are licensed under Creative Commons Attribution <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a>. The figures that have been reused from other sources don't fall under this license and can be recognized by a note in their caption: "Figure from ...".</p>
  <h3 id="citation">Citation</h3>
  <p>For attribution, please cite this work as</p>
  <pre class="citation-appendix short">Evans (2024, Jan. 21). Chris (Evans) R SAFAQ: CSC by gender and age. Retrieved from https://www.psyctc.org/R_blog/posts/2024-01-21-lookupcsc2/</pre>
  <p>BibTeX citation</p>
  <pre class="citation-appendix long">@misc{evans2024csc,
  author = {Evans, Chris},
  title = {Chris (Evans) R SAFAQ: CSC by gender and age},
  url = {https://www.psyctc.org/R_blog/posts/2024-01-21-lookupcsc2/},
  year = {2024}
}</pre>
</div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
