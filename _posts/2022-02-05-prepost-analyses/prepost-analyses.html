<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ad0000; } /* Alert */
code span.an { color: #5e5e5e; } /* Annotation */
code span.at { } /* Attribute */
code span.bn { color: #ad0000; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007ba5; } /* ControlFlow */
code span.ch { color: #20794d; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #5e5e5e; } /* Comment */
code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
code span.dt { color: #ad0000; } /* DataType */
code span.dv { color: #ad0000; } /* DecVal */
code span.er { color: #ad0000; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #ad0000; } /* Float */
code span.fu { color: #4758ab; } /* Function */
code span.im { } /* Import */
code span.in { color: #5e5e5e; } /* Information */
code span.kw { color: #007ba5; } /* Keyword */
code span.op { color: #5e5e5e; } /* Operator */
code span.ot { color: #007ba5; } /* Other */
code span.pp { color: #ad0000; } /* Preprocessor */
code span.sc { color: #5e5e5e; } /* SpecialChar */
code span.ss { color: #20794d; } /* SpecialString */
code span.st { color: #20794d; } /* String */
code span.va { color: #111111; } /* Variable */
code span.vs { color: #20794d; } /* VerbatimString */
code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
</style>


  <!--radix_placeholder_meta_tags-->
  <title>Pre/post analyses</title>

  <meta property="description" itemprop="description" content="Teaching myself about pre/post therapy change analyses using R.&#10;Probably the first of a series of posts."/>


  <!--  https://schema.org/Article -->
  <meta property="article:published" itemprop="datePublished" content="2022-02-05"/>
  <meta property="article:created" itemprop="dateCreated" content="2022-02-05"/>
  <meta name="article:author" content="Chris Evans"/>

  <!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
  <meta property="og:title" content="Pre/post analyses"/>
  <meta property="og:type" content="article"/>
  <meta property="og:description" content="Teaching myself about pre/post therapy change analyses using R.&#10;Probably the first of a series of posts."/>
  <meta property="og:locale" content="en_US"/>

  <!--  https://dev.twitter.com/cards/types/summary -->
  <meta property="twitter:card" content="summary"/>
  <meta property="twitter:title" content="Pre/post analyses"/>
  <meta property="twitter:description" content="Teaching myself about pre/post therapy change analyses using R.&#10;Probably the first of a series of posts."/>

  <!--/radix_placeholder_meta_tags-->
  <!--radix_placeholder_rmarkdown_metadata-->

  <script type="text/json" id="radix-rmarkdown-metadata">
  {"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","description","base_url","preview","author","date","output"]}},"value":[{"type":"character","attributes":{},"value":["Pre/post analyses"]},{"type":"character","attributes":{},"value":["Teaching myself about pre/post therapy change analyses using R.\nProbably the first of a series of posts.\n"]},{"type":"character","attributes":{},"value":["https://www.psyctc.org/psyctc/Rblog/"]},{"type":"character","attributes":{},"value":["https://www.psyctc.org/psyctc/wp-content/uploads/2022/02/prepost1.png"]},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","url","affiliation","affiliation_url","orcid_id"]}},"value":[{"type":"character","attributes":{},"value":["Chris Evans"]},{"type":"character","attributes":{},"value":["https://www.psyctc.org/R_blog/"]},{"type":"character","attributes":{},"value":["PSYCTC.org"]},{"type":"character","attributes":{},"value":["https://www.psyctc.org/psyctc/"]},{"type":"character","attributes":{},"value":["0000-0002-4197-4202"]}]}]},{"type":"character","attributes":{},"value":["02-05-2022"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["distill::distill_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["toc","toc_depth","hightlight_downlit","self_contained","code_folding"]}},"value":[{"type":"logical","attributes":{},"value":[true]},{"type":"integer","attributes":{},"value":[4]},{"type":"logical","attributes":{},"value":[true]},{"type":"logical","attributes":{},"value":[false]},{"type":"logical","attributes":{},"value":[true]}]}]}]}
  </script>
  <!--/radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-resource-manifest">
  {"type":"character","attributes":{},"value":["prepost-analyses_files/anchor-4.2.2/anchor.min.js","prepost-analyses_files/bowser-1.9.3/bowser.min.js","prepost-analyses_files/distill-2.2.21/template.v2.js","prepost-analyses_files/figure-html5/baselineDist1-1.png","prepost-analyses_files/figure-html5/baselineDistAge-1.png","prepost-analyses_files/figure-html5/baselineDistAge2-1.png","prepost-analyses_files/figure-html5/baselineDistGend-1.png","prepost-analyses_files/figure-html5/baselineDistSessions-1.png","prepost-analyses_files/figure-html5/checkBaseline1-1.png","prepost-analyses_files/figure-html5/checkBaseline1-2.png","prepost-analyses_files/figure-html5/checkBaselineAge1-1.png","prepost-analyses_files/figure-html5/checkBaselineGender1-1.png","prepost-analyses_files/figure-html5/createData-1.png","prepost-analyses_files/figure-html5/createData-2.png","prepost-analyses_files/figure-html5/description1-1.png","prepost-analyses_files/figure-html5/description2-1.png","prepost-analyses_files/figure-html5/description3-1.png","prepost-analyses_files/figure-html5/generateLastScores-1.png","prepost-analyses_files/figure-html5/generateLastScores-2.png","prepost-analyses_files/figure-html5/generateLastScores-3.png","prepost-analyses_files/figure-html5/generateLastScores-4.png","prepost-analyses_files/figure-html5/generateLastScores-5.png","prepost-analyses_files/figure-html5/generateLastScores-6.png","prepost-analyses_files/figure-html5/generateLastScores-7.png","prepost-analyses_files/figure-html5/lastDist1-1.png","prepost-analyses_files/figure-html5/lastDistAge-1.png","prepost-analyses_files/figure-html5/lastDistAge2-1.png","prepost-analyses_files/figure-html5/lastDistGend-1.png","prepost-analyses_files/figure-html5/lastDistSessions-1.png","prepost-analyses_files/figure-html5/lm1-1.png","prepost-analyses_files/figure-html5/lm1-2.png","prepost-analyses_files/figure-html5/lm1-3.png","prepost-analyses_files/figure-html5/lmAge2-1.png","prepost-analyses_files/figure-html5/plotChange1-1.png","prepost-analyses_files/figure-html5/plotChange1-2.png","prepost-analyses_files/figure-html5/plotChange1-3.png","prepost-analyses_files/figure-html5/plotChange1-4.png","prepost-analyses_files/figure-html5/plotChange1-5.png","prepost-analyses_files/figure-html5/plotChange1-6.png","prepost-analyses_files/figure-html5/plotChange1-7.png","prepost-analyses_files/figure-html5/plotchange1b-1.png","prepost-analyses_files/figure-html5/plotChange2-1.png","prepost-analyses_files/figure-html5/plotChange3-1.png","prepost-analyses_files/figure-html5/plotChange3b-1.png","prepost-analyses_files/figure-html5/plotChange4-1.png","prepost-analyses_files/figure-html5/plotChange5-1.png","prepost-analyses_files/figure-html5/plotChange6-1.png","prepost-analyses_files/figure-html5/plotChange7-1.png","prepost-analyses_files/header-attrs-2.11/header-attrs.js","prepost-analyses_files/jquery-3.6.0/jquery-3.6.0.js","prepost-analyses_files/jquery-3.6.0/jquery-3.6.0.min.js","prepost-analyses_files/jquery-3.6.0/jquery-3.6.0.min.map","prepost-analyses_files/popper-2.6.0/popper.min.js","prepost-analyses_files/tippy-6.2.7/tippy-bundle.umd.min.js","prepost-analyses_files/tippy-6.2.7/tippy-light-border.css","prepost-analyses_files/tippy-6.2.7/tippy.css","prepost-analyses_files/tippy-6.2.7/tippy.umd.min.js","prepost-analyses_files/webcomponents-2.0.0/webcomponents.js","prepost1.png"]}
  </script>
  <!--radix_placeholder_navigation_in_header-->
  <!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

  <style type="text/css">

  body {
    background-color: white;
  }

  .pandoc-table {
    width: 100%;
  }

  .pandoc-table>caption {
    margin-bottom: 10px;
  }

  .pandoc-table th:not([align]) {
    text-align: left;
  }

  .pagedtable-footer {
    font-size: 15px;
  }

  d-byline .byline {
    grid-template-columns: 2fr 2fr;
  }

  d-byline .byline h3 {
    margin-block-start: 1.5em;
  }

  d-byline .byline .authors-affiliations h3 {
    margin-block-start: 0.5em;
  }

  .authors-affiliations .orcid-id {
    width: 16px;
    height:16px;
    margin-left: 4px;
    margin-right: 4px;
    vertical-align: middle;
    padding-bottom: 2px;
  }

  d-title .dt-tags {
    margin-top: 1em;
    grid-column: text;
  }

  .dt-tags .dt-tag {
    text-decoration: none;
    display: inline-block;
    color: rgba(0,0,0,0.6);
    padding: 0em 0.4em;
    margin-right: 0.5em;
    margin-bottom: 0.4em;
    font-size: 70%;
    border: 1px solid rgba(0,0,0,0.2);
    border-radius: 3px;
    text-transform: uppercase;
    font-weight: 500;
  }

  d-article table.gt_table td,
  d-article table.gt_table th {
    border-bottom: none;
  }

  .html-widget {
    margin-bottom: 2.0em;
  }

  .l-screen-inset {
    padding-right: 16px;
  }

  .l-screen .caption {
    margin-left: 10px;
  }

  .shaded {
    background: rgb(247, 247, 247);
    padding-top: 20px;
    padding-bottom: 20px;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }

  .shaded .html-widget {
    margin-bottom: 0;
    border: 1px solid rgba(0, 0, 0, 0.1);
  }

  .shaded .shaded-content {
    background: white;
  }

  .text-output {
    margin-top: 0;
    line-height: 1.5em;
  }

  .hidden {
    display: none !important;
  }

  d-article {
    padding-top: 2.5rem;
    padding-bottom: 30px;
  }

  d-appendix {
    padding-top: 30px;
  }

  d-article>p>img {
    width: 100%;
  }

  d-article h2 {
    margin: 1rem 0 1.5rem 0;
  }

  d-article h3 {
    margin-top: 1.5rem;
  }

  d-article iframe {
    border: 1px solid rgba(0, 0, 0, 0.1);
    margin-bottom: 2.0em;
    width: 100%;
  }

  /* Tweak code blocks */

  d-article div.sourceCode code,
  d-article pre code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  d-article pre,
  d-article div.sourceCode,
  d-article div.sourceCode pre {
    overflow: auto;
  }

  d-article div.sourceCode {
    background-color: white;
  }

  d-article div.sourceCode pre {
    padding-left: 10px;
    font-size: 12px;
    border-left: 2px solid rgba(0,0,0,0.1);
  }

  d-article pre {
    font-size: 12px;
    color: black;
    background: none;
    margin-top: 0;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;

    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;

    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }

  d-article pre a {
    border-bottom: none;
  }

  d-article pre a:hover {
    border-bottom: none;
    text-decoration: underline;
  }

  d-article details {
    grid-column: text;
    margin-bottom: 0.8em;
  }

  @media(min-width: 768px) {

  d-article pre,
  d-article div.sourceCode,
  d-article div.sourceCode pre {
    overflow: visible !important;
  }

  d-article div.sourceCode pre {
    padding-left: 18px;
    font-size: 14px;
  }

  d-article pre {
    font-size: 14px;
  }

  }

  figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }

  /* CSS for d-contents */

  .d-contents {
    grid-column: text;
    color: rgba(0,0,0,0.8);
    font-size: 0.9em;
    padding-bottom: 1em;
    margin-bottom: 1em;
    padding-bottom: 0.5em;
    margin-bottom: 1em;
    padding-left: 0.25em;
    justify-self: start;
  }

  @media(min-width: 1000px) {
    .d-contents.d-contents-float {
      height: 0;
      grid-column-start: 1;
      grid-column-end: 4;
      justify-self: center;
      padding-right: 3em;
      padding-left: 2em;
    }
  }

  .d-contents nav h3 {
    font-size: 18px;
    margin-top: 0;
    margin-bottom: 1em;
  }

  .d-contents li {
    list-style-type: none
  }

  .d-contents nav > ul {
    padding-left: 0;
  }

  .d-contents ul {
    padding-left: 1em
  }

  .d-contents nav ul li {
    margin-top: 0.6em;
    margin-bottom: 0.2em;
  }

  .d-contents nav a {
    font-size: 13px;
    border-bottom: none;
    text-decoration: none
    color: rgba(0, 0, 0, 0.8);
  }

  .d-contents nav a:hover {
    text-decoration: underline solid rgba(0, 0, 0, 0.6)
  }

  .d-contents nav > ul > li > a {
    font-weight: 600;
  }

  .d-contents nav > ul > li > ul {
    font-weight: inherit;
  }

  .d-contents nav > ul > li > ul > li {
    margin-top: 0.2em;
  }


  .d-contents nav ul {
    margin-top: 0;
    margin-bottom: 0.25em;
  }

  .d-article-with-toc h2:nth-child(2) {
    margin-top: 0;
  }


  /* Figure */

  .figure {
    position: relative;
    margin-bottom: 2.5em;
    margin-top: 1.5em;
  }

  .figure img {
    width: 100%;
  }

  .figure .caption {
    color: rgba(0, 0, 0, 0.6);
    font-size: 12px;
    line-height: 1.5em;
  }

  .figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }

  .figure .caption a {
    color: rgba(0, 0, 0, 0.6);
  }

  .figure .caption b,
  .figure .caption strong, {
    font-weight: 600;
    color: rgba(0, 0, 0, 1.0);
  }

  /* Citations */

  d-article .citation {
    color: inherit;
    cursor: inherit;
  }

  div.hanging-indent{
    margin-left: 1em; text-indent: -1em;
  }

  /* Citation hover box */

  .tippy-box[data-theme~=light-border] {
    background-color: rgba(250, 250, 250, 0.95);
  }

  .tippy-content > p {
    margin-bottom: 0;
    padding: 2px;
  }


  /* Tweak 1000px media break to show more text */

  @media(min-width: 1000px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 16px;
    }

    .grid {
      grid-column-gap: 16px;
    }

    d-article {
      font-size: 1.06rem;
      line-height: 1.7em;
    }
    figure .caption, .figure .caption, figure figcaption {
      font-size: 13px;
    }
  }

  @media(min-width: 1180px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 32px;
    }

    .grid {
      grid-column-gap: 32px;
    }
  }


  /* Get the citation styles for the appendix (not auto-injected on render since
     we do our own rendering of the citation appendix) */

  d-appendix .citation-appendix,
  .d-appendix .citation-appendix {
    font-size: 11px;
    line-height: 15px;
    border-left: 1px solid rgba(0, 0, 0, 0.1);
    padding-left: 18px;
    border: 1px solid rgba(0,0,0,0.1);
    background: rgba(0, 0, 0, 0.02);
    padding: 10px 18px;
    border-radius: 3px;
    color: rgba(150, 150, 150, 1);
    overflow: hidden;
    margin-top: -12px;
    white-space: pre-wrap;
    word-wrap: break-word;
  }

  /* Include appendix styles here so they can be overridden */

  d-appendix {
    contain: layout style;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-top: 60px;
    margin-bottom: 0;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    color: rgba(0,0,0,0.5);
    padding-top: 60px;
    padding-bottom: 48px;
  }

  d-appendix h3 {
    grid-column: page-start / text-start;
    font-size: 15px;
    font-weight: 500;
    margin-top: 1em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.65);
  }

  d-appendix h3 + * {
    margin-top: 1em;
  }

  d-appendix ol {
    padding: 0 0 0 15px;
  }

  @media (min-width: 768px) {
    d-appendix ol {
      padding: 0 0 0 30px;
      margin-left: -30px;
    }
  }

  d-appendix li {
    margin-bottom: 1em;
  }

  d-appendix a {
    color: rgba(0, 0, 0, 0.6);
  }

  d-appendix > * {
    grid-column: text;
  }

  d-appendix > d-footnote-list,
  d-appendix > d-citation-list,
  d-appendix > distill-appendix {
    grid-column: screen;
  }

  /* Include footnote styles here so they can be overridden */

  d-footnote-list {
    contain: layout style;
  }

  d-footnote-list > * {
    grid-column: text;
  }

  d-footnote-list a.footnote-backlink {
    color: rgba(0,0,0,0.3);
    padding-left: 0.5em;
  }



  /* Anchor.js */

  .anchorjs-link {
    /*transition: all .25s linear; */
    text-decoration: none;
    border-bottom: none;
  }
  *:hover > .anchorjs-link {
    margin-left: -1.125em !important;
    text-decoration: none;
    border-bottom: none;
  }

  /* Social footer */

  .social_footer {
    margin-top: 30px;
    margin-bottom: 0;
    color: rgba(0,0,0,0.67);
  }

  .disqus-comments {
    margin-right: 30px;
  }

  .disqus-comment-count {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
    cursor: pointer;
  }

  #disqus_thread {
    margin-top: 30px;
  }

  .article-sharing a {
    border-bottom: none;
    margin-right: 8px;
  }

  .article-sharing a:hover {
    border-bottom: none;
  }

  .sidebar-section.subscribe {
    font-size: 12px;
    line-height: 1.6em;
  }

  .subscribe p {
    margin-bottom: 0.5em;
  }


  .article-footer .subscribe {
    font-size: 15px;
    margin-top: 45px;
  }


  .sidebar-section.custom {
    font-size: 12px;
    line-height: 1.6em;
  }

  .custom p {
    margin-bottom: 0.5em;
  }

  /* Styles for listing layout (hide title) */
  .layout-listing d-title, .layout-listing .d-title {
    display: none;
  }

  /* Styles for posts lists (not auto-injected) */


  .posts-with-sidebar {
    padding-left: 45px;
    padding-right: 45px;
  }

  .posts-list .description h2,
  .posts-list .description p {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  }

  .posts-list .description h2 {
    font-weight: 700;
    border-bottom: none;
    padding-bottom: 0;
  }

  .posts-list h2.post-tag {
    border-bottom: 1px solid rgba(0, 0, 0, 0.2);
    padding-bottom: 12px;
  }
  .posts-list {
    margin-top: 60px;
    margin-bottom: 24px;
  }

  .posts-list .post-preview {
    text-decoration: none;
    overflow: hidden;
    display: block;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    padding: 24px 0;
  }

  .post-preview-last {
    border-bottom: none !important;
  }

  .posts-list .posts-list-caption {
    grid-column: screen;
    font-weight: 400;
  }

  .posts-list .post-preview h2 {
    margin: 0 0 6px 0;
    line-height: 1.2em;
    font-style: normal;
    font-size: 24px;
  }

  .posts-list .post-preview p {
    margin: 0 0 12px 0;
    line-height: 1.4em;
    font-size: 16px;
  }

  .posts-list .post-preview .thumbnail {
    box-sizing: border-box;
    margin-bottom: 24px;
    position: relative;
    max-width: 500px;
  }
  .posts-list .post-preview img {
    width: 100%;
    display: block;
  }

  .posts-list .metadata {
    font-size: 12px;
    line-height: 1.4em;
    margin-bottom: 18px;
  }

  .posts-list .metadata > * {
    display: inline-block;
  }

  .posts-list .metadata .publishedDate {
    margin-right: 2em;
  }

  .posts-list .metadata .dt-authors {
    display: block;
    margin-top: 0.3em;
    margin-right: 2em;
  }

  .posts-list .dt-tags {
    display: block;
    line-height: 1em;
  }

  .posts-list .dt-tags .dt-tag {
    display: inline-block;
    color: rgba(0,0,0,0.6);
    padding: 0.3em 0.4em;
    margin-right: 0.2em;
    margin-bottom: 0.4em;
    font-size: 60%;
    border: 1px solid rgba(0,0,0,0.2);
    border-radius: 3px;
    text-transform: uppercase;
    font-weight: 500;
  }

  .posts-list img {
    opacity: 1;
  }

  .posts-list img[data-src] {
    opacity: 0;
  }

  .posts-more {
    clear: both;
  }


  .posts-sidebar {
    font-size: 16px;
  }

  .posts-sidebar h3 {
    font-size: 16px;
    margin-top: 0;
    margin-bottom: 0.5em;
    font-weight: 400;
    text-transform: uppercase;
  }

  .sidebar-section {
    margin-bottom: 30px;
  }

  .categories ul {
    list-style-type: none;
    margin: 0;
    padding: 0;
  }

  .categories li {
    color: rgba(0, 0, 0, 0.8);
    margin-bottom: 0;
  }

  .categories li>a {
    border-bottom: none;
  }

  .categories li>a:hover {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  }

  .categories .active {
    font-weight: 600;
  }

  .categories .category-count {
    color: rgba(0, 0, 0, 0.4);
  }


  @media(min-width: 768px) {
    .posts-list .post-preview h2 {
      font-size: 26px;
    }
    .posts-list .post-preview .thumbnail {
      float: right;
      width: 30%;
      margin-bottom: 0;
    }
    .posts-list .post-preview .description {
      float: left;
      width: 45%;
    }
    .posts-list .post-preview .metadata {
      float: left;
      width: 20%;
      margin-top: 8px;
    }
    .posts-list .post-preview p {
      margin: 0 0 12px 0;
      line-height: 1.5em;
      font-size: 16px;
    }
    .posts-with-sidebar .posts-list {
      float: left;
      width: 75%;
    }
    .posts-with-sidebar .posts-sidebar {
      float: right;
      width: 20%;
      margin-top: 60px;
      padding-top: 24px;
      padding-bottom: 24px;
    }
  }


  /* Improve display for browsers without grid (IE/Edge <= 15) */

  .downlevel {
    line-height: 1.6em;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
    margin: 0;
  }

  .downlevel .d-title {
    padding-top: 6rem;
    padding-bottom: 1.5rem;
  }

  .downlevel .d-title h1 {
    font-size: 50px;
    font-weight: 700;
    line-height: 1.1em;
    margin: 0 0 0.5rem;
  }

  .downlevel .d-title p {
    font-weight: 300;
    font-size: 1.2rem;
    line-height: 1.55em;
    margin-top: 0;
  }

  .downlevel .d-byline {
    padding-top: 0.8em;
    padding-bottom: 0.8em;
    font-size: 0.8rem;
    line-height: 1.8em;
  }

  .downlevel .section-separator {
    border: none;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
  }

  .downlevel .d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
    padding-top: 1rem;
    padding-bottom: 2rem;
  }


  .downlevel .d-appendix {
    padding-left: 0;
    padding-right: 0;
    max-width: none;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.5);
    padding-top: 40px;
    padding-bottom: 48px;
  }

  .downlevel .footnotes ol {
    padding-left: 13px;
  }

  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
    padding-left: 40px;
    padding-right: 40px;
  }

  @media(min-width: 768px) {
    .downlevel .base-grid,
    .downlevel .distill-header,
    .downlevel .d-title,
    .downlevel .d-abstract,
    .downlevel .d-article,
    .downlevel .d-appendix,
    .downlevel .distill-appendix,
    .downlevel .d-byline,
    .downlevel .d-footnote-list,
    .downlevel .d-citation-list,
    .downlevel .distill-footer,
    .downlevel .appendix-bottom,
    .downlevel .posts-container {
    padding-left: 150px;
    padding-right: 150px;
    max-width: 900px;
  }
  }

  .downlevel pre code {
    display: block;
    border-left: 2px solid rgba(0, 0, 0, .1);
    padding: 0 0 0 20px;
    font-size: 14px;
  }

  .downlevel code, .downlevel pre {
    color: black;
    background: none;
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;

    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;

    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }

  .downlevel .posts-list .post-preview {
    color: inherit;
  }



  </style>

  <script type="application/javascript">

  function is_downlevel_browser() {
    if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                   window.navigator.userAgent)) {
      return true;
    } else {
      return window.load_distill_framework === undefined;
    }
  }

  // show body when load is complete
  function on_load_complete() {

    // add anchors
    if (window.anchors) {
      window.anchors.options.placement = 'left';
      window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
    }


    // set body to visible
    document.body.style.visibility = 'visible';

    // force redraw for leaflet widgets
    if (window.HTMLWidgets) {
      var maps = window.HTMLWidgets.findAll(".leaflet");
      $.each(maps, function(i, el) {
        var map = this.getMap();
        map.invalidateSize();
        map.eachLayer(function(layer) {
          if (layer instanceof L.TileLayer)
            layer.redraw();
        });
      });
    }

    // trigger 'shown' so htmlwidgets resize
    $('d-article').trigger('shown');
  }

  function init_distill() {

    init_common();

    // create front matter
    var front_matter = $('<d-front-matter></d-front-matter>');
    $('#distill-front-matter').wrap(front_matter);

    // create d-title
    $('.d-title').changeElementType('d-title');

    // create d-byline
    var byline = $('<d-byline></d-byline>');
    $('.d-byline').replaceWith(byline);

    // create d-article
    var article = $('<d-article></d-article>');
    $('.d-article').wrap(article).children().unwrap();

    // move posts container into article
    $('.posts-container').appendTo($('d-article'));

    // create d-appendix
    $('.d-appendix').changeElementType('d-appendix');

    // flag indicating that we have appendix items
    var appendix = $('.appendix-bottom').children('h3').length > 0;

    // replace footnotes with <d-footnote>
    $('.footnote-ref').each(function(i, val) {
      appendix = true;
      var href = $(this).attr('href');
      var id = href.replace('#', '');
      var fn = $('#' + id);
      var fn_p = $('#' + id + '>p');
      fn_p.find('.footnote-back').remove();
      var text = fn_p.html();
      var dtfn = $('<d-footnote></d-footnote>');
      dtfn.html(text);
      $(this).replaceWith(dtfn);
    });
    // remove footnotes
    $('.footnotes').remove();

    // move refs into #references-listing
    $('#references-listing').replaceWith($('#refs'));

    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      var id = $(this).attr('id');
      $('.d-contents a[href="#' + id + '"]').parent().remove();
      appendix = true;
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
    });

    // show d-appendix if we have appendix content
    $("d-appendix").css('display', appendix ? 'grid' : 'none');

    // localize layout chunks to just output
    $('.layout-chunk').each(function(i, val) {

      // capture layout
      var layout = $(this).attr('data-layout');

      // apply layout to markdown level block elements
      var elements = $(this).children().not('details, div.sourceCode, pre, script');
      elements.each(function(i, el) {
        var layout_div = $('<div class="' + layout + '"></div>');
        if (layout_div.hasClass('shaded')) {
          var shaded_content = $('<div class="shaded-content"></div>');
          $(this).wrap(shaded_content);
          $(this).parent().wrap(layout_div);
        } else {
          $(this).wrap(layout_div);
        }
      });


      // unwrap the layout-chunk div
      $(this).children().unwrap();
    });

    // remove code block used to force  highlighting css
    $('.distill-force-highlighting-css').parent().remove();

    // remove empty line numbers inserted by pandoc when using a
    // custom syntax highlighting theme
    $('code.sourceCode a:empty').remove();

    // load distill framework
    load_distill_framework();

    // wait for window.distillRunlevel == 4 to do post processing
    function distill_post_process() {

      if (!window.distillRunlevel || window.distillRunlevel < 4)
        return;

      // hide author/affiliations entirely if we have no authors
      var front_matter = JSON.parse($("#distill-front-matter").html());
      var have_authors = front_matter.authors && front_matter.authors.length > 0;
      if (!have_authors)
        $('d-byline').addClass('hidden');

      // article with toc class
      $('.d-contents').parent().addClass('d-article-with-toc');

      // strip links that point to #
      $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

      // add orcid ids
      $('.authors-affiliations').find('.author').each(function(i, el) {
        var orcid_id = front_matter.authors[i].orcidID;
        if (orcid_id) {
          var a = $('<a></a>');
          a.attr('href', 'https://orcid.org/' + orcid_id);
          var img = $('<img></img>');
          img.addClass('orcid-id');
          img.attr('alt', 'ORCID ID');
          img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
          a.append(img);
          $(this).append(a);
        }
      });

      // hide elements of author/affiliations grid that have no value
      function hide_byline_column(caption) {
        $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
      }

      // affiliations
      var have_affiliations = false;
      for (var i = 0; i<front_matter.authors.length; ++i) {
        var author = front_matter.authors[i];
        if (author.affiliation !== "&nbsp;") {
          have_affiliations = true;
          break;
        }
      }
      if (!have_affiliations)
        $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

      // published date
      if (!front_matter.publishedDate)
        hide_byline_column("Published");

      // document object identifier
      var doi = $('d-byline').find('h3:contains("DOI")');
      var doi_p = doi.next().empty();
      if (!front_matter.doi) {
        // if we have a citation and valid citationText then link to that
        if ($('#citation').length > 0 && front_matter.citationText) {
          doi.html('Citation');
          $('<a href="#citation"></a>')
            .text(front_matter.citationText)
            .appendTo(doi_p);
        } else {
          hide_byline_column("DOI");
        }
      } else {
        $('<a></a>')
           .attr('href', "https://doi.org/" + front_matter.doi)
           .html(front_matter.doi)
           .appendTo(doi_p);
      }

       // change plural form of authors/affiliations
      if (front_matter.authors.length === 1) {
        var grid = $('.authors-affiliations');
        grid.children('h3:contains("Authors")').text('Author');
        grid.children('h3:contains("Affiliations")').text('Affiliation');
      }

      // remove d-appendix and d-footnote-list local styles
      $('d-appendix > style:first-child').remove();
      $('d-footnote-list > style:first-child').remove();

      // move appendix-bottom entries to the bottom
      $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
      $('.appendix-bottom').remove();

      // hoverable references
      $('span.citation[data-cites]').each(function() {
        var refs = $(this).attr('data-cites').split(" ");
        var refHtml = refs.map(function(ref) {
          return "<p>" + $('#ref-' + ref).html() + "</p>";
        }).join("\n");
        window.tippy(this, {
          allowHTML: true,
          content: refHtml,
          maxWidth: 500,
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        });
      });

      // clear polling timer
      clearInterval(tid);

      // show body now that everything is ready
      on_load_complete();
    }

    var tid = setInterval(distill_post_process, 50);
    distill_post_process();

  }

  function init_downlevel() {

    init_common();

     // insert hr after d-title
    $('.d-title').after($('<hr class="section-separator"/>'));

    // check if we have authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;

    // manage byline/border
    if (!have_authors)
      $('.d-byline').remove();
    $('.d-byline').after($('<hr class="section-separator"/>'));
    $('.d-byline a').remove();

    // remove toc
    $('.d-contents').remove();

    // move appendix elements
    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
    });


    // inject headers into references and footnotes
    var refs_header = $('<h3></h3>');
    refs_header.text('References');
    $('#refs').prepend(refs_header);

    var footnotes_header = $('<h3></h3');
    footnotes_header.text('Footnotes');
    $('.footnotes').children('hr').first().replaceWith(footnotes_header);

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // remove appendix if it's empty
    if ($('.d-appendix').children().length === 0)
      $('.d-appendix').remove();

    // prepend separator above appendix
    $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

    // trim code
    $('pre>code').each(function(i, val) {
      $(this).html($.trim($(this).html()));
    });

    // move posts-container right before article
    $('.posts-container').insertBefore($('.d-article'));

    $('body').addClass('downlevel');

    on_load_complete();
  }


  function init_common() {

    // jquery plugin to change element types
    (function($) {
      $.fn.changeElementType = function(newType) {
        var attrs = {};

        $.each(this[0].attributes, function(idx, attr) {
          attrs[attr.nodeName] = attr.nodeValue;
        });

        this.replaceWith(function() {
          return $("<" + newType + "/>", attrs).append($(this).contents());
        });
      };
    })(jQuery);

    // prevent underline for linked images
    $('a > img').parent().css({'border-bottom' : 'none'});

    // mark non-body figures created by knitr chunks as 100% width
    $('.layout-chunk').each(function(i, val) {
      var figures = $(this).find('img, .html-widget');
      if ($(this).attr('data-layout') !== "l-body") {
        figures.css('width', '100%');
      } else {
        figures.css('max-width', '100%');
        figures.filter("[width]").each(function(i, val) {
          var fig = $(this);
          fig.css('width', fig.attr('width') + 'px');
        });

      }
    });

    // auto-append index.html to post-preview links in file: protocol
    // and in rstudio ide preview
    $('.post-preview').each(function(i, val) {
      if (window.location.protocol === "file:")
        $(this).attr('href', $(this).attr('href') + "index.html");
    });

    // get rid of index.html references in header
    if (window.location.protocol !== "file:") {
      $('.distill-site-header a[href]').each(function(i,val) {
        $(this).attr('href', $(this).attr('href').replace("index.html", "./"));
      });
    }

    // add class to pandoc style tables
    $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
    $('.kable-table').children('table').addClass('pandoc-table');

    // add figcaption style to table captions
    $('caption').parent('table').addClass("figcaption");

    // initialize posts list
    if (window.init_posts_list)
      window.init_posts_list();

    // implmement disqus comment link
    $('.disqus-comment-count').click(function() {
      window.headroom_prevent_pin = true;
      $('#disqus_thread').toggleClass('hidden');
      if (!$('#disqus_thread').hasClass('hidden')) {
        var offset = $(this).offset();
        $(window).resize();
        $('html, body').animate({
          scrollTop: offset.top - 35
        });
      }
    });
  }

  document.addEventListener('DOMContentLoaded', function() {
    if (is_downlevel_browser())
      init_downlevel();
    else
      window.addEventListener('WebComponentsReady', init_distill);
  });

  </script>

  <!--/radix_placeholder_distill-->
  <script src="prepost-analyses_files/header-attrs-2.11/header-attrs.js"></script>
  <script src="prepost-analyses_files/jquery-3.6.0/jquery-3.6.0.min.js"></script>
  <script src="prepost-analyses_files/popper-2.6.0/popper.min.js"></script>
  <link href="prepost-analyses_files/tippy-6.2.7/tippy.css" rel="stylesheet" />
  <link href="prepost-analyses_files/tippy-6.2.7/tippy-light-border.css" rel="stylesheet" />
  <script src="prepost-analyses_files/tippy-6.2.7/tippy.umd.min.js"></script>
  <script src="prepost-analyses_files/anchor-4.2.2/anchor.min.js"></script>
  <script src="prepost-analyses_files/bowser-1.9.3/bowser.min.js"></script>
  <script src="prepost-analyses_files/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="prepost-analyses_files/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
  <!--/radix_placeholder_site_in_header-->


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"Pre/post analyses","description":"Teaching myself about pre/post therapy change analyses using R.\nProbably the first of a series of posts.","authors":[{"author":"Chris Evans","authorURL":"https://www.psyctc.org/R_blog/","affiliation":"PSYCTC.org","affiliationURL":"https://www.psyctc.org/psyctc/","orcidID":"0000-0002-4197-4202"}],"publishedDate":"2022-02-05T00:00:00.000+01:00","citationText":"Evans, 2022"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>Pre/post analyses</h1>
<!--radix_placeholder_categories-->
<!--/radix_placeholder_categories-->
<p><p>Teaching myself about pre/post therapy change analyses using R. Probably the first of a series of posts.</p></p>
</div>

<div class="d-byline">
  Chris Evans <a href="https://www.psyctc.org/R_blog/" class="uri">https://www.psyctc.org/R_blog/</a> (PSYCTC.org)<a href="https://www.psyctc.org/psyctc/" class="uri">https://www.psyctc.org/psyctc/</a>
  
<br/>02-05-2022
</div>

<div class="d-article">
<div class="d-contents d-contents-float">
<nav class="l-text toc figcaption" id="TOC">
<h3>Contents</h3>
<ul>
<li><a href="#breakdown">Breakdown</a>
<ul>
<li><a href="#gender">Gender</a></li>
<li><a href="#age">Age</a></li>
<li><a href="#numbers-of-sessions">Numbers of sessions</a></li>
</ul></li>
<li><a href="#check-that-ive-created-roughly-the-baseline-scores-i-wanted">Check that I’ve created roughly the baseline scores I wanted</a>
<ul>
<li><a href="#check-distributions-of-scores">Check distributions of scores</a></li>
<li><a href="#gender-1">Gender</a></li>
<li><a href="#age-1">Age</a></li>
</ul></li>
<li><a href="#check-on-change-scores-ive-created">Check on change scores I’ve created</a></li>
<li><a href="#what-about-change-scores-themselves">What about change scores themselves?</a>
<ul>
<li><a href="#age-2">Age</a></li>
</ul></li>
<li><a href="#what-about-linear-decomposition-of-effects">What about linear decomposition of effects?</a>
<ul>
<li><a href="#start-over-from-simplest-model-and-build-up">Start over from simplest model and build up</a></li>
</ul></li>
</ul>
</nav>
</div>
<p><em>Started 5.ii.22, update 6.ii.22, still work in progress but worth mounting to illustrate some of the issues</em></p>
<p>I was being very slow talking with <a href="https://www.researchgate.net/project/Young-Persons-Clinical-Outcomes-in-Routine-Evaluation-YP-CORE-Scale-psychometric-properties-and-utility">Emily</a> (<strong>Dr.</strong> Blackshaw now) about some pre/post analyses she is doing so I realised I should take my ageing brain for some gentle walking pace exercise!</p>
<p>Her dataset is fairly large and has first and last session CORE scores (<a href="https://www.coresystemtrust.org.uk/instruments/core-10-information/">CORE-10</a> or <a href="https://www.coresystemtrust.org.uk/instruments/yp-core-information/">YP-CORE</a>, analysing each dataset separately). She has been asked to look at the impacts on change of the numbers of sessions attended, gender and age.</p>
<p>This code block generates the baseline scores. I’m using Gaussian distributions which is just one of the many unrealistic aspects of this. However, I’m really doing this to explore different ways of displaying the effects and not aspiring to verisimilitude!</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>### these vectors create population proportions from which to sample with sample()</span>
<span class='va'>vecSessions</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='fl'>2</span>, <span class='fl'>40</span><span class='op'>)</span>, <span class='co'># I have made these up, I have no idea how realistic they are</span>
                 <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='fl'>3</span>, <span class='fl'>30</span><span class='op'>)</span>,
                 <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='fl'>4</span>, <span class='fl'>20</span><span class='op'>)</span>,
                 <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='fl'>3</span>, <span class='fl'>15</span><span class='op'>)</span>,
                 <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='fl'>4</span>, <span class='fl'>10</span><span class='op'>)</span>,
                 <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='fl'>5</span>, <span class='fl'>8</span><span class='op'>)</span>,
                 <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='fl'>6</span>, <span class='fl'>7</span><span class='op'>)</span>,
                 <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='fl'>7</span>, <span class='fl'>5</span><span class='op'>)</span>,
                 <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='fl'>8</span>, <span class='fl'>3</span><span class='op'>)</span>,
                 <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='fl'>9</span>, <span class='fl'>2</span><span class='op'>)</span>,
                 <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='fl'>10</span>, <span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>vecAge</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='fl'>15</span>, <span class='fl'>20</span><span class='op'>)</span>, <span class='co'># ditto</span>
            <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='fl'>16</span>, <span class='fl'>25</span><span class='op'>)</span>,
            <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='fl'>17</span>, <span class='fl'>25</span><span class='op'>)</span>,
            <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='fl'>18</span>, <span class='fl'>30</span><span class='op'>)</span>,
            <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='fl'>19</span>, <span class='fl'>35</span><span class='op'>)</span>,
            <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='fl'>20</span>, <span class='fl'>30</span><span class='op'>)</span>,
            <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='fl'>21</span>, <span class='fl'>30</span><span class='op'>)</span>,
            <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='fl'>22</span>, <span class='fl'>33</span><span class='op'>)</span>,
            <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='fl'>23</span>, <span class='fl'>29</span><span class='op'>)</span>,
            <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='fl'>24</span>, <span class='fl'>20</span><span class='op'>)</span>,
            <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='fl'>25</span>, <span class='fl'>18</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>vecGender</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='st'>"F"</span>, <span class='fl'>63</span><span class='op'>)</span>, <span class='co'># ditto</span>
               <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='st'>"M"</span>, <span class='fl'>30</span><span class='op'>)</span>,
               <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='st'>"Other"</span>, <span class='fl'>7</span><span class='op'>)</span><span class='op'>)</span>

<span class='va'>nGenders</span> <span class='op'>&lt;-</span> <span class='fl'>3</span>
<span class='va'>nAges</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='fl'>15</span><span class='op'>:</span><span class='fl'>25</span><span class='op'>)</span> <span class='co'># lazy but does make tweaking the model later easier!</span>
<span class='va'>nSessLengths</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='fl'>2</span><span class='op'>:</span><span class='fl'>20</span><span class='op'>)</span> <span class='co'># ditto</span>
<span class='va'>nCells</span> <span class='op'>&lt;-</span> <span class='va'>nGenders</span> <span class='op'>*</span> <span class='va'>nAges</span> <span class='op'>*</span> <span class='va'>nSessLengths</span>

<span class='va'>avCellSize</span> <span class='op'>&lt;-</span> <span class='fl'>20</span> <span class='co'># trying to make things big enough</span>
<span class='va'>populnSize</span> <span class='op'>&lt;-</span> <span class='va'>nCells</span> <span class='op'>*</span> <span class='va'>avCellSize</span>

<span class='co'>### build scores from a Gaussian base variable</span>
<span class='va'>latentMean</span> <span class='op'>&lt;-</span> <span class='fl'>0</span>
<span class='va'>latentSD</span> <span class='op'>&lt;-</span> <span class='fl'>1</span>

<span class='co'>### add baseline differences</span>
<span class='co'>### gender has female as reference vale</span>
<span class='va'>effBaseFemaleMean</span> <span class='op'>&lt;-</span> <span class='fl'>0</span>
<span class='va'>effBaseFemaleSD</span> <span class='op'>&lt;-</span> <span class='fl'>1</span>
<span class='va'>effBaseMaleMean</span> <span class='op'>&lt;-</span> <span class='op'>-</span><span class='fl'>.25</span>
<span class='va'>effBaseMaleSD</span> <span class='op'>&lt;-</span> <span class='fl'>1.8</span>
<span class='va'>effBaseOtherMean</span> <span class='op'>&lt;-</span> <span class='fl'>.35</span>
<span class='va'>effBaseOtherSD</span> <span class='op'>&lt;-</span> <span class='fl'>2</span>
<span class='co'>### model age as a quadratic</span>
<span class='va'>minAge</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/Extremes.html'>min</a></span><span class='op'>(</span><span class='va'>vecAge</span><span class='op'>)</span>
<span class='va'>midAge</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>vecAge</span><span class='op'>)</span>
<span class='va'>effBaseAgeMeanMult</span> <span class='op'>&lt;-</span> <span class='fl'>.03</span>
<span class='va'>effBaseAgeSD</span> <span class='op'>&lt;-</span> <span class='fl'>1</span>

<span class='co'>### now create model for change effects</span>
<span class='co'>### start with noise to add to baseline score</span>
<span class='va'>changeFuzzMean</span> <span class='op'>&lt;-</span> <span class='fl'>.1</span>
<span class='va'>changeFuzzSD</span> <span class='op'>&lt;-</span> <span class='fl'>.2</span>
<span class='co'>### now gender effects on change</span>
<span class='va'>effChangeFemaleMean</span> <span class='op'>&lt;-</span> <span class='op'>-</span><span class='fl'>.8</span>
<span class='va'>effChangeFemaleSD</span> <span class='op'>&lt;-</span> <span class='fl'>1</span>
<span class='va'>effChangeMaleMean</span> <span class='op'>&lt;-</span> <span class='va'>effChangeFemaleMean</span> <span class='op'>+</span> <span class='fl'>.2</span> <span class='co'># smaller improvement for men</span>
<span class='va'>effChangeMaleSD</span> <span class='op'>&lt;-</span> <span class='fl'>1.5</span> <span class='co'># more variance in male change</span>
<span class='va'>effChangeOtherMean</span> <span class='op'>&lt;-</span> <span class='va'>effChangeFemaleMean</span> <span class='op'>-</span> <span class='fl'>.3</span> <span class='co'># better for "other"</span>
<span class='va'>effChangeOtherSD</span> <span class='op'>&lt;-</span> <span class='fl'>1</span>

<span class='co'>### model age as a quadratic again</span>
<span class='va'>effChangeAgeMeanMult</span> <span class='op'>&lt;-</span> <span class='fl'>.1</span>
<span class='va'>effChangeAgeMeanSD</span> <span class='op'>&lt;-</span> <span class='fl'>1</span>

<span class='co'>### model effect of number of sessions as linear</span>
<span class='va'>minSessions</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/Extremes.html'>min</a></span><span class='op'>(</span><span class='va'>vecSessions</span><span class='op'>)</span>
<span class='va'>effChangeSessionsMult</span> <span class='op'>&lt;-</span> <span class='op'>-</span><span class='fl'>.15</span>
<span class='va'>effChangeSessionsSD</span>  <span class='op'>&lt;-</span> <span class='fl'>1</span>

<span class='co'>### build the sample</span>
<span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>12345</span><span class='op'>)</span> <span class='co'># reproducible sample</span>
<span class='fu'><a href='https://tibble.tidyverse.org/reference/as_tibble.html'>as_tibble</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>ID <span class='op'>=</span> <span class='fl'>1</span><span class='op'>:</span><span class='va'>populnSize</span>,
               gender <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span><span class='op'>(</span><span class='va'>vecGender</span>, <span class='va'>populnSize</span>, replace <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>,
               age <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span><span class='op'>(</span><span class='va'>vecAge</span>, <span class='va'>populnSize</span>, replace <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>,
               nSessions <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span><span class='op'>(</span><span class='va'>vecSessions</span>, <span class='va'>populnSize</span>, replace <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>,
               <span class='co'>### now build baseline scores</span>
               baseLatent <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span><span class='op'>(</span><span class='va'>populnSize</span>, mean <span class='op'>=</span> <span class='va'>latentMean</span>, sd <span class='op'>=</span> <span class='va'>latentSD</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>-&gt;</span> <span class='va'>tibSimulnVars</span>

<span class='va'>tibSimulnVars</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='co'>### start by adding effect of gender to the that latent</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>first <span class='op'>=</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/case_when.html'>case_when</a></span><span class='op'>(</span><span class='va'>gender</span> <span class='op'>==</span> <span class='st'>"F"</span> <span class='op'>~</span> <span class='va'>baseLatent</span> <span class='op'>+</span> <span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span><span class='op'>(</span><span class='va'>populnSize</span>, mean <span class='op'>=</span> <span class='va'>effBaseFemaleMean</span>, sd <span class='op'>=</span> <span class='va'>effBaseFemaleSD</span><span class='op'>)</span>,
                    <span class='va'>gender</span> <span class='op'>==</span> <span class='st'>"M"</span> <span class='op'>~</span> <span class='va'>baseLatent</span> <span class='op'>+</span> <span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span><span class='op'>(</span><span class='va'>populnSize</span>, mean <span class='op'>=</span> <span class='va'>effBaseMaleMean</span>, sd <span class='op'>=</span> <span class='va'>effBaseMaleSD</span><span class='op'>)</span>,
                    <span class='va'>gender</span> <span class='op'>==</span> <span class='st'>"Other"</span> <span class='op'>~</span> <span class='va'>baseLatent</span> <span class='op'>+</span> <span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span><span class='op'>(</span><span class='va'>populnSize</span>, mean <span class='op'>=</span> <span class='va'>effBaseOtherMean</span>, sd <span class='op'>=</span> <span class='va'>effBaseOtherSD</span><span class='op'>)</span><span class='op'>)</span>,
         Age <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span><span class='op'>(</span><span class='va'>age</span><span class='op'>)</span>,
         facSessions <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span><span class='op'>(</span><span class='va'>nSessions</span><span class='op'>)</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/rowwise.html'>rowwise</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='co'>### add effect of age</span>
  <span class='co'>### I am, a bit unrealistically, assuming that number of sessions doesn't affect baseline score (nor v.v.)</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>first <span class='op'>=</span> <span class='va'>first</span> <span class='op'>+</span> <span class='va'>effBaseAgeMeanMult</span> <span class='op'>*</span> <span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span><span class='op'>(</span><span class='fl'>1</span>, 
                                                      mean <span class='op'>=</span> <span class='op'>(</span><span class='va'>age</span> <span class='op'>-</span> <span class='va'>midAge</span><span class='op'>)</span><span class='op'>^</span><span class='fl'>2</span>, 
                                                      sd <span class='op'>=</span> <span class='va'>effBaseAgeSD</span><span class='op'>)</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>ungroup</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>-&gt;</span> <span class='va'>tibBaselineScores</span>
</code></pre>
</div>
</details>
</div>
<p>And this adds final scores (and hence change scores, probably more logical to have done it the other way around).</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>tibBaselineScores</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='co'>### create last scores first by adding noise to the baseline scores</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>last <span class='op'>=</span> <span class='va'>first</span> <span class='op'>+</span> <span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span><span class='op'>(</span><span class='va'>populnSize</span>, 
                              mean <span class='op'>=</span> <span class='va'>changeFuzzMean</span>,
                              sd <span class='op'>=</span> <span class='va'>changeFuzzSD</span><span class='op'>)</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
         <span class='co'>### now add effect of gender on change</span>
         <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>last <span class='op'>=</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/case_when.html'>case_when</a></span><span class='op'>(</span><span class='va'>gender</span> <span class='op'>==</span> <span class='st'>"F"</span> <span class='op'>~</span> <span class='va'>last</span> <span class='op'>+</span> <span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span><span class='op'>(</span><span class='va'>populnSize</span>, 
                                                       mean <span class='op'>=</span> <span class='va'>effChangeFemaleMean</span>, 
                                                       sd <span class='op'>=</span> <span class='va'>effChangeFemaleSD</span><span class='op'>)</span>,
                          <span class='va'>gender</span> <span class='op'>==</span> <span class='st'>"M"</span> <span class='op'>~</span> <span class='va'>last</span> <span class='op'>+</span> <span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span><span class='op'>(</span><span class='va'>populnSize</span>, 
                                                       mean <span class='op'>=</span> <span class='va'>effChangeMaleMean</span>, 
                                                       sd <span class='op'>=</span> <span class='va'>effChangeMaleSD</span><span class='op'>)</span>,
                          <span class='va'>gender</span> <span class='op'>==</span> <span class='st'>"Other"</span> <span class='op'>~</span> <span class='va'>last</span> <span class='op'>+</span> <span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span><span class='op'>(</span><span class='va'>populnSize</span>, 
                                                           mean <span class='op'>=</span> <span class='va'>effChangeOtherMean</span>, 
                                                           sd <span class='op'>=</span> <span class='va'>effChangeOtherSD</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/rowwise.html'>rowwise</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='co'>### add effect of age</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>last <span class='op'>=</span> <span class='va'>last</span> <span class='op'>+</span> <span class='va'>effChangeAgeMeanMult</span> <span class='op'>*</span> <span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span><span class='op'>(</span><span class='fl'>1</span>, 
                                                      mean <span class='op'>=</span> <span class='op'>(</span><span class='va'>age</span> <span class='op'>-</span> <span class='va'>midAge</span><span class='op'>)</span><span class='op'>^</span><span class='fl'>2</span>, 
                                                      sd <span class='op'>=</span> <span class='va'>effChangeAgeMeanSD</span><span class='op'>)</span>,
         <span class='co'>### add effect of number of sessions</span>
         last <span class='op'>=</span> <span class='va'>last</span> <span class='op'>+</span> <span class='va'>effChangeSessionsMult</span> <span class='op'>*</span> <span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span><span class='op'>(</span><span class='fl'>1</span>,
                                                     mean <span class='op'>=</span> <span class='va'>nSessions</span> <span class='op'>-</span> <span class='va'>minSessions</span>,
                                                     sd <span class='op'>=</span> <span class='va'>effChangeSessionsSD</span><span class='op'>)</span>,
         change <span class='op'>=</span> <span class='va'>last</span> <span class='op'>-</span> <span class='va'>first</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>ungroup</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>-&gt;</span> <span class='va'>tibDat</span>
</code></pre>
</div>
</details>
</div>
<p>I’ve simulated a very unrealistic dataset of total size 12540 with a three way gender classification and age ranging from 15 to 25 and numbers of sessions from 2 to 10.</p>
<h3 id="breakdown">Breakdown</h3>
<h4 id="gender">Gender</h4>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>tibDat</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>gender</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/summarise.html'>summarise</a></span><span class='op'>(</span>n <span class='op'>=</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/context.html'>n</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>nText <span class='op'>=</span> <span class='fu'><a href='https://stringr.tidyverse.org/reference/str_c.html'>str_c</a></span><span class='op'>(</span><span class='st'>"n = "</span>, <span class='va'>n</span><span class='op'>)</span>,
         yPos <span class='op'>=</span> <span class='va'>n</span> <span class='op'>*</span> <span class='fl'>.8</span><span class='op'>)</span> <span class='op'>-&gt;</span> <span class='va'>tmpTibN</span>

<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>tibDat</span>,
       <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>gender</span>, fill <span class='op'>=</span> <span class='va'>gender</span><span class='op'>)</span><span class='op'>)</span><span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_histogram.html'>geom_histogram</a></span><span class='op'>(</span>stat <span class='op'>=</span> <span class='st'>"count"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_text.html'>geom_text</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>tmpTibN</span>,
             <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>gender</span>, y <span class='op'>=</span> <span class='va'>yPos</span>, label <span class='op'>=</span> <span class='va'>nText</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="prepost-analyses_files/figure-html5/description1-1.png" width="624" /></p>
</div>
<p>OK.</p>
<h4 id="age">Age</h4>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>tibDat</span>,
       <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>age</span>, fill <span class='op'>=</span> <span class='va'>gender</span><span class='op'>)</span><span class='op'>)</span><span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_histogram.html'>geom_histogram</a></span><span class='op'>(</span>stat <span class='op'>=</span> <span class='st'>"count"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_continuous.html'>scale_x_continuous</a></span><span class='op'>(</span>breaks <span class='op'>=</span> <span class='va'>vecAge</span>, labels <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/character.html'>as.character</a></span><span class='op'>(</span><span class='va'>vecAge</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="prepost-analyses_files/figure-html5/description2-1.png" width="624" /></p>
</div>
<p>I haven’t created any systematic association between age and gender.</p>
<h4 id="numbers-of-sessions">Numbers of sessions</h4>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>tibDat</span>,
       <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>nSessions</span>, fill <span class='op'>=</span> <span class='va'>gender</span><span class='op'>)</span><span class='op'>)</span><span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_histogram.html'>geom_histogram</a></span><span class='op'>(</span>stat <span class='op'>=</span> <span class='st'>"count"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_continuous.html'>scale_x_continuous</a></span><span class='op'>(</span>breaks <span class='op'>=</span> <span class='va'>vecSessions</span>, labels <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/character.html'>as.character</a></span><span class='op'>(</span><span class='va'>vecSessions</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="prepost-analyses_files/figure-html5/description3-1.png" width="624" /></p>
</div>
<p>I haven’t created any systematic association between number of sessions and gender, nor with age.</p>
<h3 id="check-that-ive-created-roughly-the-baseline-scores-i-wanted">Check that I’ve created roughly the baseline scores I wanted</h3>
<h4 id="check-distributions-of-scores">Check distributions of scores</h4>
<p>This is a bit silly here as we know I’ve created samples from Gaussian distributions, however with real world data really marked deviations from Gaussian distributions would clarify that caution would be needed for any tests or confidence intervals when we look at effects on change. Start with “first”, i.e. baseline score.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>tibDat</span>,
       <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>first</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_histogram.html'>geom_histogram</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>ggtitle</a></span><span class='op'>(</span><span class='st'>"Histogram of all baseline scores"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="prepost-analyses_files/figure-html5/baselineDist1-1.png" width="624" /></p>
</div>
<p>I could get fancy and add the best Gaussian distribution fit but clearly no major problem there. But what about effects of predictors?</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>tibDat</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>gender</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/summarise.html'>summarise</a></span><span class='op'>(</span>mean <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>first</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>-&gt;</span> <span class='va'>tmpTibMeans</span>

<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>tibDat</span>,
       <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>first</span>, fill <span class='op'>=</span> <span class='va'>gender</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/facet_grid.html'>facet_grid</a></span><span class='op'>(</span>rows <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/vars.html'>vars</a></span><span class='op'>(</span><span class='va'>gender</span><span class='op'>)</span>,
             scales <span class='op'>=</span> <span class='st'>"free_y"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_histogram.html'>geom_histogram</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_abline.html'>geom_vline</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>tmpTibMeans</span>,
             <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>xintercept <span class='op'>=</span> <span class='va'>mean</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>ggtitle</a></span><span class='op'>(</span><span class='st'>"Histogram of baseline scores against gender"</span>,
          subtitle <span class='op'>=</span> <span class='st'>"Vertical reference lines mark means"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="prepost-analyses_files/figure-html5/baselineDistGend-1.png" width="624" /></p>
</div>
<p>Can see the relationship between mean baseline score and gender. Y axis free as numbers in each gender category vary quite a bit.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>tibDat</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>Age</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/summarise.html'>summarise</a></span><span class='op'>(</span>mean <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>first</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>-&gt;</span> <span class='va'>tmpTibMeans</span>

<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>tibDat</span>,
       <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>first</span>, fill <span class='op'>=</span> <span class='va'>Age</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/facet_grid.html'>facet_grid</a></span><span class='op'>(</span>rows <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/vars.html'>vars</a></span><span class='op'>(</span><span class='va'>Age</span><span class='op'>)</span>,
             scales <span class='op'>=</span> <span class='st'>"free_y"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_histogram.html'>geom_histogram</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_abline.html'>geom_vline</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>tmpTibMeans</span>,
             <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>xintercept <span class='op'>=</span> <span class='va'>mean</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>ggtitle</a></span><span class='op'>(</span><span class='st'>"Histogram of baseline scores against age"</span>,
          subtitle <span class='op'>=</span> <span class='st'>"Vertical reference lines mark means"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="prepost-analyses_files/figure-html5/baselineDistAge-1.png" width="624" /></p>
</div>
<p>Fine! And just to pander to obsessionality.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>tibDat</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>Age</span>, <span class='va'>gender</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/summarise.html'>summarise</a></span><span class='op'>(</span>mean <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>first</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>-&gt;</span> <span class='va'>tmpTibMeans</span>

<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>tibDat</span>,
       <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>first</span>, fill <span class='op'>=</span> <span class='va'>Age</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/facet_grid.html'>facet_grid</a></span><span class='op'>(</span>rows <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/vars.html'>vars</a></span><span class='op'>(</span><span class='va'>Age</span><span class='op'>)</span>,
             cols <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/vars.html'>vars</a></span><span class='op'>(</span><span class='va'>gender</span><span class='op'>)</span>,
             scales <span class='op'>=</span> <span class='st'>"free"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_histogram.html'>geom_histogram</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_abline.html'>geom_vline</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>tmpTibMeans</span>,
             <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>xintercept <span class='op'>=</span> <span class='va'>mean</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>ggtitle</a></span><span class='op'>(</span><span class='st'>"Histogram of baseline scores against age"</span>,
          subtitle <span class='op'>=</span> <span class='st'>"Vertical reference lines mark means"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="prepost-analyses_files/figure-html5/baselineDistAge2-1.png" width="624" /></p>
</div>
<p>That’s just silly!</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>tibDat</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>nSessions</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/summarise.html'>summarise</a></span><span class='op'>(</span>mean <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>first</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>-&gt;</span> <span class='va'>tmpTibMeans</span>

<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>tibDat</span>,
       <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>first</span>, fill <span class='op'>=</span> <span class='va'>nSessions</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/facet_grid.html'>facet_grid</a></span><span class='op'>(</span>rows <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/vars.html'>vars</a></span><span class='op'>(</span><span class='va'>nSessions</span><span class='op'>)</span>,
             scales <span class='op'>=</span> <span class='st'>"free"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_histogram.html'>geom_histogram</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_abline.html'>geom_vline</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>tmpTibMeans</span>,
             <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>xintercept <span class='op'>=</span> <span class='va'>mean</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>ggtitle</a></span><span class='op'>(</span><span class='st'>"Histogram of baseline scores against number of sessions"</span>,
          subtitle <span class='op'>=</span> <span class='st'>"Vertical reference lines mark means"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="prepost-analyses_files/figure-html5/baselineDistSessions-1.png" width="624" /></p>
</div>
<p>OK. Now same for final scores.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>tibDat</span>,
       <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>first</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_histogram.html'>geom_histogram</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>ggtitle</a></span><span class='op'>(</span><span class='st'>"Histogram of all final scores"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="prepost-analyses_files/figure-html5/lastDist1-1.png" width="624" /></p>
</div>
<p>OK</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>tibDat</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>gender</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/summarise.html'>summarise</a></span><span class='op'>(</span>mean <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>first</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>-&gt;</span> <span class='va'>tmpTibMeans</span>

<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>tibDat</span>,
       <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>first</span>, fill <span class='op'>=</span> <span class='va'>gender</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/facet_grid.html'>facet_grid</a></span><span class='op'>(</span>rows <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/vars.html'>vars</a></span><span class='op'>(</span><span class='va'>gender</span><span class='op'>)</span>,
             scales <span class='op'>=</span> <span class='st'>"free_y"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_histogram.html'>geom_histogram</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_abline.html'>geom_vline</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>tmpTibMeans</span>,
             <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>xintercept <span class='op'>=</span> <span class='va'>mean</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>ggtitle</a></span><span class='op'>(</span><span class='st'>"Histogram of final scores against gender"</span>,
          subtitle <span class='op'>=</span> <span class='st'>"Vertical reference lines mark means"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="prepost-analyses_files/figure-html5/lastDistGend-1.png" width="624" /></p>
</div>
<p>OK again.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>tibDat</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>Age</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/summarise.html'>summarise</a></span><span class='op'>(</span>mean <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>first</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>-&gt;</span> <span class='va'>tmpTibMeans</span>

<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>tibDat</span>,
       <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>first</span>, fill <span class='op'>=</span> <span class='va'>Age</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/facet_grid.html'>facet_grid</a></span><span class='op'>(</span>rows <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/vars.html'>vars</a></span><span class='op'>(</span><span class='va'>Age</span><span class='op'>)</span>,
             scales <span class='op'>=</span> <span class='st'>"free_y"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_histogram.html'>geom_histogram</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_abline.html'>geom_vline</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>tmpTibMeans</span>,
             <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>xintercept <span class='op'>=</span> <span class='va'>mean</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>ggtitle</a></span><span class='op'>(</span><span class='st'>"Histogram of final scores against age"</span>,
          subtitle <span class='op'>=</span> <span class='st'>"Vertical reference lines mark means"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="prepost-analyses_files/figure-html5/lastDistAge-1.png" width="624" /></p>
</div>
<p>And again.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>tibDat</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>Age</span>, <span class='va'>gender</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/summarise.html'>summarise</a></span><span class='op'>(</span>mean <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>first</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>-&gt;</span> <span class='va'>tmpTibMeans</span>

<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>tibDat</span>,
       <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>first</span>, fill <span class='op'>=</span> <span class='va'>Age</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/facet_grid.html'>facet_grid</a></span><span class='op'>(</span>rows <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/vars.html'>vars</a></span><span class='op'>(</span><span class='va'>Age</span><span class='op'>)</span>,
             cols <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/vars.html'>vars</a></span><span class='op'>(</span><span class='va'>gender</span><span class='op'>)</span>,
             scales <span class='op'>=</span> <span class='st'>"free"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_histogram.html'>geom_histogram</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_abline.html'>geom_vline</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>tmpTibMeans</span>,
             <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>xintercept <span class='op'>=</span> <span class='va'>mean</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>ggtitle</a></span><span class='op'>(</span><span class='st'>"Histogram of final scores against age"</span>,
          subtitle <span class='op'>=</span> <span class='st'>"Vertical reference lines mark means"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="prepost-analyses_files/figure-html5/lastDistAge2-1.png" width="624" /></p>
</div>
<p>Still silly!</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>tibDat</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>nSessions</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/summarise.html'>summarise</a></span><span class='op'>(</span>mean <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>first</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>-&gt;</span> <span class='va'>tmpTibMeans</span>

<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>tibDat</span>,
       <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>first</span>, fill <span class='op'>=</span> <span class='va'>nSessions</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/facet_grid.html'>facet_grid</a></span><span class='op'>(</span>rows <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/vars.html'>vars</a></span><span class='op'>(</span><span class='va'>nSessions</span><span class='op'>)</span>,
             scales <span class='op'>=</span> <span class='st'>"free"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_histogram.html'>geom_histogram</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_abline.html'>geom_vline</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>tmpTibMeans</span>,
             <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>xintercept <span class='op'>=</span> <span class='va'>mean</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>ggtitle</a></span><span class='op'>(</span><span class='st'>"Histogram of final scores against number of sessions"</span>,
          subtitle <span class='op'>=</span> <span class='st'>"Vertical reference lines mark means"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="prepost-analyses_files/figure-html5/lastDistSessions-1.png" width="624" /></p>
</div>
<p>Getting lumpy where the cell sizes are getting small of course but fine.</p>
<h4 id="gender-1">Gender</h4>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>### get means and bootstrap CIs for baseline gender effect</span>
<span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>12345</span><span class='op'>)</span> <span class='co'># reproducible bootstrap</span>
<span class='fu'><a href='https://rdrr.io/r/base/warning.html'>suppressWarnings</a></span><span class='op'>(</span><span class='va'>tibBaselineScores</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
                   <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>gender</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
                   <span class='fu'><a href='https://dplyr.tidyverse.org/reference/summarise.html'>summarise</a></span><span class='op'>(</span>mean <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>first</span><span class='op'>)</span>,
                             CI <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/pkg/CECPfuns/man/getBootCImean.html'>getBootCImean</a></span><span class='op'>(</span><span class='va'>first</span>, 
                                                     nGT10kerr <span class='op'>=</span> <span class='cn'>FALSE</span>,
                                                     verbose <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
                   <span class='fu'><a href='https://tidyr.tidyverse.org/reference/hoist.html'>unnest_wider</a></span><span class='op'>(</span><span class='va'>CI</span><span class='op'>)</span> <span class='op'>-&gt;</span> <span class='va'>tmpTibMeans</span><span class='op'>)</span>


<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>tibBaselineScores</span>,
       <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>gender</span>, y <span class='op'>=</span> <span class='va'>first</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_violin.html'>geom_violin</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>fill <span class='op'>=</span> <span class='va'>gender</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_abline.html'>geom_hline</a></span><span class='op'>(</span>yintercept <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>tibBaselineScores</span><span class='op'>$</span><span class='va'>first</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>tmpTibMeans</span>,
             <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>y <span class='op'>=</span> <span class='va'>mean</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_linerange.html'>geom_linerange</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>tmpTibMeans</span>,
                 inherit.aes <span class='op'>=</span> <span class='cn'>FALSE</span>,
                 <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>gender</span>,
                     ymin <span class='op'>=</span> <span class='va'>LCLmean</span>, 
                     ymax <span class='op'>=</span> <span class='va'>UCLmean</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>ylab</a></span><span class='op'>(</span><span class='st'>"Baseline score"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>xlab</a></span><span class='op'>(</span><span class='st'>"Gender"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>ggtitle</a></span><span class='op'>(</span><span class='st'>"Violin plot to check baseline gender differences"</span>,
          subtitle <span class='op'>=</span> <span class='st'>"points are means, tiny vertical lines are 95% bootstrap CI of means"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="prepost-analyses_files/figure-html5/checkBaselineGender1-1.png" width="624" /></p>
</div>
<p>OK. It’s not very visible but there is a small baseline gender effect and the confidence intervals are so tight that they are just about invisible.</p>
<h4 id="age-1">Age</h4>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>### get means and bootstrap CIs for baseline age effect</span>
<span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>12345</span><span class='op'>)</span> <span class='co'># reproducible bootstrap</span>
<span class='fu'><a href='https://rdrr.io/r/base/warning.html'>suppressWarnings</a></span><span class='op'>(</span><span class='va'>tibBaselineScores</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
                   <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>Age</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
                   <span class='fu'><a href='https://dplyr.tidyverse.org/reference/summarise.html'>summarise</a></span><span class='op'>(</span>mean <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>first</span><span class='op'>)</span>,
                             CI <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/pkg/CECPfuns/man/getBootCImean.html'>getBootCImean</a></span><span class='op'>(</span><span class='va'>first</span>, 
                                                     nGT10kerr <span class='op'>=</span> <span class='cn'>FALSE</span>,
                                                     verbose <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
                   <span class='fu'><a href='https://tidyr.tidyverse.org/reference/hoist.html'>unnest_wider</a></span><span class='op'>(</span><span class='va'>CI</span><span class='op'>)</span> <span class='op'>-&gt;</span> <span class='va'>tmpTibMeans</span><span class='op'>)</span>


<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>tibBaselineScores</span>,
       <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>Age</span>, y <span class='op'>=</span> <span class='va'>first</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_violin.html'>geom_violin</a></span><span class='op'>(</span><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>fill <span class='op'>=</span> <span class='va'>Age</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_abline.html'>geom_hline</a></span><span class='op'>(</span>yintercept <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>tibBaselineScores</span><span class='op'>$</span><span class='va'>first</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>tmpTibMeans</span>,
             <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>y <span class='op'>=</span> <span class='va'>mean</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_linerange.html'>geom_linerange</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>tmpTibMeans</span>,
                 inherit.aes <span class='op'>=</span> <span class='cn'>FALSE</span>,
                 <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>Age</span>,
                     ymin <span class='op'>=</span> <span class='va'>LCLmean</span>, 
                     ymax <span class='op'>=</span> <span class='va'>UCLmean</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>ylab</a></span><span class='op'>(</span><span class='st'>"Baseline score"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>xlab</a></span><span class='op'>(</span><span class='st'>"Age"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>ggtitle</a></span><span class='op'>(</span><span class='st'>"Violin plot to check baseline gender differences"</span>,
          subtitle <span class='op'>=</span> <span class='st'>"points are means, tiny vertical lines are 95% bootstrap CI of means"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="prepost-analyses_files/figure-html5/checkBaselineAge1-1.png" width="624" /></p>
</div>
<p>Small and very unrealistic quadratic (U shaped) effect of age on baseline scores.</p>
<h3 id="check-on-change-scores-ive-created">Check on change scores I’ve created</h3>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>tibDat</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>gender</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/summarise.html'>summarise</a></span><span class='op'>(</span>meanFirst <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>first</span><span class='op'>)</span>,
            meanLast <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>last</span><span class='op'>)</span>,
            CIfirst <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/pkg/CECPfuns/man/getBootCImean.html'>getBootCImean</a></span><span class='op'>(</span><span class='va'>first</span><span class='op'>)</span><span class='op'>)</span>,
            CIlast <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/pkg/CECPfuns/man/getBootCImean.html'>getBootCImean</a></span><span class='op'>(</span><span class='va'>last</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://tidyr.tidyverse.org/reference/hoist.html'>unnest_wider</a></span><span class='op'>(</span><span class='va'>CIfirst</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='co'>### got to rename to avoid name collision</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/rename.html'>rename</a></span><span class='op'>(</span>obsmeanFirst <span class='op'>=</span> <span class='va'>obsmean</span>,
         LCLmeanFirst <span class='op'>=</span> <span class='va'>LCLmean</span>,
         UCLmeanFirst <span class='op'>=</span> <span class='va'>UCLmean</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://tidyr.tidyverse.org/reference/hoist.html'>unnest_wider</a></span><span class='op'>(</span><span class='va'>CIlast</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='co'>### renaming now is just for clarity rather than necessity</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/rename.html'>rename</a></span><span class='op'>(</span>obsmeanLast <span class='op'>=</span> <span class='va'>obsmean</span>,
         LCLmeanLast <span class='op'>=</span> <span class='va'>LCLmean</span>,
         UCLmeanLast <span class='op'>=</span> <span class='va'>UCLmean</span><span class='op'>)</span> <span class='op'>-&gt;</span> <span class='va'>tmpTibMeans</span>

<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>tibDat</span>,
       <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>first</span>, y <span class='op'>=</span> <span class='va'>last</span>, colour <span class='op'>=</span> <span class='va'>gender</span>, fill <span class='op'>=</span> <span class='va'>gender</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span>alpha <span class='op'>=</span> <span class='fl'>.1</span>, size <span class='op'>=</span> <span class='fl'>.5</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_smooth.html'>geom_smooth</a></span><span class='op'>(</span>method <span class='op'>=</span> <span class='st'>"lm"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='co'># geom_point(data = tmpTibMeans,</span>
  <span class='co'>#            aes(x = meanFirst, y = meanLast),</span>
  <span class='co'>#            size = 3) +</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_linerange.html'>geom_linerange</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>tmpTibMeans</span>,
                 inherit.aes <span class='op'>=</span> <span class='cn'>FALSE</span>,
                 <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>meanFirst</span>,
                     ymin <span class='op'>=</span> <span class='va'>LCLmeanLast</span>,
                     ymax <span class='op'>=</span> <span class='va'>UCLmeanLast</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_linerange.html'>geom_linerange</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>tmpTibMeans</span>,
                 inherit.aes <span class='op'>=</span> <span class='cn'>FALSE</span>,
                 <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>y <span class='op'>=</span> <span class='va'>meanLast</span>,
                     xmin <span class='op'>=</span> <span class='va'>LCLmeanFirst</span>,
                     xmax <span class='op'>=</span> <span class='va'>UCLmeanFirst</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>xlab</a></span><span class='op'>(</span><span class='st'>"First session score"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>ylab</a></span><span class='op'>(</span><span class='st'>"Final session score"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>ggtitle</a></span><span class='op'>(</span><span class='st'>"Scatterplot of last against first scores by gender"</span>,
          subtitle <span class='op'>=</span> <span class='st'>"Lines are linear regression by gender with 95% confidence intervals\nCrosshairs are 95% confidence intervals of means"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="prepost-analyses_files/figure-html5/plotChange1-1.png" width="624" /></p>
</div>
<p>Not a very informative plot here but it would be important with real data to plot something like this to see whether there are markedly non-linear relationships. Here it’s just about visible that I’ve created slight differences in slope of final session score on first session score by gender. I’ve put in the means (of first and last scores) by gender which helps remind us of the horizontal shift of the baseline score gender differences seen above. (Cross hairs in black as the ones for the men and for the women disappear if coloured by gender.)</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>tibDat</span>,
       <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>first</span>, y <span class='op'>=</span> <span class='va'>last</span>, colour <span class='op'>=</span> <span class='va'>gender</span>, fill <span class='op'>=</span> <span class='va'>gender</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/facet_grid.html'>facet_grid</a></span><span class='op'>(</span>rows <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/vars.html'>vars</a></span><span class='op'>(</span><span class='va'>gender</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span>alpha <span class='op'>=</span> <span class='fl'>.1</span>, size <span class='op'>=</span> <span class='fl'>.5</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_smooth.html'>geom_smooth</a></span><span class='op'>(</span>method <span class='op'>=</span> <span class='st'>"lm"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='co'># geom_point(data = tmpTibMeans,</span>
  <span class='co'>#            aes(x = meanFirst, y = meanLast),</span>
  <span class='co'>#            size = 3) +</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_linerange.html'>geom_linerange</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>tmpTibMeans</span>,
                 inherit.aes <span class='op'>=</span> <span class='cn'>FALSE</span>,
                 <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>meanFirst</span>,
                     ymin <span class='op'>=</span> <span class='va'>LCLmeanLast</span>,
                     ymax <span class='op'>=</span> <span class='va'>UCLmeanLast</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_linerange.html'>geom_linerange</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>tmpTibMeans</span>,
                 inherit.aes <span class='op'>=</span> <span class='cn'>FALSE</span>,
                 <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>y <span class='op'>=</span> <span class='va'>meanLast</span>,
                     xmin <span class='op'>=</span> <span class='va'>LCLmeanFirst</span>,
                     xmax <span class='op'>=</span> <span class='va'>UCLmeanFirst</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>xlab</a></span><span class='op'>(</span><span class='st'>"First session score"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>ylab</a></span><span class='op'>(</span><span class='st'>"Final session score"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>ggtitle</a></span><span class='op'>(</span><span class='st'>"Scatterplot of last against first scores by gender"</span>,
          subtitle <span class='op'>=</span> <span class='st'>"Lines are linear regression by gender with 95% confidence intervals\nCrosshairs are 95% confidence intervals of means"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="prepost-analyses_files/figure-html5/plotchange1b-1.png" width="624" /></p>
</div>
<p>As the main objective here is to look for major problems with the relationship between x and y variables, best to complement that with the same but facetted by gender.</p>
<p>OK, no issues of non-linearities there (of course they’re not, I didn’t model them so!)</p>
<h3 id="what-about-change-scores-themselves">What about change scores themselves?</h3>
<p>Plotting final scores against baseline is vital to look for non-linearities in the relationship but we are as interested in change as final scores. (Actually, we’re interested in both and of course they’re mathematically completely linearly related but the give usefully different views on this whole issue of final score and change.)</p>
<p>So plot change against first score now we have seen that the relationships between first and last scores are not markedly non-linear.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>tibDat</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>gender</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/summarise.html'>summarise</a></span><span class='op'>(</span>meanFirst <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>first</span><span class='op'>)</span>,
            meanChange <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>change</span><span class='op'>)</span>,
            CIfirst <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/pkg/CECPfuns/man/getBootCImean.html'>getBootCImean</a></span><span class='op'>(</span><span class='va'>first</span><span class='op'>)</span><span class='op'>)</span>,
            CIchange <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/pkg/CECPfuns/man/getBootCImean.html'>getBootCImean</a></span><span class='op'>(</span><span class='va'>change</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://tidyr.tidyverse.org/reference/hoist.html'>unnest_wider</a></span><span class='op'>(</span><span class='va'>CIfirst</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='co'>### got to rename to avoid name collision</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/rename.html'>rename</a></span><span class='op'>(</span>obsmeanFirst <span class='op'>=</span> <span class='va'>obsmean</span>,
         LCLmeanFirst <span class='op'>=</span> <span class='va'>LCLmean</span>,
         UCLmeanFirst <span class='op'>=</span> <span class='va'>UCLmean</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://tidyr.tidyverse.org/reference/hoist.html'>unnest_wider</a></span><span class='op'>(</span><span class='va'>CIchange</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='co'>### renaming now is just for clarity rather than necessity</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/rename.html'>rename</a></span><span class='op'>(</span>obsmeanChange <span class='op'>=</span> <span class='va'>obsmean</span>,
         LCLmeanChange <span class='op'>=</span> <span class='va'>LCLmean</span>,
         UCLmeanChange <span class='op'>=</span> <span class='va'>UCLmean</span><span class='op'>)</span> <span class='op'>-&gt;</span> <span class='va'>tmpTibMeans</span>

<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>tibDat</span>,
       <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>first</span>, y <span class='op'>=</span> <span class='va'>change</span>, colour <span class='op'>=</span> <span class='va'>gender</span>, fill <span class='op'>=</span> <span class='va'>gender</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span>alpha <span class='op'>=</span> <span class='fl'>.1</span>, size <span class='op'>=</span> <span class='fl'>.5</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_smooth.html'>geom_smooth</a></span><span class='op'>(</span>method <span class='op'>=</span> <span class='st'>"lm"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>tmpTibMeans</span>,
             <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>meanFirst</span>, y <span class='op'>=</span> <span class='va'>meanChange</span><span class='op'>)</span>,
             size <span class='op'>=</span> <span class='fl'>3</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_linerange.html'>geom_linerange</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>tmpTibMeans</span>,
                 inherit.aes <span class='op'>=</span> <span class='cn'>FALSE</span>,
                 <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>meanFirst</span>,
                     ymin <span class='op'>=</span> <span class='va'>LCLmeanChange</span>,
                     ymax <span class='op'>=</span> <span class='va'>UCLmeanChange</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_linerange.html'>geom_linerange</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>tmpTibMeans</span>,
                 inherit.aes <span class='op'>=</span> <span class='cn'>FALSE</span>,
                 <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>y <span class='op'>=</span> <span class='va'>meanChange</span>,
                     xmin <span class='op'>=</span> <span class='va'>LCLmeanFirst</span>,
                     xmax <span class='op'>=</span> <span class='va'>UCLmeanFirst</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>xlab</a></span><span class='op'>(</span><span class='st'>"First session score"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>ylab</a></span><span class='op'>(</span><span class='st'>"Final session score"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>ggtitle</a></span><span class='op'>(</span><span class='st'>"Scatterplot of change (last - first) against first scores by gender"</span>,
          subtitle <span class='op'>=</span> <span class='st'>"Lines are linear regression by gender with 95% confidence intervals"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="prepost-analyses_files/figure-html5/plotChange2-1.png" width="624" /></p>
</div>
<p>Now the mean points show clearly both the horizontal shifts of baseline score gender differences, but also that the change scores are different. The CIs for the female subset are so tiny they disappear but it’s clear that the differences are systematic for the change scores as well as for the baseline scores. Very slight but clear linear relationship between baseline score and change, in real life datasets I’d expect more of a relationship and that’d be an important reason for doing this plot.</p>
<h4 id="age-2">Age</h4>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>tibDat</span>,
       <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>first</span>, y <span class='op'>=</span> <span class='va'>last</span>, colour <span class='op'>=</span> <span class='va'>Age</span>, fill <span class='op'>=</span> <span class='va'>Age</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span>alpha <span class='op'>=</span> <span class='fl'>.1</span>, size <span class='op'>=</span> <span class='fl'>.5</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_smooth.html'>geom_smooth</a></span><span class='op'>(</span>method <span class='op'>=</span> <span class='st'>"lm"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>xlab</a></span><span class='op'>(</span><span class='st'>"First session score"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>ylab</a></span><span class='op'>(</span><span class='st'>"Final session score"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>ggtitle</a></span><span class='op'>(</span><span class='st'>"Scatterplot of last against first scores by age"</span>,
          subtitle <span class='op'>=</span> <span class='st'>"Lines are linear regression by age with 95% confidence intervals"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="prepost-analyses_files/figure-html5/plotChange3-1.png" width="624" /></p>
</div>
<p>Strong relationships and no obvious non-linearities but not an easy plot to read. Facetted plot better.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>tibDat</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>xmean <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>first</span><span class='op'>)</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='co'># centre on x axis</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>Age</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/summarise.html'>summarise</a></span><span class='op'>(</span>xmean <span class='op'>=</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/nth.html'>first</a></span><span class='op'>(</span><span class='va'>xmean</span><span class='op'>)</span>, <span class='co'># to retain that constant</span>
            last <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>last</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>-&gt;</span> <span class='va'>tmpTibMeans</span>


<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>tibDat</span>,
       <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>first</span>, y <span class='op'>=</span> <span class='va'>last</span>, colour <span class='op'>=</span> <span class='va'>Age</span>, fill <span class='op'>=</span> <span class='va'>Age</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/facet_grid.html'>facet_grid</a></span><span class='op'>(</span>rows <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/vars.html'>vars</a></span><span class='op'>(</span><span class='va'>Age</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span>alpha <span class='op'>=</span> <span class='fl'>.3</span>, size <span class='op'>=</span> <span class='fl'>.5</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_smooth.html'>geom_smooth</a></span><span class='op'>(</span>method <span class='op'>=</span> <span class='st'>"lm"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_abline.html'>geom_hline</a></span><span class='op'>(</span>yintercept <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>tibDat</span><span class='op'>$</span><span class='va'>first</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>tmpTibMeans</span>,
             inherit.aes <span class='op'>=</span> <span class='cn'>FALSE</span>,
             <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>xmean</span>, y <span class='op'>=</span> <span class='va'>last</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>xlab</a></span><span class='op'>(</span><span class='st'>"First session score"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>ylab</a></span><span class='op'>(</span><span class='st'>"Final session score"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>ggtitle</a></span><span class='op'>(</span><span class='st'>"Scatterplot of last against first scores by age"</span>,
          subtitle <span class='op'>=</span> <span class='st'>"Lines are linear regression by age with 95% confidence intervals\nBlack reference lines are overall mean final score, points are mean by age."</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="prepost-analyses_files/figure-html5/plotChange3b-1.png" width="624" /></p>
</div>
<p>Main thing here is that there are no obvious nonlinearities. I have added the overall mean as a horizontal reference and the facet (age) mean as a point so we can still see that the final score mean is related to age.</p>
<p>Now change scores.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>tibDat</span>,
       <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>first</span>, y <span class='op'>=</span> <span class='va'>change</span>, colour <span class='op'>=</span> <span class='va'>Age</span>, fill <span class='op'>=</span> <span class='va'>Age</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span>alpha <span class='op'>=</span> <span class='fl'>.1</span>, size <span class='op'>=</span> <span class='fl'>.5</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_smooth.html'>geom_smooth</a></span><span class='op'>(</span>method <span class='op'>=</span> <span class='st'>"lm"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>xlab</a></span><span class='op'>(</span><span class='st'>"First session score"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>ylab</a></span><span class='op'>(</span><span class='st'>"Final session score"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>ggtitle</a></span><span class='op'>(</span><span class='st'>"Scatterplot of change (last - first) against first scores by age"</span>,
          subtitle <span class='op'>=</span> <span class='st'>"Lines are linear regression by age with 95% confidence intervals"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="prepost-analyses_files/figure-html5/plotChange4-1.png" width="624" /></p>
</div>
<p>@@@ put facetted plot here later, when I have time! @@@</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>tibDat</span>,
       <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>first</span>, y <span class='op'>=</span> <span class='va'>last</span>, colour <span class='op'>=</span> <span class='va'>facSessions</span>, fill <span class='op'>=</span> <span class='va'>facSessions</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span>alpha <span class='op'>=</span> <span class='fl'>.1</span>, size <span class='op'>=</span> <span class='fl'>.5</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_smooth.html'>geom_smooth</a></span><span class='op'>(</span>method <span class='op'>=</span> <span class='st'>"lm"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>xlab</a></span><span class='op'>(</span><span class='st'>"First session score"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>ylab</a></span><span class='op'>(</span><span class='st'>"Final session score"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>ggtitle</a></span><span class='op'>(</span><span class='st'>"Scatterplot of last against first scores by n(sessions)"</span>,
          subtitle <span class='op'>=</span> <span class='st'>"Lines are linear regression by n(sessions) with 95% confidence intervals"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="prepost-analyses_files/figure-html5/plotChange5-1.png" width="624" /></p>
</div>
<p>@@@ put facetted plot here later, when I have time! @@@</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>tibDat</span>,
       <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>first</span>, y <span class='op'>=</span> <span class='va'>change</span>, colour <span class='op'>=</span> <span class='va'>facSessions</span>, fill <span class='op'>=</span> <span class='va'>facSessions</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span>alpha <span class='op'>=</span> <span class='fl'>.1</span>, size <span class='op'>=</span> <span class='fl'>.5</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_smooth.html'>geom_smooth</a></span><span class='op'>(</span>method <span class='op'>=</span> <span class='st'>"lm"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>xlab</a></span><span class='op'>(</span><span class='st'>"First session score"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>ylab</a></span><span class='op'>(</span><span class='st'>"Final session score"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>ggtitle</a></span><span class='op'>(</span><span class='st'>"Scatterplot of change (last - first) against first scores by n(sessions)"</span>,
          subtitle <span class='op'>=</span> <span class='st'>"Lines are linear regression by n(sessions) with 95% confidence intervals"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="prepost-analyses_files/figure-html5/plotChange6-1.png" width="624" /></p>
</div>
<p>@@@ put facetted plot here later, when I have time! @@@</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>### get means and bootstrap CIs for effect of n(sessions) on last score</span>
<span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>12345</span><span class='op'>)</span> <span class='co'># reproducible bootstrap</span>
<span class='fu'><a href='https://rdrr.io/r/base/warning.html'>suppressWarnings</a></span><span class='op'>(</span><span class='va'>tibDat</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
                   <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>nSessions</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
                   <span class='fu'><a href='https://dplyr.tidyverse.org/reference/summarise.html'>summarise</a></span><span class='op'>(</span>mean <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>change</span><span class='op'>)</span>,
                             CI <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/pkg/CECPfuns/man/getBootCImean.html'>getBootCImean</a></span><span class='op'>(</span><span class='va'>change</span>, 
                                                     nGT10kerr <span class='op'>=</span> <span class='cn'>FALSE</span>,
                                                     verbose <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
                   <span class='fu'><a href='https://tidyr.tidyverse.org/reference/hoist.html'>unnest_wider</a></span><span class='op'>(</span><span class='va'>CI</span><span class='op'>)</span> <span class='op'>-&gt;</span> <span class='va'>tmpTibMeans</span><span class='op'>)</span>

<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>tibDat</span>,
       <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>nSessions</span>, y <span class='op'>=</span> <span class='va'>change</span>, colour <span class='op'>=</span> <span class='va'>facSessions</span>, fill <span class='op'>=</span> <span class='va'>facSessions</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_violin.html'>geom_violin</a></span><span class='op'>(</span>scale <span class='op'>=</span> <span class='st'>"count"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_point.html'>geom_point</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>tmpTibMeans</span>,
             inherit.aes <span class='op'>=</span> <span class='cn'>FALSE</span>,
             <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>nSessions</span>, y <span class='op'>=</span> <span class='va'>mean</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_linerange.html'>geom_linerange</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>tmpTibMeans</span>,
             inherit.aes <span class='op'>=</span> <span class='cn'>FALSE</span>,
             <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>nSessions</span>, ymin <span class='op'>=</span> <span class='va'>LCLmean</span>, ymax <span class='op'>=</span> <span class='va'>UCLmean</span><span class='op'>)</span>,
             size <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/geom_smooth.html'>geom_smooth</a></span><span class='op'>(</span>inherit.aes <span class='op'>=</span> <span class='cn'>FALSE</span>,
    <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>nSessions</span>, y <span class='op'>=</span> <span class='va'>change</span><span class='op'>)</span>,
    method <span class='op'>=</span> <span class='st'>"lm"</span>,
    colour <span class='op'>=</span> <span class='st'>"black"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>xlab</a></span><span class='op'>(</span><span class='st'>"Number of sessions"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>ylab</a></span><span class='op'>(</span><span class='st'>"Score change"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>ggtitle</a></span><span class='op'>(</span><span class='st'>"Violin plot of change (last - first) against first scores by n(sessions)"</span>,
          subtitle <span class='op'>=</span> <span class='st'>"Line is linear regression with 95% confidence interval\nPoints are means with vertical lines for their bootstrap 95% confidence intervals"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<img src="prepost-analyses_files/figure-html5/plotChange7-1.png" width="624" />
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggsave.html'>ggsave</a></span><span class='op'>(</span><span class='st'>"prepost1.png"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<h1 id="what-about-linear-decomposition-of-effects">What about linear decomposition of effects?</h1>
<p>Start with linear regression of final score on baseline score with all predictors and interactions. Age as factor.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span><span class='op'>(</span><span class='va'>last</span> <span class='op'>~</span> <span class='va'>first</span> <span class='op'>+</span> <span class='va'>gender</span> <span class='op'>+</span> <span class='va'>Age</span> <span class='op'>+</span> <span class='va'>nSessions</span> <span class='op'>+</span> 
     <span class='co'>### add two way interactions</span>
     <span class='va'>gender</span> <span class='op'>*</span> <span class='va'>Age</span> <span class='op'>+</span> <span class='va'>gender</span> <span class='op'>*</span> <span class='va'>nSessions</span> <span class='op'>+</span> <span class='va'>gender</span> <span class='op'>*</span> <span class='va'>Age</span> <span class='op'>+</span> <span class='va'>Age</span> <span class='op'>*</span> <span class='va'>nSessions</span> <span class='op'>+</span>
     <span class='co'>### add three way interaction</span>
     <span class='va'>gender</span> <span class='op'>*</span> <span class='va'>Age</span> <span class='op'>*</span> <span class='va'>nSessions</span>, data <span class='op'>=</span> <span class='va'>tibDat</span><span class='op'>)</span> <span class='op'>-&gt;</span> <span class='va'>lisLMFull</span>

<span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>lisLMFull</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>
Call:
lm(formula = last ~ first + gender + Age + nSessions + gender * 
    Age + gender * nSessions + gender * Age + Age * nSessions + 
    gender * Age * nSessions, data = tibDat)

Residuals:
    Min      1Q  Median      3Q     Max 
-5.2605 -0.7808 -0.0003  0.7838  6.6349 

Coefficients:
                             Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)                  1.884419   0.118440  15.910  &lt; 2e-16 ***
first                        0.994648   0.006378 155.954  &lt; 2e-16 ***
genderM                      0.500812   0.208824   2.398  0.01649 *  
genderOther                 -0.089009   0.345457  -0.258  0.79668    
Age16                       -0.770181   0.158315  -4.865 1.16e-06 ***
Age17                       -1.309495   0.161281  -8.119 5.13e-16 ***
Age18                       -1.867340   0.157332 -11.869  &lt; 2e-16 ***
Age19                       -2.158527   0.150012 -14.389  &lt; 2e-16 ***
Age20                       -2.172953   0.155112 -14.009  &lt; 2e-16 ***
Age21                       -2.053221   0.154786 -13.265  &lt; 2e-16 ***
Age22                       -1.798390   0.156045 -11.525  &lt; 2e-16 ***
Age23                       -1.355337   0.154544  -8.770  &lt; 2e-16 ***
Age24                       -0.559720   0.170420  -3.284  0.00102 ** 
Age25                        0.212141   0.168815   1.257  0.20891    
nSessions                   -0.099343   0.030510  -3.256  0.00113 ** 
genderM:Age16               -0.007527   0.283242  -0.027  0.97880    
genderOther:Age16            0.137570   0.493210   0.279  0.78031    
genderM:Age17               -0.241464   0.291804  -0.827  0.40798    
genderOther:Age17            0.006702   0.500243   0.013  0.98931    
genderM:Age18               -0.297632   0.276356  -1.077  0.28151    
genderOther:Age18           -0.193386   0.503589  -0.384  0.70097    
genderM:Age19               -0.173321   0.261959  -0.662  0.50822    
genderOther:Age19           -0.640372   0.451368  -1.419  0.15600    
genderM:Age20               -0.591214   0.269367  -2.195  0.02819 *  
genderOther:Age20           -0.584845   0.478810  -1.221  0.22194    
genderM:Age21               -0.763339   0.269786  -2.829  0.00467 ** 
genderOther:Age21           -0.416606   0.457866  -0.910  0.36290    
genderM:Age22               -0.278474   0.267495  -1.041  0.29788    
genderOther:Age22           -0.881478   0.486451  -1.812  0.07000 .  
genderM:Age23               -0.046390   0.275611  -0.168  0.86634    
genderOther:Age23           -0.216113   0.460486  -0.469  0.63885    
genderM:Age24               -0.660295   0.300616  -2.196  0.02808 *  
genderOther:Age24           -0.227848   0.504110  -0.452  0.65129    
genderM:Age25               -0.200045   0.302098  -0.662  0.50787    
genderOther:Age25           -0.570619   0.512159  -1.114  0.26524    
genderM:nSessions           -0.114479   0.051853  -2.208  0.02728 *  
genderOther:nSessions       -0.051991   0.083095  -0.626  0.53154    
Age16:nSessions             -0.050957   0.040349  -1.263  0.20665    
Age17:nSessions             -0.092861   0.040955  -2.267  0.02338 *  
Age18:nSessions             -0.042416   0.040505  -1.047  0.29504    
Age19:nSessions             -0.052642   0.038210  -1.378  0.16832    
Age20:nSessions             -0.092577   0.039192  -2.362  0.01819 *  
Age21:nSessions             -0.077144   0.039612  -1.947  0.05150 .  
Age22:nSessions             -0.064048   0.039734  -1.612  0.10700    
Age23:nSessions             -0.048669   0.039351  -1.237  0.21619    
Age24:nSessions             -0.074396   0.043129  -1.725  0.08456 .  
Age25:nSessions             -0.050839   0.042969  -1.183  0.23677    
genderM:Age16:nSessions      0.051402   0.070922   0.725  0.46861    
genderOther:Age16:nSessions -0.017382   0.120210  -0.145  0.88503    
genderM:Age17:nSessions      0.083110   0.074478   1.116  0.26449    
genderOther:Age17:nSessions  0.032787   0.120044   0.273  0.78476    
genderM:Age18:nSessions      0.111395   0.069310   1.607  0.10804    
genderOther:Age18:nSessions  0.024148   0.128096   0.189  0.85048    
genderM:Age19:nSessions      0.080484   0.065474   1.229  0.21900    
genderOther:Age19:nSessions  0.172839   0.112528   1.536  0.12457    
genderM:Age20:nSessions      0.184396   0.066988   2.753  0.00592 ** 
genderOther:Age20:nSessions  0.164899   0.116935   1.410  0.15851    
genderM:Age21:nSessions      0.252983   0.066990   3.776  0.00016 ***
genderOther:Age21:nSessions  0.078446   0.113209   0.693  0.48837    
genderM:Age22:nSessions      0.134330   0.066604   2.017  0.04373 *  
genderOther:Age22:nSessions  0.207922   0.126780   1.640  0.10103    
genderM:Age23:nSessions      0.047702   0.068413   0.697  0.48565    
genderOther:Age23:nSessions  0.026580   0.115313   0.231  0.81770    
genderM:Age24:nSessions      0.203496   0.075480   2.696  0.00703 ** 
genderOther:Age24:nSessions  0.057344   0.119929   0.478  0.63255    
genderM:Age25:nSessions      0.126469   0.074165   1.705  0.08818 .  
genderOther:Age25:nSessions  0.112369   0.123228   0.912  0.36185    
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

Residual standard error: 1.204 on 12473 degrees of freedom
Multiple R-squared:  0.7347,    Adjusted R-squared:  0.7333 
F-statistic: 523.2 on 66 and 12473 DF,  p-value: &lt; 2.2e-16</code></pre>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># lisLMFull$coefficients %&gt;%</span>
<span class='co'>#   as_tibble() %&gt;% # that ignores the names so ...</span>
<span class='co'>#   mutate(effect = names(lisLMFull$coefficients)) %&gt;% # get them!</span>
<span class='co'>#   select(effect, value) %&gt;% # more sensible order</span>
<span class='co'>#   rename(coefficient = value )</span>

<span class='co'>### hm, that's done for me in broom</span>
<span class='fu'>broom</span><span class='fu'>::</span><span class='fu'><a href='https://generics.r-lib.org/reference/tidy.html'>tidy</a></span><span class='op'>(</span><span class='va'>lisLMFull</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='co'>### identify the order of the terms, i.e. two-way interaction has order 2 etc.</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>order <span class='op'>=</span> <span class='fl'>1</span> <span class='op'>+</span> <span class='fu'><a href='https://stringr.tidyverse.org/reference/str_count.html'>str_count</a></span><span class='op'>(</span><span class='va'>term</span>, <span class='fu'><a href='https://stringr.tidyverse.org/reference/modifiers.html'>fixed</a></span><span class='op'>(</span><span class='st'>":"</span><span class='op'>)</span><span class='op'>)</span>,
         sig <span class='op'>=</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/if_else.html'>if_else</a></span><span class='op'>(</span><span class='va'>p.value</span> <span class='op'>&lt;</span> <span class='fl'>.05</span>, <span class='fl'>1</span>, <span class='fl'>0</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>-&gt;</span> <span class='va'>tibLMFull</span>

<span class='va'>valNinteractions</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='va'>tibLMFull</span><span class='op'>$</span><span class='va'>order</span> <span class='op'>&gt;</span> <span class='fl'>1</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>That’s not very digestible but it is, arguably, a sensible place to start. We can ignore the intercept really but it’s not zero!</p>
<p>More usefully, we have a very strong effect of initial score on final score, a statistically significant effect of male gender against the reference gender (female) and no statistically significant effect of gender “other” in this saturated model. The reference category for age is the lowest, age 15 and all the other ages show a statistically significantly different final score from that for age 15 except age 25. Finally, in the simple effects, we have a statistically significant effect of number of sessions on final score with coefficient estimate -0.099, i.e. a drop of about that in mean final score for every one more session attended. (Remember the final scores here distribute between -9.04 and 9.54 with SD 2.33 so I appear to have modelled in a pretty small effect of nSessions.</p>
<p>The complication is all those statistically significant interactions in this saturated model. We have 67 terms, including the intercept, 14 simple effects (ignoring the intercept) and 52 interactions, 32 two-way interactions and 20 three-way interactions. Here’s the breakdown of the numbers significant.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>tibLMFull</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>order</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/summarise.html'>summarise</a></span><span class='op'>(</span>n <span class='op'>=</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/context.html'>n</a></span><span class='op'>(</span><span class='op'>)</span>,
            nSignif <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='va'>sig</span><span class='op'>)</span>,
            propn <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/Round.html'>round</a></span><span class='op'>(</span><span class='va'>nSignif</span> <span class='op'>/</span> <span class='va'>n</span>, <span class='fl'>3</span><span class='op'>)</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'>pander</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/pander/man/pander.html'>pander</a></span><span class='op'>(</span>justify <span class='op'>=</span> <span class='st'>"lrrr"</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<table style="width:46%;">
<colgroup>
<col style="width: 11%" />
<col style="width: 6%" />
<col style="width: 13%" />
<col style="width: 13%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">order</th>
<th style="text-align: right;">n</th>
<th style="text-align: right;">nSignif</th>
<th style="text-align: right;">propn</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1</td>
<td style="text-align: right;">15</td>
<td style="text-align: right;">13</td>
<td style="text-align: right;">0.867</td>
</tr>
<tr class="even">
<td style="text-align: left;">2</td>
<td style="text-align: right;">32</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">0.188</td>
</tr>
<tr class="odd">
<td style="text-align: left;">3</td>
<td style="text-align: right;">20</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0.2</td>
</tr>
</tbody>
</table>
</div>
<p>With 52 the probability that <em>none</em> of them would come out statistically significant at p &lt; .05 given a true null population model would be .95^52, i.e. 0.069, pretty unlikely but the challenge is to know what to do about this. If we could treat age as linear we wouldn’t have all those effects for each age other than 15 and things would be much simpler, but we know I’ve modelled age as having a quadratic effect.</p>
<p>Cheat a bit and just fit the quadratic for age by centring and then squaring age.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># lm(last ~ first + gender + poly(Age, 2) + nSessions + </span>
<span class='co'>#      gender * poly(Age, 2) + gender * nSessions + gender * poly(Age, 2) + poly(Age, 2) * nSessions +</span>
<span class='co'>#      gender * poly(Age, 2) * nSessions, </span>
<span class='co'>#    data = tibDat) -&gt; lisLMAge2</span>

<span class='va'>centreVec</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span><span class='op'>{</span>
  <span class='va'>x</span> <span class='op'>-</span> <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>
<span class='op'>}</span>
<span class='va'>tibDat</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>ageSquared <span class='op'>=</span> <span class='fu'>centreVec</span><span class='op'>(</span><span class='va'>age</span><span class='op'>)</span>,
         ageSquared <span class='op'>=</span> <span class='va'>ageSquared</span><span class='op'>^</span><span class='fl'>2</span>,
         <span class='co'>### recentre to get mean zero</span>
         ageSquared <span class='op'>=</span> <span class='fu'>centreVec</span><span class='op'>(</span><span class='va'>ageSquared</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>-&gt;</span> <span class='va'>tibDat</span>

<span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span><span class='op'>(</span><span class='va'>last</span> <span class='op'>~</span> <span class='va'>first</span> <span class='op'>+</span> <span class='va'>gender</span> <span class='op'>+</span> <span class='va'>ageSquared</span> <span class='op'>+</span> <span class='va'>nSessions</span> <span class='op'>+</span> 
     <span class='va'>gender</span> <span class='op'>*</span> <span class='va'>ageSquared</span> <span class='op'>+</span> <span class='va'>gender</span> <span class='op'>*</span> <span class='va'>nSessions</span> <span class='op'>+</span> <span class='va'>gender</span> <span class='op'>*</span> <span class='va'>ageSquared</span> <span class='op'>+</span> <span class='va'>ageSquared</span> <span class='op'>*</span> <span class='va'>nSessions</span> <span class='op'>+</span>
     <span class='va'>gender</span> <span class='op'>*</span> <span class='va'>ageSquared</span> <span class='op'>*</span> <span class='va'>nSessions</span>, 
   data <span class='op'>=</span> <span class='va'>tibDat</span><span class='op'>)</span> <span class='op'>-&gt;</span> <span class='va'>lisLMAge2</span>

<span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>lisLMAge2</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>
Call:
lm(formula = last ~ first + gender + ageSquared + nSessions + 
    gender * ageSquared + gender * nSessions + gender * ageSquared + 
    ageSquared * nSessions + gender * ageSquared * nSessions, 
    data = tibDat)

Residuals:
    Min      1Q  Median      3Q     Max 
-5.2218 -0.7851  0.0042  0.7866  6.6092 

Coefficients:
                                  Estimate Std. Error t value
(Intercept)                       0.487414   0.031854  15.302
first                             0.993944   0.006364 156.183
genderM                           0.185764   0.055608   3.341
genderOther                      -0.448896   0.100998  -4.445
ageSquared                        0.092880   0.003776  24.599
nSessions                        -0.160088   0.007982 -20.056
genderM:ageSquared                0.013507   0.006633   2.036
genderOther:ageSquared            0.016109   0.011688   1.378
genderM:nSessions                 0.007668   0.013943   0.550
genderOther:nSessions             0.033676   0.025706   1.310
ageSquared:nSessions              0.001484   0.000951   1.561
genderM:ageSquared:nSessions     -0.003677   0.001646  -2.234
genderOther:ageSquared:nSessions -0.004052   0.002888  -1.403
                                 Pr(&gt;|t|)    
(Intercept)                       &lt; 2e-16 ***
first                             &lt; 2e-16 ***
genderM                          0.000838 ***
genderOther                      8.88e-06 ***
ageSquared                        &lt; 2e-16 ***
nSessions                         &lt; 2e-16 ***
genderM:ageSquared               0.041725 *  
genderOther:ageSquared           0.168146    
genderM:nSessions                0.582353    
genderOther:nSessions            0.190203    
ageSquared:nSessions             0.118665    
genderM:ageSquared:nSessions     0.025483 *  
genderOther:ageSquared:nSessions 0.160671    
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

Residual standard error: 1.204 on 12527 degrees of freedom
Multiple R-squared:  0.7334,    Adjusted R-squared:  0.7332 
F-statistic:  2872 on 12 and 12527 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<p>Hm, better but no cigar!</p>
<h4 id="start-over-from-simplest-model-and-build-up">Start over from simplest model and build up</h4>
<p>Baseline of regression model.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span><span class='op'>(</span><span class='va'>last</span> <span class='op'>~</span> <span class='va'>first</span>, data <span class='op'>=</span> <span class='va'>tibDat</span><span class='op'>)</span> <span class='op'>-&gt;</span> <span class='va'>lisLM1</span>
<span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>lisLM1</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>
Call:
lm(formula = last ~ first, data = tibDat)

Residuals:
    Min      1Q  Median      3Q     Max 
-5.7623 -0.9917 -0.0649  0.9554  6.3708 

Coefficients:
             Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept) -0.059685   0.013339  -4.474 7.73e-06 ***
first        1.050782   0.007721 136.089  &lt; 2e-16 ***
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

Residual standard error: 1.481 on 12538 degrees of freedom
Multiple R-squared:  0.5963,    Adjusted R-squared:  0.5963 
F-statistic: 1.852e+04 on 1 and 12538 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<p>Of course, highly significant.</p>
<p>Start by adding nSessions.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span><span class='op'>(</span><span class='va'>last</span> <span class='op'>~</span> <span class='va'>first</span> <span class='op'>+</span> <span class='va'>nSessions</span>, data <span class='op'>=</span> <span class='va'>tibDat</span><span class='op'>)</span> <span class='op'>-&gt;</span> <span class='va'>lisLMsessions</span>
<span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>lisLMsessions</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>
Call:
lm(formula = last ~ first + nSessions, data = tibDat)

Residuals:
    Min      1Q  Median      3Q     Max 
-5.7354 -0.9854 -0.0587  0.9371  6.2785 

Coefficients:
             Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  0.493428   0.030483   16.19   &lt;2e-16 ***
first        1.049997   0.007600  138.16   &lt;2e-16 ***
nSessions   -0.153717   0.007645  -20.11   &lt;2e-16 ***
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

Residual standard error: 1.458 on 12537 degrees of freedom
Multiple R-squared:  0.6089,    Adjusted R-squared:  0.6089 
F-statistic:  9760 on 2 and 12537 DF,  p-value: &lt; 2.2e-16</code></pre>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/stats/anova.html'>anova</a></span><span class='op'>(</span><span class='va'>lisLM1</span>, <span class='va'>lisLMsessions</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>Analysis of Variance Table

Model 1: last ~ first
Model 2: last ~ first + nSessions
  Res.Df   RSS Df Sum of Sq      F    Pr(&gt;F)    
1  12538 27519                                  
2  12537 26659  1    859.61 404.25 &lt; 2.2e-16 ***
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
</div>
<p>Marked effect, add gender.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span><span class='op'>(</span><span class='va'>last</span> <span class='op'>~</span> <span class='va'>first</span> <span class='op'>+</span> <span class='va'>nSessions</span> <span class='op'>+</span> <span class='va'>gender</span> <span class='op'>+</span> 
     <span class='va'>first</span> <span class='op'>*</span> <span class='va'>gender</span> <span class='op'>+</span> <span class='va'>nSessions</span> <span class='op'>*</span> <span class='va'>gender</span>, data <span class='op'>=</span> <span class='va'>tibDat</span><span class='op'>)</span> <span class='op'>-&gt;</span> <span class='va'>lisLMsessionsGend</span>
<span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>lisLMsessionsGend</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>
Call:
lm(formula = last ~ first + nSessions + gender + first * gender + 
    nSessions * gender, data = tibDat)

Residuals:
    Min      1Q  Median      3Q     Max 
-5.8788 -0.9743 -0.0582  0.9252  6.1165 

Coefficients:
                       Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)            0.485972   0.038493  12.625  &lt; 2e-16 ***
first                  1.080155   0.011457  94.280  &lt; 2e-16 ***
nSessions             -0.164001   0.009619 -17.050  &lt; 2e-16 ***
genderM                0.134615   0.067036   2.008  0.04466 *  
genderOther           -0.559267   0.121707  -4.595 4.37e-06 ***
first:genderM         -0.043459   0.016244  -2.675  0.00748 ** 
first:genderOther     -0.033507   0.024374  -1.375  0.16925    
nSessions:genderM      0.019821   0.016800   1.180  0.23808    
nSessions:genderOther  0.064524   0.030661   2.104  0.03536 *  
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

Residual standard error: 1.451 on 12531 degrees of freedom
Multiple R-squared:  0.6127,    Adjusted R-squared:  0.6125 
F-statistic:  2478 on 8 and 12531 DF,  p-value: &lt; 2.2e-16</code></pre>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/stats/anova.html'>anova</a></span><span class='op'>(</span><span class='va'>lisLMsessions</span>, <span class='va'>lisLMsessionsGend</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>Analysis of Variance Table

Model 1: last ~ first + nSessions
Model 2: last ~ first + nSessions + gender + first * gender + nSessions * 
    gender
  Res.Df   RSS Df Sum of Sq     F    Pr(&gt;F)    
1  12537 26659                                 
2  12531 26399  6    260.01 20.57 &lt; 2.2e-16 ***
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
</div>
<p>Highly significant effect of session count remains but odd effects of gender and an interaction!</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>### age effect treating age as continuous</span>
<span class='co'>### short cut syntax for all interactions</span>
<span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span><span class='op'>(</span><span class='va'>last</span> <span class='op'>~</span> <span class='va'>first</span> <span class='op'>*</span> <span class='va'>nSessions</span> <span class='op'>*</span> <span class='va'>gender</span> <span class='op'>*</span> <span class='va'>age</span>,
   data <span class='op'>=</span> <span class='va'>tibDat</span><span class='op'>)</span> <span class='op'>-&gt;</span> <span class='va'>lisLMAge</span>
<span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>lisLMAge</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>
Call:
lm(formula = last ~ first * nSessions * gender * age, data = tibDat)

Residuals:
    Min      1Q  Median      3Q     Max 
-5.8609 -0.9722 -0.0591  0.9302  6.1641 

Coefficients:
                                  Estimate Std. Error t value
(Intercept)                      6.135e-01  2.764e-01   2.219
first                            8.386e-01  1.792e-01   4.680
nSessions                       -1.869e-01  6.889e-02  -2.713
genderM                          5.216e-01  4.757e-01   1.097
genderOther                      1.267e-01  8.901e-01   0.142
age                             -7.045e-03  1.371e-02  -0.514
first:nSessions                  5.968e-02  4.488e-02   1.330
first:genderM                    6.626e-01  2.658e-01   2.493
first:genderOther                3.499e-01  3.868e-01   0.904
nSessions:genderM               -1.661e-01  1.186e-01  -1.401
nSessions:genderOther            4.852e-02  2.232e-01   0.217
first:age                        1.450e-02  8.822e-03   1.644
nSessions:age                    1.319e-03  3.412e-03   0.387
genderM:age                     -1.829e-02  2.357e-02  -0.776
genderOther:age                 -3.146e-02  4.421e-02  -0.712
first:nSessions:genderM         -1.544e-01  6.698e-02  -2.305
first:nSessions:genderOther     -1.250e-01  9.482e-02  -1.318
first:nSessions:age             -3.658e-03  2.201e-03  -1.662
first:genderM:age               -3.780e-02  1.310e-02  -2.885
first:genderOther:age           -2.392e-02  1.916e-02  -1.248
nSessions:genderM:age            9.022e-03  5.862e-03   1.539
nSessions:genderOther:age       -3.436e-05  1.115e-02  -0.003
first:nSessions:genderM:age      8.397e-03  3.286e-03   2.555
first:nSessions:genderOther:age  7.614e-03  4.767e-03   1.597
                                Pr(&gt;|t|)    
(Intercept)                      0.02649 *  
first                            2.9e-06 ***
nSessions                        0.00668 ** 
genderM                          0.27283    
genderOther                      0.88683    
age                              0.60742    
first:nSessions                  0.18360    
first:genderM                    0.01267 *  
first:genderOther                0.36581    
nSessions:genderM                0.16123    
nSessions:genderOther            0.82789    
first:age                        0.10027    
nSessions:age                    0.69909    
genderM:age                      0.43794    
genderOther:age                  0.47673    
first:nSessions:genderM          0.02120 *  
first:nSessions:genderOther      0.18750    
first:nSessions:age              0.09648 .  
first:genderM:age                0.00392 ** 
first:genderOther:age            0.21187    
nSessions:genderM:age            0.12379    
nSessions:genderOther:age        0.99754    
first:nSessions:genderM:age      0.01063 *  
first:nSessions:genderOther:age  0.11027    
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

Residual standard error: 1.451 on 12516 degrees of freedom
Multiple R-squared:  0.6135,    Adjusted R-squared:  0.6128 
F-statistic: 863.9 on 23 and 12516 DF,  p-value: &lt; 2.2e-16</code></pre>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/stats/anova.html'>anova</a></span><span class='op'>(</span><span class='va'>lisLM1</span>, <span class='va'>lisLMAge</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>Analysis of Variance Table

Model 1: last ~ first
Model 2: last ~ first * nSessions * gender * age
  Res.Df   RSS Df Sum of Sq      F    Pr(&gt;F)    
1  12538 27519                                  
2  12516 26345 22    1173.5 25.342 &lt; 2.2e-16 ***
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
</div>
<p>No effect of age as it’s got a quadratic effect in my model!</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>### age effect treating age as continuous but adding quadratic term</span>
<span class='co'>### short cut syntax for all interactions again</span>
<span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span><span class='op'>(</span><span class='va'>last</span> <span class='op'>~</span> <span class='va'>first</span> <span class='op'>*</span> <span class='va'>nSessions</span> <span class='op'>*</span> <span class='va'>gender</span> <span class='op'>*</span> <span class='va'>ageSquared</span>,
   data <span class='op'>=</span> <span class='va'>tibDat</span><span class='op'>)</span> <span class='op'>-&gt;</span> <span class='va'>lisLMAge</span>
<span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>lisLMAge2</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>
Call:
lm(formula = last ~ first + gender + ageSquared + nSessions + 
    gender * ageSquared + gender * nSessions + gender * ageSquared + 
    ageSquared * nSessions + gender * ageSquared * nSessions, 
    data = tibDat)

Residuals:
    Min      1Q  Median      3Q     Max 
-5.2218 -0.7851  0.0042  0.7866  6.6092 

Coefficients:
                                  Estimate Std. Error t value
(Intercept)                       0.487414   0.031854  15.302
first                             0.993944   0.006364 156.183
genderM                           0.185764   0.055608   3.341
genderOther                      -0.448896   0.100998  -4.445
ageSquared                        0.092880   0.003776  24.599
nSessions                        -0.160088   0.007982 -20.056
genderM:ageSquared                0.013507   0.006633   2.036
genderOther:ageSquared            0.016109   0.011688   1.378
genderM:nSessions                 0.007668   0.013943   0.550
genderOther:nSessions             0.033676   0.025706   1.310
ageSquared:nSessions              0.001484   0.000951   1.561
genderM:ageSquared:nSessions     -0.003677   0.001646  -2.234
genderOther:ageSquared:nSessions -0.004052   0.002888  -1.403
                                 Pr(&gt;|t|)    
(Intercept)                       &lt; 2e-16 ***
first                             &lt; 2e-16 ***
genderM                          0.000838 ***
genderOther                      8.88e-06 ***
ageSquared                        &lt; 2e-16 ***
nSessions                         &lt; 2e-16 ***
genderM:ageSquared               0.041725 *  
genderOther:ageSquared           0.168146    
genderM:nSessions                0.582353    
genderOther:nSessions            0.190203    
ageSquared:nSessions             0.118665    
genderM:ageSquared:nSessions     0.025483 *  
genderOther:ageSquared:nSessions 0.160671    
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

Residual standard error: 1.204 on 12527 degrees of freedom
Multiple R-squared:  0.7334,    Adjusted R-squared:  0.7332 
F-statistic:  2872 on 12 and 12527 DF,  p-value: &lt; 2.2e-16</code></pre>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/stats/anova.html'>anova</a></span><span class='op'>(</span><span class='va'>lisLM1</span>, <span class='va'>lisLMAge2</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<pre><code>Analysis of Variance Table

Model 1: last ~ first
Model 2: last ~ first + gender + ageSquared + nSessions + gender * ageSquared + 
    gender * nSessions + gender * ageSquared + ageSquared * nSessions + 
    gender * ageSquared * nSessions
  Res.Df   RSS Df Sum of Sq      F    Pr(&gt;F)    
1  12538 27519                                  
2  12527 18170 11    9348.3 585.89 &lt; 2.2e-16 ***
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
<details>
<summary>
Show code
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>jtools</span><span class='fu'>::</span><span class='fu'><a href='https://jtools.jacob-long.com/reference/effect_plot.html'>effect_plot</a></span><span class='op'>(</span><span class='va'>lisLMAge2</span>, pred <span class='op'>=</span> <span class='va'>ageSquared</span>, interval <span class='op'>=</span> <span class='cn'>TRUE</span>, rug <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<p><img src="prepost-analyses_files/figure-html5/lmAge2-1.png" width="624" /></p>
</div>
<p>I’ve added an effect plot with “rugs” for the y and x variables. Shows clear quadratic effect of age (looks linear because we’re plotting against squared age).</p>
<p>Basically, this is a surprisingly real world mess! I will stop here as I want to check my hunch that I’ve created these (as I say, very real world) interactions by the way I created the final scores using a multiplier rather than a simple addition. However, this does demonstrate the complexities of disentangline effects with even a few predictors particularly when gender is treated not as binary and when age cannot be treated as a linear variable as it clearly has a quadratic effect.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<!--radix_placeholder_article_footer-->
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>


<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom"></div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
